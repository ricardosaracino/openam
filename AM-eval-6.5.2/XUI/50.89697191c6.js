(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[50],{1417:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){var r=[];var n=true;var a=false;var o=void 0;try{for(var l=e[Symbol.iterator](),i;!(n=(i=l.next()).done);n=true){r.push(i.value);if(t&&r.length===t)break}}catch(e){a=true;o=e}finally{try{!n&&l["return"]&&l["return"]()}finally{if(a)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(3);var l=r(6);var i=r(61);var s=r(0);var u=C(s);var c=r(1);var f=C(c);var d=r(1586);var p=r(182);var v=r(272);var m=r(1527);var h=C(m);var y=r(2043);var g=C(y);var b=r(560);var S=C(b);var _=r(73);var T=C(_);var P=r(1526);var A=C(P);var E=r(1522);var O=C(E);function C(e){return e&&e.__esModule?e:{default:e}}function w(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var l=t[a](o);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=function(e){k(t,e);function t(e){I(this,t);var r=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isFetching:true};r.handleDelete=r.handleDelete.bind(r);r.handleEdit=r.handleEdit.bind(r);return r}a(t,[{key:"componentDidMount",value:function(){var e=w(regeneratorRuntime.mark(function e(){var t,r,a,o,i,s,u;return regeneratorRuntime.wrap(function e(c){while(1)switch(c.prev=c.next){case 0:c.prev=0;c.next=3;return Promise.all([(0,d.getCreatableTypes)(),(0,d.getSingletonTypes)()]);case 3:t=c.sent;r=n(t,2);a=r[0];o=r[1];i=(0,l.map)(a.result,function(e){return e._id});c.next=10;return Promise.all((0,l.map)(i,function(e){return(0,d.getAll)(e)}));case 10:s=c.sent;u=(0,l.reduce)(s,function(e,t){return e.concat(t.result)},[]);this.props.setInstances(u);this.props.setSingletonStoreTypes(o);c.next=19;break;case 16:c.prev=16;c.t0=c["catch"](0);S.default.addMessage({response:c.t0,type:S.default.TYPE_DANGER});case 19:c.prev=19;this.setState({isFetching:false});return c.finish(19);case 22:case"end":return c.stop()}},e,this,[[0,16,19,22]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleDelete",value:function e(t){var r=this;var n=this.props.stores.length===t.length;var a=n?(0,i.t)("console.secretStores.confirmDeleteAll",{count:t.length}):(0,i.t)("console.secretStores.confirmDeleteSelected",{count:t.length});(0,A.default)({message:a},w(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return(0,d.remove)(t);case 3:S.default.messages.displayMessageFromConfig("changesSaved");(0,l.forEach)(t,function(e){return r.props.removeInstance(e._compositeId)});n.next=10;break;case 7:n.prev=7;n.t0=n["catch"](0);S.default.addMessage({response:n.t0,type:S.default.TYPE_DANGER});case 10:case"end":return n.stop()}},e,r,[[0,7]])})))}},{key:"handleEdit",value:function e(t){var r=t._id,n=t._type;T.default.routeTo(T.default.configuration.routes.editGlobalSecretStores,{args:(0,l.map)([n._id,r],encodeURIComponent),trigger:true})}},{key:"render",value:function e(){return f.default.createElement(g.default,{isFetching:this.state.isFetching,items:this.props.stores,keyField:"_compositeId",onDelete:this.handleDelete,onRowClick:this.handleEdit,singletonStoreTypes:this.props.singletonStoreTypes})}}]);return t}(c.Component);j.propTypes={removeInstance:u.default.func.isRequired,setInstances:u.default.func.isRequired,setSingletonStoreTypes:u.default.func.isRequired,singletonStoreTypes:u.default.arrayOf(u.default.object).isRequired,stores:u.default.arrayOf(u.default.object).isRequired};j=(0,h.default)(j,function(e){return{singletonStoreTypes:e.remote.config.global.secretStores.singletons.types.list,stores:(0,p.withCompositeId)(e.remote.config.global.secretStores.instances.list)}},function(e){return{removeInstance:(0,o.bindActionCreators)(p.remove,e),setSingletonStoreTypes:(0,o.bindActionCreators)(v.set,e),setInstances:(0,o.bindActionCreators)(p.set,e)}});j=(0,O.default)(j);t.default=j},1545:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var a=i(n);var o=r(7);var l=i(o);function i(e){return e&&e.__esModule?e:{default:e}}var s=function e(t,r,n){return a.default.createElement("span",{className:(0,l.default)({"am-table-icon-cell":true,"am-table-icon-cell-editable":r})},a.default.createElement("span",{className:"fa-stack fa-lg am-table-icon-cell-stack"},a.default.createElement("i",{className:"fa fa-circle fa-stack-2x text-primary"}),a.default.createElement("i",{className:"fa "+t+" fa-stack-1x fa-inverse"}))," ",a.default.createElement("span",null,n))};var u=function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(e){return s(t,r,e)}};t.default=u},1556:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=function e(t,r){return function(e,a,o,l){return t((0,n.get)(e,r),a,o,l)}};t.default=a},1586:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.get=f;t.getSingleton=d;t.create=p;t.getAll=v;t.getCreatableTypesByType=m;t.getSingletonTypes=h;t.getCreatableTypes=y;t.getSchema=g;t.getInitialState=b;t.remove=S;t.update=_;t.updateSingleton=T;var n=r(6);var a=r(169);var o=s(a);var l=r(27);var i=s(l);function s(e){return e&&e.__esModule?e:{default:e}}var u=new o.default(""+i.default.host+i.default.context+"/json");var c="/global-config/secrets/stores";function f(e,t){return u.serviceCall({url:c+"/"+e+"/"+encodeURIComponent(t),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function d(e){return u.serviceCall({url:c+"/"+e,headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function p(e,t,r){return u.serviceCall({url:c+"/"+e+"/"+encodeURIComponent(r),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0","If-None-Match":"*"},data:JSON.stringify(t)})}function v(e){return u.serviceCall({url:c+"/"+e+"?_queryFilter=true",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function m(e){return u.serviceCall({url:c+"/"+e+"?_action=getCreatableTypes",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function h(){return u.serviceCall({url:c+"?_action=getAllTypes",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"}).then(function(e){var t=e.result;return(0,n.filter)(t,function(e){return false===e.collection})})}function y(){return u.serviceCall({url:c+"?_action=getCreatableTypes",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function g(e){return u.serviceCall({url:c+"/"+e+"?_action=schema",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function b(e){function t(){return u.serviceCall({url:c+"/"+e+"?_action=template",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}return Promise.all([g(e),t()]).then(function(e){return{schema:e[0],values:e[1]}})}function S(e){var t=(0,n.map)(e,function(e){return u.serviceCall({url:c+"/"+e._type._id+"/"+encodeURIComponent(e._id),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"DELETE"})});return Promise.all(t)}function _(e,t,r){return u.serviceCall({url:c+"/"+e+"/"+encodeURIComponent(t),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},data:JSON.stringify((0,n.omit)(r,"_rev"))})}function T(e,t){return u.serviceCall({url:c+"/"+e,type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},data:JSON.stringify((0,n.omit)(t,"_rev"))})}},1627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var a=i(n);var o=r(1);var l=i(o);function i(e){return e&&e.__esModule?e:{default:e}}var s=function e(t){var r=t.children,n=t.header,a=t.description;var o=a?l.default.createElement("p",{className:"block-description"},a):void 0;return l.default.createElement("div",{className:"block clearfix"},l.default.createElement("h3",{className:"block-header"},n),o,r)};s.propTypes={children:a.default.oneOfType([a.default.arrayOf(a.default.node),a.default.node]).isRequired,description:a.default.string,header:a.default.string.isRequired};t.default=s},2043:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(570);var o=r(6);var l=r(61);var i=r(656);var s=r(1627);var u=A(s);var c=r(0);var f=A(c);var d=r(1);var p=A(d);var v=r(1556);var m=A(v);var h=r(1545);var y=A(h);var g=r(1547);var b=A(g);var S=r(1529);var _=A(S);var T=r(73);var P=A(T);function A(e){return e&&e.__esModule?e:{default:e}}function E(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}var O=function e(t){var r=t.singletonStoreTypes,s=E(t,["singletonStoreTypes"]);var c="#"+P.default.getLink(P.default.configuration.routes.editSecretStoresCoreAttributes);var f="#"+P.default.getLink(P.default.configuration.routes.newGlobalSecretStores);var d=r.map(function(e){return p.default.createElement(a.ListGroupItem,{href:"#"+P.default.getLink(P.default.configuration.routes.editGlobalSingletonSecretStores,[e._id]),key:e._id},e.name)});return p.default.createElement(a.Grid,null,p.default.createElement(_.default,{title:(0,l.t)("console.secretStores.title")}),p.default.createElement(a.Panel,null,p.default.createElement(a.Panel.Body,null,p.default.createElement(u.default,{description:(0,l.t)("console.secretStores.core.description"),header:(0,l.t)("console.secretStores.core.title")},p.default.createElement(a.ListGroup,null,p.default.createElement(a.ListGroupItem,{href:c},(0,l.t)("console.secretStores.core.coreAttributes")))),p.default.createElement(u.default,{description:(0,l.t)("console.secretStores.singletons.description"),header:(0,l.t)("console.secretStores.singletons.title")},p.default.createElement(a.ListGroup,null,d)),p.default.createElement(u.default,{description:(0,l.t)("console.secretStores.list.global-description"),header:(0,l.t)("console.secretStores.list.title")},p.default.createElement(b.default,n({},(0,o.omit)(s,"children"),{addButton:{title:(0,l.t)("console.secretStores.list.callToAction.button"),href:f},description:(0,l.t)("console.secretStores.list.callToAction.description"),title:(0,l.t)("console.secretStores.list.callToAction.title")}),p.default.createElement(i.TableHeaderColumn,{dataField:"_id",dataFormat:(0,y.default)("fa-eye"),dataSort:true},(0,l.t)("console.secretStores.list.grid.0")),p.default.createElement(i.TableHeaderColumn,{dataField:"_type",dataFormat:(0,m.default)(function(e){return e},"name")},(0,l.t)("console.secretStores.list.grid.1")))))))};O.propTypes={isFetching:f.default.bool.isRequired,items:f.default.arrayOf(f.default.shape({_id:f.default.string.isRequired,_type:f.default.shape({name:f.default.string.isRequired})})),onDelete:f.default.func.isRequired,onRowClick:f.default.func.isRequired,singletonStoreTypes:f.default.arrayOf(f.default.shape({_id:f.default.string.isRequired,name:f.default.string.isRequired}))};t.default=O}}]);
//# sourceMappingURL=50.89697191c6.js.map