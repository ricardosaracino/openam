(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[127],{1393:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=function(){function e(e,t){var r=[];var n=true;var a=false;var o=void 0;try{for(var i=e[Symbol.iterator](),u;!(n=(u=i.next()).done);n=true){r.push(u.value);if(t&&r.length===t)break}}catch(e){a=true;o=e}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(3);var u=r(6);var s=r(61);var d=r(0);var l=H(d);var c=r(1);var f=H(c);var p=r(2016);var v=H(p);var h=r(194);var m=r(223);var y=r(193);var g=r(191);var N=r(220);var b=r(221);var _=r(1615);var E=r(115);var O=r(2013);var C=r(278);var P=r(282);var R=r(222);var w=r(279);var D=r(281);var T=r(195);var S=r(2012);var M=H(S);var q=r(1527);var I=H(q);var j=r(2005);var x=H(j);var A=r(560);var k=H(A);var F=r(81);var L=H(F);var U=r(1522);var Y=H(U);var G=r(1521);var W=H(G);function H(e){return e&&e.__esModule?e:{default:e}}function X(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function B(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function V(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var J=function e(t,r){var n=(0,u.chain)(t.nodes).values().map("connections").map(function(e){return(0,u.values)(e)}).flatten().value();return-1!==n.indexOf(r)||t.entryNodeId===r};var Z=function(e){V(t,e);function t(){K(this,t);var e=z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={autoLayoutCompleted:false,isFetching:true,isFullscreen:false};e.handleAutoLayout=e.handleAutoLayout.bind(e);e.handleFullscreenToggle=e.handleFullscreenToggle.bind(e);e.handleNewConnection=e.handleNewConnection.bind(e);e.handleNewNode=e.handleNewNode.bind(e);e.handleNodeDelete=e.handleNodeDelete.bind(e);e.handleNodeDimensionsChange=e.handleNodeDimensionsChange.bind(e);e.handleNodeDisplayNameChange=e.handleNodeDisplayNameChange.bind(e);e.handleNodeMove=e.handleNodeMove.bind(e);e.handleNodePropertiesChange=e.handleNodePropertiesChange.bind(e);e.handleNodeSelect=e.handleNodeSelect.bind(e);e.handleTreeSave=e.handleTreeSave.bind(e);e.loadOutcomes=e.loadOutcomes.bind(e);e.performAutoLayout=e.performAutoLayout.bind(e);return e}o(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.removeCurrentTree();var r=this.props.router.params[0];(0,O.getAllTypes)(r).then(function(e){t.props.setNodeTypes(e.result)},function(e){return k.default.addMessage({response:e,type:k.default.TYPE_DANGER})});var n=this.props.router.params[1];(0,_.get)(r,n).then(function(e){t.props.updateTree.inLocal(e);t.props.updateTree.inRemote(e);var r=J(e,E.SUCCESS_NODE_ID);var n=J(e,E.FAILURE_NODE_ID);t.props.setNodes.toLocal(e.nodes,e.entryNodeId,r,n);t.props.setNodes.toRemote(e.nodes);return e.nodes}).then(function(e){return Promise.all((0,u.toPairs)(e).filter(function(e){var t=a(e,2),r=t[1];return r.nodeType===E.PAGE_NODE_TYPE}).map(function(e){var n=a(e,2),o=n[0],i=n[1];return(0,O.get)(r,i.nodeType,o).then(function(e){t.props.addNodeProperties.toRemote(e);t.props.addNodeProperties.toLocal(e);e.nodes.forEach(function(e){t.props.addNodeInPage(e._id,o);t.props.addNode.toLocal(B({},e._id,e));t.props.addNode.toRemote(B({},e._id,e))})})}))}).then(function(){t.setState({isFetching:false})},function(e){k.default.addMessage({response:e,type:k.default.TYPE_DANGER});t.setState({isFetching:false})})}},{key:"componentWillReceiveProps",value:function e(t){if(!this.state.autoLayoutCompleted){var r=function e(t){return!(0,u.isEmpty)(t)&&(0,u.every)(t,function(e){var t=e.height,r=e.width;return t>0&&r>0})};var n=r(this.props.measurements);var a=r(t.measurements);if(!n&&a){this.setState({autoLayoutCompleted:true});this.performAutoLayout(t.measurements)}}}},{key:"performAutoLayout",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.measurements;var n=(0,M.default)((0,u.findKey)((0,E.start)(this.props.tree.entryNodeId)),(0,u.omit)(this.props.localNodes,(0,u.keys)(this.props.nodesInPages)),r);(0,u.each)(n,function(e,r){var n=e.x,a=e.y;t.props.handleNodeMove({id:r,x:n,y:a})})}},{key:"handleAutoLayout",value:function e(){this.performAutoLayout(this.props.measurements)}},{key:"handleFullscreenToggle",value:function e(){this.setState({isFullscreen:!this.state.isFullscreen})}},{key:"handleTreeSave",value:function(){var e=X(regeneratorRuntime.mark(function e(){var t=this;var r,a,o,i,s,d,l,c,f,p;return regeneratorRuntime.wrap(function e(v){while(1)switch(v.prev=v.next){case 0:r=this.props.router.params[0];a={_type:{_id:"PageNode"}};o=(0,u.reject)(this.props.localNodeProperties,a);i=(0,u.filter)(this.props.localNodeProperties,a);v.prev=4;s=function e(n){return(0,u.map)(n,function(){var e=X(regeneratorRuntime.mark(function e(n){var a;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return(0,O.createOrUpdate)(r,n,n._type._id,n._id);case 2:a=o.sent;t.props.addNodeProperties.toRemote(a);case 4:case"end":return o.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())};d=s(o);v.next=9;return Promise.all(d);case 9:l=s(i);v.next=12;return Promise.all(l);case 12:v.next=14;return(0,_.update)(r,n({},this.props.tree,{nodes:(0,u.omit)(this.props.localNodes,[E.FAILURE_NODE_ID,(0,u.findKey)((0,E.start)()),E.SUCCESS_NODE_ID].concat((0,u.keys)(this.props.nodesInPages)))}),this.props.tree._id);case 14:c=v.sent;f=(0,u.difference)((0,u.keys)(this.props.remoteNodes),(0,u.union)((0,u.keys)(this.props.nodesInPages),(0,u.keys)(this.props.localNodes)));p=(0,u.map)(f,function(e){return(0,O.remove)(r,t.props.remoteNodes[e].nodeType,e).then(function(){t.props.removeNodePropertiesFromRemote(e)})});this.props.updateTree.inRemote(c);this.props.setNodes.toRemote(c.nodes);v.next=21;return Promise.all(p);case 21:k.default.messages.displayMessageFromConfig("changesSaved");v.next=27;break;case 24:v.prev=24;v.t0=v["catch"](4);k.default.addMessage({response:v.t0,type:k.default.TYPE_DANGER});case 27:case"end":return v.stop()}},e,this,[[4,24]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleNodeDimensionsChange",value:function e(t,r,n){this.props.handleNodeDimensionsChange({id:t,height:r,width:n})}},{key:"handleNodeMove",value:function e(t,r,n,a,o){var i=this.props.localNodeProperties[t];var d=(0,u.get)(i,"_type._id");var l=t!==E.FAILURE_NODE_ID&&t!==E.SUCCESS_NODE_ID&&t!==E.START_NODE_ID&&d!==E.INNER_TREE_NODE_TYPE&&d!==E.PAGE_NODE_TYPE;if(a&&o&&l){var c=L.default.getState();var f=c.local.config.realm.authentication.trees.current.nodes.pages.positions;var p=(0,u.findKey)(f,function(e){return a>e.x&&a<e.x+e.width&&o>e.y&&o<e.y+e.height});var v=this.props.nodesInPages[t];if(p){if(v===p)return;if(this.props.localNodes[p]._outcomes.length>1)k.default.addMessage({message:(0,s.t)("console.authentication.trees.edit.nodes.pages.alreadyComplete"),type:k.default.TYPE_DANGER});else{this.props.moveNodeToPage({nodeId:t,pageId:p});this.loadOutcomes(p,E.PAGE_NODE_TYPE,this.props.localNodeProperties[p])}return}if(v){this.props.moveNodeToTree(t);this.loadOutcomes(v,E.PAGE_NODE_TYPE,this.props.localNodeProperties[v]);this.loadOutcomes(t,d,i)}}this.props.handleNodeMove({id:t,x:r,y:n})}},{key:"handleNewConnection",value:function e(t,r,n){this.props.addOrUpdateConnection(B({},r,n),t);t===(0,u.findKey)((0,E.start)())&&this.updateLocalEntryNodeId(n)}},{key:"handleNodePropertiesChange",value:function e(t,r,n){if(this.props.nodesInPages[t]){var a=this.props.nodesInPages[t];this.handleNodePropertiesChange(a,E.PAGE_NODE_TYPE,this.props.localNodeProperties[a])}else this.loadOutcomes(t,r,n)}},{key:"handleNodeDelete",value:function e(t){this.props.tree.entryNodeId===t&&this.updateLocalEntryNodeId(null);this.props.removeNode(t);if(this.props.nodesInPages[t]){var r=this.props.nodesInPages[t];var a=this.props.localNodeProperties[r];var o=n({},a,{nodes:(0,u.filter)(a.nodes,function(e){return e._id!==t})});this.props.removeNodeInPage(t);this.props.addNodeProperties.toLocal(o);this.handleNodePropertiesChange(r,E.PAGE_NODE_TYPE,o)}}},{key:"handleNodeSelect",value:function e(t,r,a){var o=this;this.props.handleNodeSelect({id:t,type:r});var i=!(0,E.isStaticNodeType)(r)&&!this.props.localNodeProperties[t];var s=r===E.PAGE_NODE_TYPE&&!this.props.nodeTypeSchema[E.PAGE_NODE_TYPE];if(s||i){var d=this.props.router.params[0];var l=function e(t){t.properties=(0,u.mapValues)(t.properties,function(e){if(e.format&&"password"===e.format){delete e.format;e._isPassword=true}return e});return t};(0,O.getSchema)(d,r).then(l).then(function(e){return o.props.addNodeSchema(e,r)});var c=!this.props.remoteNodes[t];c?(0,O.getTemplate)(d,r).then(function(e){o.props.addNodeProperties.toLocal(n({},e,{_id:t,_type:{_id:r,name:a}}))}):(0,O.get)(d,r,t).then(function(e){o.props.addNodeProperties.toRemote(e);o.props.addNodeProperties.toLocal(e)})}}},{key:"handleNodeDisplayNameChange",value:function e(t,r){this.props.setNodeDisplayName({displayName:r,id:t})}},{key:"handleNewNode",value:function e(t,r){var a=void 0;switch(t.nodeType){case E.SUCCESS_NODE_TYPE:a=E.SUCCESS_NODE_ID;break;case E.FAILURE_NODE_TYPE:a=E.FAILURE_NODE_ID;break;default:a=(0,v.default)()}this.props.addNode.toLocal(B({},a,n({},t,{_outcomes:[]})));r&&this.props.handleNodeMove(n({id:a},r));if(!(0,E.isStaticNodeType)(t.nodeType)){this.handleNodeSelect(a,t.nodeType,t.displayName);this.handleNodePropertiesChange(a,t.nodeType)}return a}},{key:"loadOutcomes",value:function e(t,r,a){var o=this;var i=this.props.router.params[0];var s=a&&r===E.PAGE_NODE_TYPE?{nodes:a.nodes.map(function(e){return n({},e,{_properties:o.props.localNodeProperties[e._id]})})}:a;(0,O.listOutcomes)(i,s,r).then(function(e){var r=o.props.localNodes[t]._outcomes;var n=(0,u.map)(r,"id");var a=(0,u.map)(e,"id");o.props.setNodeOutcomes(e,t);o.props.removeConnection((0,u.difference)(n,a),t)},function(e){return k.default.addMessage({response:e,type:k.default.TYPE_DANGER})})}},{key:"updateLocalEntryNodeId",value:function e(t){this.props.updateTree.inLocal(n({},this.props.tree,{entryNodeId:t}))}},{key:"render",value:function e(){var t=this.props.router.params[1];var r=this.props.addNodeProperties.toLocal;return f.default.createElement(x.default,{isFetching:this.state.isFetching,isFullscreen:this.state.isFullscreen,localNodeProperties:this.props.localNodeProperties,measurements:this.props.measurements,nodeTypes:this.props.nodeTypes,nodes:this.props.localNodes,nodesInPages:this.props.nodesInPages,onAutoLayout:this.handleAutoLayout,onFullscreenToggle:this.handleFullscreenToggle,onNewConnection:this.handleNewConnection,onNewNodeCreate:this.handleNewNode,onNodeDelete:this.handleNodeDelete,onNodeDeselect:this.props.handleNodeDeselect,onNodeDimensionsChange:this.handleNodeDimensionsChange,onNodeDisplayNameChange:this.handleNodeDisplayNameChange,onNodeMove:this.handleNodeMove,onNodePropertiesChange:this.handleNodePropertiesChange,onNodePropertiesFieldChange:r,onNodeSelect:this.handleNodeSelect,onTreeSave:this.handleTreeSave,selectedNode:this.props.selectedNode,selectedNodeIsNew:!this.props.remoteNodes[this.props.selectedNode.id],selectedNodeProperties:this.props.selectedNodeProperties,selectedNodeSchema:this.props.selectedNodeSchema,treeId:t})}}]);return t}(c.Component);Z.propTypes={addNode:l.default.func.isRequired,addNodeInPage:l.default.func.isRequired,addNodeProperties:l.default.func.isRequired,addNodeSchema:l.default.func.isRequired,addOrUpdateConnection:l.default.func.isRequired,handleNodeDeselect:l.default.func.isRequired,handleNodeDimensionsChange:l.default.func.isRequired,handleNodeMove:l.default.func.isRequired,handleNodeSelect:l.default.func.isRequired,localNodeProperties:l.default.objectOf(l.default.shape({_type:l.default.shape({_id:l.default.string}),nodes:l.default.arrayOf(l.default.string.isRequired)})).isRequired,localNodes:C.propType.nodes,measurements:l.default.objectOf(l.default.object).isRequired,moveNodeToPage:l.default.func.isRequired,moveNodeToTree:l.default.func.isRequired,nodeTypeSchema:l.default.objectOf(l.default.object).isRequired,nodeTypes:l.default.objectOf(l.default.object).isRequired,nodesInPages:l.default.objectOf(l.default.string).isRequired,remoteNodes:l.default.objectOf(l.default.object).isRequired,removeConnection:l.default.func.isRequired,removeCurrentTree:l.default.func.isRequired,removeNode:l.default.func.isRequired,removeNodeInPage:l.default.func.isRequired,removeNodePropertiesFromRemote:l.default.func.isRequired,router:W.default,selectedNode:l.default.shape({id:l.default.string,type:l.default.string}),selectedNodeProperties:l.default.objectOf(l.default.any),selectedNodeSchema:l.default.objectOf(l.default.any),setNodeDisplayName:l.default.func.isRequired,setNodeOutcomes:l.default.func.isRequired,setNodeTypes:l.default.func.isRequired,setNodes:l.default.objectOf(l.default.func.isRequired).isRequired,tree:l.default.shape({_id:l.default.string.isRequired,entryNodeId:l.default.string}),updateTree:l.default.func.isRequired};Z=(0,I.default)(Z,function(e,t){var r=t.router.params[1];var n=e.local.config.realm.authentication.trees.current.nodes.selected;var a=e.local.config.realm.authentication.trees.current.nodes.properties;return{localNodeProperties:a,localNodes:e.local.config.realm.authentication.trees.current.tree.nodes,measurements:e.local.config.realm.authentication.trees.current.nodes.measurements,nodeTypes:e.remote.config.realm.authentication.trees.nodeTypes.list,nodeTypeSchema:e.remote.config.realm.authentication.trees.nodeTypes.schema,nodesInPages:e.local.config.realm.authentication.trees.current.nodes.pages.childnodes,remoteNodes:e.remote.config.realm.authentication.trees.current.tree,selectedNode:n,selectedNodeProperties:a[n.id],selectedNodeSchema:e.remote.config.realm.authentication.trees.nodeTypes.schema[n.type],tree:e.local.config.realm.authentication.trees.list[r]}},function(e){return{addNodeInPage:(0,i.bindActionCreators)(T.add,e),addNodeProperties:(0,i.bindActionCreators)({toRemote:m.addOrUpdate,toLocal:h.addOrUpdate},e),addNodeSchema:(0,i.bindActionCreators)(N.addOrUpdateSchema,e),addNode:(0,i.bindActionCreators)({toRemote:R.addOrUpdateNode,toLocal:C.addOrUpdateNode},e),addOrUpdateConnection:(0,i.bindActionCreators)(C.addOrUpdateConnection,e),handleNodeDeselect:(0,i.bindActionCreators)(w.remove,e),handleNodeDimensionsChange:(0,i.bindActionCreators)(D.updateDimensions,e),handleNodeMove:(0,i.bindActionCreators)(D.updatePosition,e),handleNodeSelect:(0,i.bindActionCreators)(w.set,e),moveNodeToPage:(0,i.bindActionCreators)(P.moveNodeToPage,e),moveNodeToTree:(0,i.bindActionCreators)(P.moveNodeToTree,e),removeConnection:(0,i.bindActionCreators)(C.removeConnection,e),removeCurrentTree:(0,i.bindActionCreators)(P.removeCurrentTree,e),removeNode:(0,i.bindActionCreators)(P.removeNode,e),removeNodeInPage:(0,i.bindActionCreators)(T.remove,e),removeNodePropertiesFromRemote:(0,i.bindActionCreators)(m.remove,e),setNodeDisplayName:(0,i.bindActionCreators)(P.setDisplayName,e),setNodeOutcomes:(0,i.bindActionCreators)(C.setOutcomes,e),setNodes:(0,i.bindActionCreators)({toRemote:R.setNodes,toLocal:C.setNodes},e),setNodeTypes:(0,i.bindActionCreators)(b.set,e),updateTree:(0,i.bindActionCreators)({inRemote:g.addOrUpdate,inLocal:y.addOrUpdate},e)}});Z=(0,Y.default)(Z);t.default=Z},1521:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var a=u(n);var o=r(0);var i=u(o);function u(e){return e&&e.__esModule?e:{default:e}}var s=i.default.shape({params:i.default.array.isRequired});t.default=s},1522:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){var t=function t(r){var n=s.default.currentRoute;var o=s.default.extractParameters(n,l.default.getCurrentFragment());var u=s.default.applyDefaultParameters(n,o);var d={params:a.default.map(u,function(e){if(!e)return"";return decodeURIComponent(e)})};return i.default.createElement(e,a.default.extend({},r,{router:d}))};t.displayName="withRouter("+f(e)+")";t.WrappedComponent=e;return t};var n=r(6);var a=c(n);var o=r(1);var i=c(o);var u=r(73);var s=c(u);var d=r(63);var l=c(d);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return e.displayName||e.name||"Component"}},1527:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(1548);var o=r(1);var i=d(o);var u=r(81);var s=d(u);function d(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){return t.displayName||t.name||"Component"};var c=function e(t){for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];var d=a.connect.apply(void 0,o)(t);var c=function e(t){return i.default.createElement(d,n({},t,{store:s.default}))};c.displayName="connectWithStore("+l(t)+")";c.WrappedComponent=t;return c};t.default=c},1532:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var a=i(n);var o=r(61);function i(e){return e&&e.__esModule?e:{default:e}}var u=function e(){return a.default.createElement("p",{className:"loading text-muted"},a.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-2x fa-fw"}),a.default.createElement("span",null,(0,o.t)("console.common.loading")))};t.default=u},1615:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){var r=[];var n=true;var a=false;var o=void 0;try{for(var i=e[Symbol.iterator](),u;!(n=(u=i.next()).done);n=true){r.push(u.value);if(t&&r.length===t)break}}catch(e){a=true;o=e}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.create=y;t.update=g;t.get=N;t.getAll=b;t.getInitialState=_;t.remove=E;var o=r(6);var i=r(169);var u=f(i);var s=r(27);var d=f(s);var l=r(168);var c=f(l);function f(e){return e&&e.__esModule?e:{default:e}}var p=new u.default(""+d.default.host+d.default.context+"/json");var v="/realm-config/authentication/authenticationtrees/trees";var h={"Accept-API-Version":"protocol=2.0,resource=1.0"};function m(e){var t=function e(t){return(0,o.omitBy)(t,function(e,t){return(0,o.startsWith)(t,"_")})};return a({},t(e),{nodes:(0,o.mapValues)(e.nodes,function(e){return t(e)})})}function y(e,t,r){return p.serviceCall({url:(0,c.default)(v+"/"+r,{realm:e}),type:"PUT",headers:a({},h,{"If-None-Match":"*"}),data:JSON.stringify(m(t)),errorsHandlers:{incorrectRevisionError:{status:412}}})}function g(e,t,r){return p.serviceCall({url:(0,c.default)(v+"/"+r,{realm:e}),type:"PUT",headers:h,data:JSON.stringify(m(t))})}function N(e,t){return p.serviceCall({url:(0,c.default)(v+"/"+t+"?forUI=true",{realm:e}),headers:h})}function b(e){return p.serviceCall({url:(0,c.default)(v+"?_action=getIds",{realm:e}),headers:h,suppressSpinner:true,type:"POST"})}function _(e){var t=p.serviceCall({url:(0,c.default)(v+"?_action=schema",{realm:e}),headers:h,type:"POST"});var r=p.serviceCall({url:(0,c.default)(v+"?_action=template",{realm:e}),headers:h,type:"POST"});return Promise.all([t,r]).then(function(e){var t=n(e,2),r=t[0],a=t[1];return{schema:r,template:a}})}function E(e,t){var r=(0,o.map)(t,function(t){return p.serviceCall({url:(0,c.default)(v+"/"+t,{realm:e}),headers:h,type:"DELETE"})});return Promise.all(r)}},1632:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=t.NEW_NODE_TYPE="EditTreeNodeTypeItem#NEW_NODE_TYPE";var a=t.PAGE_CHILD_NODE_TYPE="EditTreeNodeTypeItem#PAGE_CHILD_NODE_TYPE"},1642:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=r(0);var o=s(a);var i=r(1);var u=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=function e(t){return t%2===1};var a=e.split(new RegExp("("+t+")","gi"));return(0,n.map)(a,function(e,t){return r(t)?u.default.createElement("strong",null,e):e})}var l=function e(t){var r=t.children,n=t.match;return n?u.default.createElement("span",null,d(r,n)):u.default.createElement("span",null,r)};l.propTypes={children:o.default.string.isRequired,match:o.default.string};t.default=l},1658:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=t.TREE_PADDING=20},1674:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=d(n);var o=r(19);var i=d(o);var u=r(63);var s=d(u);function d(e){return e&&e.__esModule?e:{default:e}}function l(){return a.default.compact(s.default.getCurrentFragment().split("/"))}function c(e){return a.default.take(e,2).join("/")}function f(e){return a.default.last(e.split("/"))}function p(e,t){return a.default.drop(e,t)}function v(e,t){var r=0===t?i.default.t("console.navigation."+e+".breadcrumb"):e;return decodeURIComponent(r)}function h(e,t,r){return"#"+r+"/"+a.default.take(e,t+1).join("/")}function m(e,t){return"?"===t?0:1}function y(e){if(!e)throw new Error('[createBreadcrumbs] No "pattern" found.')}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;y(e);var r=l();var n=c(r);var o=p(r,t);var i=["INSTANCE","ACTION","COLLECTION"];var u=0;var s=o.length-1;var d=[];var g=f(e);var N=m(o,g);a.default.forEachRight(o,function(e,t){var r=v(e,t);var a=h(o,t,n);t===s?d.unshift({title:r}):"INSTANCE"===i[N]||t===u?d.unshift({title:r,path:a}):"COLLECTION"===i[N]&&d.unshift({title:r});N=N<i.length-1?N+1:0});return d}},1675:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=r(61);var o=function e(t){return"/"===t?(0,a.t)("console.common.topLevelRealm"):(0,n.last)(t.split("/"))};t.default=o},1694:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(7);var o=f(a);var i=r(1659);var u=f(i);var s=r(0);var d=f(s);var l=r(1);var c=f(l);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){h(t,e);function t(e){p(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleMeasure=r.handleMeasure.bind(r);return r}n(t,[{key:"handleMeasure",value:function e(t){this.props.onMeasure&&this.props.onMeasure(this.props.id,t)}},{key:"render",value:function e(){return c.default.createElement("div",{onMouseDown:this.props.onMouseDown,role:"presentation"},c.default.createElement(u.default,{onMeasure:this.handleMeasure},c.default.createElement("div",{className:(0,o.default)(this.props.className,{"authtree-node":true,"authtree-node-selected":this.props.isSelected}),onMouseUp:this.props.onMouseUp,role:"presentation"},this.props.titleDecoration,c.default.createElement("div",{className:"authtree-node-title"},this.props.node.displayName),this.props.children)))}}]);return t}(l.Component);m.defaultProps={className:""};m.propTypes={children:d.default.node,className:d.default.PropTypes.string,id:d.default.string.isRequired,isSelected:d.default.bool.isRequired,node:d.default.shape({displayName:d.default.string.isRequired}).isRequired,onMeasure:d.default.func,onMouseDown:d.default.func.isRequired,onMouseUp:d.default.func,titleDecoration:d.default.node};t.default=m},1695:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(570);var o=r(6);var i=r(1877);var u=E(i);var s=r(0);var d=E(s);var l=r(1);var c=E(l);var f=r(7);var p=E(f);var v=r(1876);var h=E(v);var m=r(1875);var y=E(m);var g=r(1658);var N=r(1694);var b=E(N);var _=r(115);function E(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=function(e){P(t,e);function t(e){O(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleDrag=r.handleDrag.bind(r);r.handleDragStop=r.handleDragStop.bind(r);r.handleNodeMouseDown=r.handleNodeMouseDown.bind(r);r.handleNodeMouseUp=r.handleNodeMouseUp.bind(r);r.handleOutcomeMouseDown=r.handleOutcomeMouseDown.bind(r);r.handleOutcomeMouseUp=r.handleOutcomeMouseUp.bind(r);r.isStartNode=r.isStartNode.bind(r);return r}n(t,[{key:"handleDrag",value:function e(t,r){var n=r.x,a=r.y;this.props.onDrag(this.props.id,n,a,n+t.offsetX,a+t.offsetY)}},{key:"handleDragStop",value:function e(t,r){var n=r.x,a=r.y;this.props.onDragStop(this.props.id,n,a,n+t.offsetX,a+t.offsetY)}},{key:"handleNodeMouseDown",value:function e(){var t=this.isStartNode()?null:this.props.id;this.props.onSelect(t,this.props.node.nodeType)}},{key:"handleNodeMouseUp",value:function e(){this.isStartNode()||this.props.onConnectionFinish(this.props.id)}},{key:"handleOutcomeMouseDown",value:function e(t,r){t.stopPropagation();this.props.onConnectionStart(this.props.id,t,r)}},{key:"handleOutcomeMouseUp",value:function e(t){t.stopPropagation()}},{key:"isStartNode",value:function e(){return this.props.id===(0,o.findKey)((0,_.start)())}},{key:"render",value:function e(){var t=this;var r=this.props.node._outcomes;var n="";var i="";if(1===r.length){var s=r[0].id;n=c.default.createElement("div",{className:"pull-right"},c.default.createElement(h.default,{id:s,isConnected:(0,o.has)(this.props.node.connections,s),name:r[0].displayName,onMouseDown:this.handleOutcomeMouseDown,onMouseUp:this.handleOutcomeMouseUp}))}else r.length>1&&(i=c.default.createElement(a.Clearfix,{className:"authtree-node-outcomes"},c.default.createElement("ul",{className:"pull-right"},(0,o.map)(r,function(e){var r=e.id,n=e.displayName;return c.default.createElement(y.default,{id:r,isConnected:(0,o.has)(t.props.node.connections,r),key:r,name:n,onMouseDown:t.handleOutcomeMouseDown,onMouseUp:t.handleOutcomeMouseUp})}))));var d=(0,o.size)(this.props.node.connections)===(0,o.size)(this.props.node._outcomes);return c.default.createElement(u.default,{bounds:{top:g.TREE_PADDING,left:g.TREE_PADDING},onDrag:this.handleDrag,onMouseDown:this.handleNodeMouseDown,onStop:this.handleDragStop,position:{x:this.props.x,y:this.props.y}},c.default.createElement("div",{id:"node-"+this.props.id},c.default.createElement(b.default,{className:(0,p.default)({"authtree-node-has-input":!this.isStartNode(),"authtree-node-has-input-invalid":!this.props.isInputConnected,"authtree-node-invalid":!this.isStartNode()&&!this.props.isInputConnected||!d}),id:this.props.id,isSelected:this.props.isSelected,node:this.props.node,onMeasure:this.props.onMeasure,onMouseDown:this.handleNodeMouseDown,onMouseUp:this.handleNodeMouseUp,titleDecoration:n},this.props.children,i)))}}]);return t}(l.Component);R.propTypes={children:d.default.node,id:d.default.string.isRequired,isInputConnected:d.default.bool.isRequired,isSelected:d.default.bool.isRequired,node:d.default.shape({_outcomes:d.default.arrayOf(d.default.shape({id:d.default.string.isRequired,displayName:d.default.string.isRequired})).isRequired,connections:d.default.objectOf(d.default.objectOf(d.default.string)).isRequired,displayName:d.default.string.isRequired,nodeType:d.default.string.isRequired}).isRequired,onConnectionFinish:d.default.func.isRequired,onConnectionStart:d.default.func.isRequired,onDrag:d.default.func.isRequired,onDragStop:d.default.func.isRequired,onMeasure:d.default.func.isRequired,onSelect:d.default.func.isRequired,x:d.default.number,y:d.default.number};t.default=R},1720:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getNodeYPosition=t.getNodeXPosition=t.getColumnHeights=t.HORIZONTAL_NODE_MARGIN=t.VERTICAL_NODE_MARGIN=void 0;var n=r(6);var a=t.VERTICAL_NODE_MARGIN=25;var o=t.HORIZONTAL_NODE_MARGIN=50;var i=t.getColumnHeights=function e(t,r){return(0,n.map)(t,function(e){return(0,n.reduce)(e,function(e,t){return e+r[(0,n.findKey)(t)].height+a},a)})};var u=function e(t,r){return(0,n.map)(t,function(e){return(0,n.reduce)(e,function(e,t){return r[(0,n.findKey)(t)].width+o>e?r[(0,n.findKey)(t)].width+o:e},o)})};var s=function e(t,r,a){var o=i(t,a);return((0,n.max)(o)-o[r])/2};var d=t.getNodeXPosition=function e(t,r,a){var i=t.slice(0,r);var s=u(i,a);var d=(0,n.reduce)(s,function(e,t){return e+t},o);return d};var l=t.getNodeYPosition=function e(t,r,o,i){var u=t[r];var d=u.slice(0,o);var l=(0,n.reduce)(d,function(e,t){return e+i[(0,n.findKey)(t)].height+a},a);var c=s(t,r,i);return c+l}},1872:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1614);var a=r(0);var o=c(a);var i=r(1);var u=c(i);var s=r(1632);var d=r(1694);var l=c(d);function c(e){return e&&e.__esModule?e:{default:e}}var f=function e(t){var r=t.node,n=t.isDragging,a=t.isSelected,o=t.connectDragSource,i=t.onMouseDown;return n?"":o(u.default.createElement("div",{className:"page-list-child",id:"node-"+r._id},u.default.createElement(l.default,{id:r._id,isInPage:true,isSelected:a,key:r._id,node:r,onMouseDown:i})))};f.propTypes={connectDragSource:o.default.func.isRequired,isDragging:o.default.bool.isRequired,isSelected:o.default.bool.isRequired,node:o.default.shape({_id:o.default.string.isRequired}).isRequired,onMouseDown:o.default.func.isRequired,pageId:o.default.string.isRequired};var p={beginDrag:function e(t){return{nodeId:t.node._id,pageId:t.pageId}}};var v=function e(t,r){return{connectDragSource:t.dragSource(),isDragging:r.isDragging()}};t.default=(0,n.DragSource)(s.PAGE_CHILD_NODE_TYPE,p,v)(f)},1873:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(570);var i=r(1614);var u=r(1659);var s=D(u);var d=r(0);var l=D(d);var c=r(1);var f=D(c);var p=r(7);var v=D(p);var h=r(6);var m=r(61);var y=r(115);var g=r(1632);var N=r(1872);var b=D(N);var _=r(195);var E=r(194);var O=r(280);var C=r(560);var P=D(C);var R=r(81);var w=D(R);function D(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function M(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var q=function(e){M(t,e);function t(e){T(this,t);var r=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleMeasure=r.handleMeasure.bind(r);return r}a(t,[{key:"componentDidUpdate",value:function e(){var t=this.props.pageNodeLeft-this.props.pageNodeX;var r=this.props.pageNodeTop-this.props.pageNodeY;var n={height:this.state.height,width:this.state.width,x:this.state.left-t,y:this.state.top-r};w.default.dispatch((0,O.add)(this.props.id,n))}},{key:"handleAddNode",value:function e(t){if(this.props.numberOutcomes>1)P.default.addMessage({message:(0,m.t)("console.authentication.trees.edit.nodes.pages.alreadyComplete"),type:P.default.TYPE_DANGER});else{var r=this.props.onNewNodeCreate(t);var a=(0,h.cloneDeep)(this.props.pageConfig);a.nodes.push(n({},t,{_id:r}));w.default.dispatch((0,E.addOrUpdate)(a));w.default.dispatch((0,_.add)(r,this.props.id));this.props.onNodePropertiesChange(this.props.id,y.PAGE_NODE_TYPE,a)}}},{key:"handleMeasure",value:function e(t){(0,h.isEqual)(t,this.state)||this.setState(t)}},{key:"handleMoveNodeToPage",value:function e(t){var r=t.nodeId,n=t.pageId;if(n===this.props.id)return;w.default.dispatch((0,_.add)(r,n));var a=(0,h.cloneDeep)(this.props.pageConfig);this.props.onNodePropertiesChange(this.props.id,y.PAGE_NODE_TYPE,a)}},{key:"isDraggingNodeOver",value:function e(t){if(!t)return false;var r=[y.FAILURE_NODE_ID,y.START_NODE_ID,y.SUCCESS_NODE_ID];var n=[y.INNER_TREE_NODE_TYPE,y.PAGE_NODE_TYPE];if((0,h.includes)(r,t.id)||(0,h.includes)(n,t.type))return false;var a=w.default.getState().local.config.realm.authentication.trees.current.nodes.pages.positions;var o=a[this.props.id];return t.mouseX>o.x&&t.mouseX<o.x+o.width&&t.mouseY>o.y&&t.mouseY<o.y+o.height}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.canDrop,a=r.connectDropTarget,i=r.draggingNode,u=r.id,d=r.isDragAndDropOver,l=r.pageConfig,c=r.onNodeSelect;var p=d&&n||this.isDraggingNodeOver(i);var h=function e(t,r){return function(e){e.stopPropagation();c(t,r)}};var y=l.nodes.map(function(e){return f.default.createElement(b.default,{isSelected:e._id===t.props.selectedNodeId,key:e._id,node:e,onMouseDown:h(e._id,e.nodeType),pageId:u})});0===l.nodes.length&&y.push(f.default.createElement("small",null,(0,m.t)("console.authentication.trees.edit.nodes.pages.noNodes")));return a(f.default.createElement("div",null,f.default.createElement(s.default,{onMeasure:this.handleMeasure},f.default.createElement(o.Clearfix,{className:(0,v.default)({"authtree-page-nodes":true,"authtree-page-nodes-drag-hover":p})},y))))}}]);return t}(c.Component);q.propTypes={canDrop:l.default.bool.isRequired,connectDropTarget:l.default.func.isRequired,draggingNode:l.default.shape({id:l.default.string.isRequired,type:l.default.string.isRequired,mouseX:l.default.number.isRequired,mouseY:l.default.number.isRequired}),id:l.default.string.isRequired,isDragAndDropOver:l.default.bool.isRequired,numberOutcomes:l.default.number.isRequired,onNewNodeCreate:l.default.func.isRequired,onNodePropertiesChange:l.default.func.isRequired,onNodeSelect:l.default.func.isRequired,pageConfig:l.default.shape({nodes:l.default.arrayOf(l.default.shape({_id:l.default.string.isRequired})).isRequired}),pageNodeLeft:l.default.number.isRequired,pageNodeTop:l.default.number.isRequired,pageNodeX:l.default.number.isRequired,pageNodeY:l.default.number.isRequired,selectedNodeId:l.default.string.isRequired};var I={drop:function e(t,r,n){r.getItemType()===g.NEW_NODE_TYPE?n.handleAddNode(r.getItem()):n.handleMoveNodeToPage(r.getItem())},canDrop:function e(t,r){var n=r.getItem().nodeType;var a=r.getItemType();var o=[y.FAILURE_NODE_TYPE,y.PAGE_NODE_TYPE,y.INNER_TREE_NODE_TYPE,y.SUCCESS_NODE_TYPE];return a===g.PAGE_CHILD_NODE_TYPE||!(0,h.includes)(o,n)}};function j(e,t){return{connectDropTarget:e.dropTarget(),isDragAndDropOver:t.isOver(),canDrop:t.canDrop()}}t.default=(0,i.DropTarget)([g.NEW_NODE_TYPE,g.PAGE_CHILD_NODE_TYPE],I,j)(q)},1874:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(1);var o=f(a);var i=r(1695);var u=f(i);var s=r(1873);var d=f(s);var l=r(0);var c=f(l);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){h(t,e);function t(e){p(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleMeasure=r.handleMeasure.bind(r);r.state={left:0,top:0};return r}n(t,[{key:"handleMeasure",value:function e(t,r){this.props.onMeasure(t,r);this.setState(r)}},{key:"render",value:function e(){var t=this.props,r=t.draggingNode,n=t.id,a=t.isInputConnected,i=t.isSelected,s=t.node,l=t.onConnectionFinish,c=t.onConnectionStart,f=t.onDrag,p=t.onDragStop,v=t.onNewNodeCreate,h=t.onNodePropertiesChange,m=t.onSelect,y=t.pageConfig,g=t.selectedNodeId,N=t.x,b=t.y;return o.default.createElement(u.default,{id:n,isInputConnected:a,isSelected:i,key:n,node:s,onConnectionFinish:l,onConnectionStart:c,onDrag:f,onDragStop:p,onMeasure:this.handleMeasure,onSelect:m,x:N,y:b},o.default.createElement(d.default,{draggingNode:r,id:n,localNodeProperties:this.props.localNodeProperties,numberOutcomes:s._outcomes.length,onConnectionFinish:l,onNewNodeCreate:v,onNodePropertiesChange:h,onNodeSelect:m,pageConfig:y,pageNodeLeft:this.state.left||0,pageNodeTop:this.state.top||0,pageNodeX:N,pageNodeY:b,selectedNodeId:g}))}}]);return t}(a.Component);m.propTypes={draggingNode:c.default.shape({id:c.default.string.isRequired}),id:c.default.string.isRequired,isInputConnected:c.default.bool.isRequired,isSelected:c.default.bool.isRequired,localNodeProperties:c.default.objectOf(c.default.object).isRequired,node:c.default.shape({_outcomes:c.default.array.isRequired}).isRequired,onConnectionFinish:c.default.func.isRequired,onConnectionStart:c.default.func.isRequired,onDrag:c.default.func.isRequired,onDragStop:c.default.func.isRequired,onMeasure:c.default.func.isRequired,onNewNodeCreate:c.default.func.isRequired,onNodePropertiesChange:c.default.func.isRequired,onSelect:c.default.func.isRequired,pageConfig:c.default.shape({nodes:c.default.arrayOf(c.default.shape({_id:c.default.string.isRequired})).isRequired}),selectedNodeId:c.default.string.isRequired,x:c.default.number,y:c.default.number};t.default=m},1875:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(6);var o=r(7);var i=c(o);var u=r(0);var s=c(u);var d=r(1);var l=c(d);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){v(t,e);function t(e){f(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleMouseDown=r.handleMouseDown.bind(r);return r}n(t,[{key:"handleMouseDown",value:function e(t){this.props.onMouseDown(t,this.props.id)}},{key:"render",value:function e(){var t=(0,a.uniqueId)("outcome-"+this.props.id);return l.default.createElement("li",{className:(0,i.default)({"authtree-outcome":true,"authtree-multi-outcome":true,"authtree-outcome-invalid":!this.props.isConnected}),id:t,onMouseDown:this.handleMouseDown,onMouseUp:this.props.onMouseUp,role:"presentation"},l.default.createElement("label",{htmlFor:t},this.props.name))}}]);return t}(d.Component);h.propTypes={id:s.default.string.isRequired,isConnected:s.default.bool.isRequired,name:s.default.string.isRequired,onMouseDown:s.default.func.isRequired,onMouseUp:s.default.func.isRequired};t.default=h},1876:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(6);var o=r(7);var i=c(o);var u=r(0);var s=c(u);var d=r(1);var l=c(d);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){v(t,e);function t(e){f(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleMouseDown=r.handleMouseDown.bind(r);return r}n(t,[{key:"handleMouseDown",value:function e(t){this.props.onMouseDown(t,this.props.id)}},{key:"render",value:function e(){var t=(0,a.uniqueId)("outcome-"+this.props.id);return l.default.createElement("div",null,l.default.createElement("label",{className:"sr-only",htmlFor:t},this.props.name),l.default.createElement("div",{className:(0,i.default)({"authtree-outcome":true,"authtree-outcome-invalid":!this.props.isConnected}),id:t,onMouseDown:this.handleMouseDown,onMouseUp:this.props.onMouseUp,role:"presentation"}))}}]);return t}(d.Component);h.propTypes={id:s.default.string.isRequired,isConnected:s.default.bool.isRequired,name:s.default.string.isRequired,onMouseDown:s.default.func.isRequired,onMouseUp:s.default.func.isRequired};t.default=h},1878:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(1);var o=l(a);var i=r(1695);var u=l(i);var s=r(1874);var d=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,a,o){return n({id:e,isInputConnected:a,isSelected:e===o.selectedNodeId,key:e,node:t,onConnectionFinish:o.onConnectionFinish,onConnectionStart:o.onConnectionStart,onDrag:o.onDrag,onDragStop:o.onDragStop,onMeasure:o.onMeasure,onSelect:o.onNodeSelect},r)}t.default={createNode:function e(t,r,n,a,i){return o.default.createElement(u.default,c(t,r,n,a,i))},createPageNode:function e(t,r,a,i,u){var s=n({},c(t,r,a,i,u),{draggingNode:u.draggingNode,localNodeProperties:u.localNodeProperties,nodesInPages:u.nodesInPages,onNewNodeCreate:u.onNewNodeCreate,onNodePropertiesChange:u.onNodePropertiesChange,pageConfig:u.localNodeProperties[t]||{nodes:[]},selectedNodeId:u.selectedNodeId});return o.default.createElement(d.default,s)}}},1879:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(7);var a=d(n);var o=r(0);var i=d(o);var u=r(1);var s=d(u);function d(e){return e&&e.__esModule?e:{default:e}}var l=50;var c=150;var f=function e(t){var r=t.start,n=t.startCp,a=t.center,o=t.endCp,i=t.end;var u=a?a.x+" "+a.y+" , "+a.x+" "+a.y+" S":"";var s="M"+r.x+" "+r.y+" C"+n.x+" "+n.y+", ";var d=o.x+" "+o.y+", "+i.x+" "+i.y;return""+s+u+d};var p=function e(t,r){var n=.2;var a=l;Math.abs(t.y-r.y)<l&&(a=Math.abs(t.y-r.y));var o=Math.abs((t.x-r.x)*n);return o<a?a:o};var v=function e(t,r){var n=(t.height+t.width)/2||0;var a=p(t,r);var o={x:t.x+a,y:t.y+n};var i={x:r.x-a,y:r.y+l};return f({start:t,startCp:o,endCp:i,end:r})};var h=function e(t,r){var n=p(t,r);var a={x:t.x-(t.x-r.x)/2,y:t.y-(t.y-r.y)/2};var o={x:t.x+n,y:t.y};var i={x:r.x-n,y:r.y};return f({start:t,startCp:o,center:a,endCp:i,end:r})};var m=function e(t){var r=t.end,n=t.isNew,o=t.start,i=t.isInputForSelectedNode,u=t.isOutputForSelectedNode;var d=Math.abs(o.y-r.y)<c;var l=r.x+o.width<=o.x;var f=l&&d?v(o,r):h(o,r);return s.default.createElement("path",{className:(0,a.default)({"authtree-connector":true,"authtree-connector-new":n,"authtree-connector-selected-node-input":i,"authtree-connector-selected-node-output":u}),d:f,id:r.id?"connection-"+o.id+"-"+r.id:"connection-"+o.id})};m.propTypes={end:i.default.shape({id:i.default.string,height:i.default.number.isRequired,width:i.default.number.isRequired,x:i.default.number.isRequired,y:i.default.number.isRequired}).isRequired,isInputForSelectedNode:i.default.bool.isRequired,isNew:i.default.bool.isRequired,isOutputForSelectedNode:i.default.bool.isRequired,start:i.default.shape({id:i.default.string.isRequired,x:i.default.number.isRequired,y:i.default.number.isRequired}).isRequired};t.default=m},1880:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(6);var i=r(1614);var u=r(7);var s=N(u);var d=r(0);var l=N(d);var c=r(1);var f=N(c);var p=r(1879);var v=N(p);var h=r(1632);var m=r(1878);var y=N(m);var g=r(1658);function N(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=22;var C=22;var P=17;var R=-2;var w=function e(t){return{x:t.x,y:t.y+O}};var D=function e(t,r,n){var a=t.width||0;var i=(0,o.findIndex)(r,{id:n});var u=t.x+a;var s=(0,o.size)(r);var d=s-i;var l=1===s?t.y+C:t.y+t.height-(R+P*d);return{x:u,y:l}};var T=function e(t,r){var n=r.getBoundingClientRect();return{x:t.clientX+r.scrollLeft-n.left,y:t.clientY+r.scrollTop-n.top}};var S=function(e){E(t,e);function t(e){b(this,t);var r=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={newConnectionFromNodeId:null};r.handleConnectionFinish=r.handleConnectionFinish.bind(r);r.handleConnectionStart=r.handleConnectionStart.bind(r);r.handleNewConnectionFinish=r.handleNewConnectionFinish.bind(r);r.handleNewConnectionMove=r.handleNewConnectionMove.bind(r);r.handleSvgClick=r.handleSvgClick.bind(r);r.setRef=r.setRef.bind(r);return r}a(t,[{key:"componentWillUnmount",value:function e(){var t=this.domNode.ownerDocument;t.removeEventListener("mousemove",this.handleNewConnectionMove);t.removeEventListener("mouseup",this.handleNewConnectionFinish)}},{key:"handleConnectionStart",value:function e(t,r,n){var a=this.domNode;var o=T(r,a);var i=a.ownerDocument;i.addEventListener("mousemove",this.handleNewConnectionMove);i.addEventListener("mouseup",this.handleNewConnectionFinish);this.setState({newConnectionFromNodeId:t,newConnectionFromOutcome:n,newConnectionEndX:o.x,newConnectionEndY:o.y})}},{key:"handleNewConnectionMove",value:function e(t){var r=T(t,this.domNode);this.setState({newConnectionEndX:r.x,newConnectionEndY:r.y})}},{key:"handleNewConnectionFinish",value:function e(){var t=this.domNode.ownerDocument;t.removeEventListener("mousemove",this.handleNewConnectionMove);t.removeEventListener("mouseup",this.handleNewConnectionFinish);this.setState({newConnectionFromNodeId:null})}},{key:"handleConnectionFinish",value:function e(t){null!==this.state.newConnectionFromNodeId&&this.props.onNewConnection(this.state.newConnectionFromNodeId,this.state.newConnectionFromOutcome,t)}},{key:"handleSvgClick",value:function e(){this.props.onNodeDeselect()}},{key:"setRef",value:function e(t){this.domNode=t}},{key:"render",value:function e(){var t=this;var r=function e(r,n,a,o,i){t.setState({draggingNodeId:r,draggingNodeX:n,draggingNodeY:a,mouseX:o,mouseY:i})};var a=function e(r,n,a,i,u){t.setState({draggingNodeId:null});t.props.onNodeMove(r,(0,o.round)(n),(0,o.round)(a),(0,o.round)(i),(0,o.round)(u))};var i=function e(r,n){return t.props.onNodeDimensionsChange(r,n.height,n.width)};var u=(0,o.mapValues)(this.props.measurements,function(e){return e.id===t.state.draggingNodeId?n({},e,{x:t.state.draggingNodeX,y:t.state.draggingNodeY}):e});var d=(0,o.reduce)((0,o.map)(this.props.nodes,"connections"),function(e,t){return(0,o.union)(e,(0,o.values)(t))},[]);var l=(0,o.map)((0,o.omit)(this.props.nodes,(0,o.keys)(this.props.nodesInPages)),function(e,n){var s=t.props.localNodeProperties[t.state.draggingNodeId];var l=(0,o.get)(s,"_type._id");var c=u[n];var f=y.default["create"+e.nodeType]||y.default.createNode;return f(n,e,c||{x:0,y:0},(0,o.includes)(d,n),{draggingNode:t.state.draggingNodeId&&{id:t.state.draggingNodeId,mouseX:t.state.mouseX,mouseY:t.state.mouseY,type:l,x:t.state.draggingNodeX,y:t.state.draggingNodeY},localNodeProperties:t.props.localNodeProperties,nodesInPages:t.props.nodesInPages,onConnectionFinish:t.handleConnectionFinish,onConnectionStart:t.handleConnectionStart,onDrag:r,onDragStop:a,onMeasure:i,onNewNodeCreate:t.props.onNewNodeCreate,onNodePropertiesChange:t.props.onNodePropertiesChange,onNodeSelect:t.props.onNodeSelect,selectedNodeId:t.props.selectedNodeId})});var c=(0,o.chain)(this.props.nodes).map(function(e,r){var a=t.props.nodes[r].connections;var i=t.props.nodes[r]._outcomes;return(0,o.map)(a,function(e,a){var o=u[r];var s=u[e];if(o&&s){var d=n({id:r,width:o.width,height:o.height},D(o,i,a));var l=n({id:e},w(s));return f.default.createElement(v.default,{end:l,isInputForSelectedNode:t.props.selectedNodeId===e,isOutputForSelectedNode:t.props.selectedNodeId===r,start:d})}return null})}).flatten().value();if(null!==this.state.newConnectionFromNodeId){var p=this.props.measurements[this.state.newConnectionFromNodeId];var h=this.props.nodes[this.state.newConnectionFromNodeId]._outcomes;var m=n({id:this.state.newConnectionFromNodeId,width:p.width,height:p.height},D(p,h,this.state.newConnectionFromOutcome));var g={x:this.state.newConnectionEndX,y:this.state.newConnectionEndY};c.push(f.default.createElement(v.default,{end:g,isNew:true,key:c.length+1,start:m}))}return this.props.connectDropTarget(f.default.createElement("div",{className:(0,s.default)({"authtree-editor-container":true,"authtree-editor-container-dragging-connector":null!==this.state.newConnectionFromNodeId}),style:{height:this.props.containerHeight}},f.default.createElement("div",{className:"authtree-editor",ref:this.setRef},l,f.default.createElement("svg",{className:"authtree-editor-svg",onClick:this.handleSvgClick,style:{height:this.props.canvasHeight,width:this.props.canvasWidth}},c))))}}]);return t}(c.Component);S.propTypes={canvasHeight:l.default.number.isRequired,canvasWidth:l.default.number.isRequired,connectDropTarget:l.default.func.isRequired,containerHeight:l.default.number.isRequired,localNodeProperties:l.default.objectOf(l.default.shape({_type:l.default.shape({_id:l.default.string}),nodes:l.default.arrayOf(l.default.string)})).isRequired,measurements:l.default.objectOf(l.default.shape({_id:l.default.string.isRequired,height:l.default.number.isRequired,width:l.default.number.isRequired,x:l.default.number.isRequired,y:l.default.number.isRequired})),nodes:l.default.objectOf(l.default.shape({_outcomes:l.default.arrayOf(l.default.shape({id:l.default.string.isRequired,displayName:l.default.string.isRequired})).isRequired,connections:l.default.objectOf(l.default.objectOf(l.default.string)).isRequired})).isRequired,nodesInPages:l.default.objectOf(l.default.string).isRequired,onNewConnection:l.default.func.isRequired,onNewNodeCreate:l.default.func.isRequired,onNodeDeselect:l.default.func.isRequired,onNodeDimensionsChange:l.default.func.isRequired,onNodeMove:l.default.func.isRequired,onNodePropertiesChange:l.default.func.isRequired,onNodeSelect:l.default.func.isRequired,selectedNodeId:l.default.string.isRequired};var M={drop:function e(t,r,n){if(r.didDrop())return;var a=n.domNode.getBoundingClientRect();var i=15;var u={x:r.getInitialClientOffset().x-r.getInitialSourceClientOffset().x,y:r.getInitialClientOffset().y-r.getInitialSourceClientOffset().y};var s={x:r.getClientOffset().x-a.left-u.x+i,y:r.getClientOffset().y-a.top-u.y};s.x=(0,o.max)([s.x,g.TREE_PADDING]);s.y=(0,o.max)([s.y,g.TREE_PADDING]);r.getItemType()===h.NEW_NODE_TYPE?t.onNewNodeCreate(r.getItem(),s):t.onNodeMove(r.getItem().nodeId,s.x,s.y,s.x+u.x,s.y+u.y)}};function q(e){return{connectDropTarget:e.dropTarget()}}t.default=(0,i.DropTarget)([h.NEW_NODE_TYPE,h.PAGE_CHILD_NODE_TYPE],M,q)(S)},1881:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var a=p(n);var o=r(1675);var i=p(o);var u=r(73);var s=p(u);var d=r(1522);var l=p(d);var c=r(1521);var f=p(c);function p(e){return e&&e.__esModule?e:{default:e}}var v=function e(t){var r=t.router;var n=r.params[0];var o=(0,i.default)(n);var u="#"+s.default.getLink(s.default.configuration.routes.realmDefault,[encodeURIComponent(n)]);return a.default.createElement("span",null,a.default.createElement("i",{className:"fa fa-cloud"})," ",a.default.createElement("a",{href:u},o))};v.propTypes={router:f.default};t.default=(0,l.default)(v)},1882:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=r(0);var o=f(a);var i=r(1);var u=f(i);var s=r(1674);var d=f(s);var l=r(73);var c=f(l);function f(e){return e&&e.__esModule?e:{default:e}}var p=function e(t){var r=t.numOfDroppedFragments;var a=(0,d.default)(c.default.currentRoute.pattern,r);return a?u.default.createElement("ol",{className:"breadcrumb"},(0,n.map)(a,function(e){var t=e.path,r=e.title;return t?u.default.createElement("li",null,u.default.createElement("a",{href:t},r)):u.default.createElement("li",null,r)})):null};p.propTypes={numOfDroppedFragments:o.default.Number};t.default=p},1883:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(570);var a=r(0);var o=l(a);var i=r(1);var u=l(i);var s=r(1882);var d=l(s);function l(e){return e&&e.__esModule?e:{default:e}}var c=function e(t){var r=t.children,a=t.fluid;return u.default.createElement("div",{className:"subnav-container"},u.default.createElement(n.Grid,{fluid:a},u.default.createElement(n.Row,null,u.default.createElement("nav",{className:"navbar navbar-default"},u.default.createElement(n.Col,{className:"navbar-header",lg:2,md:3,sm:3,xs:4},u.default.createElement("div",{className:"ellipsis"},u.default.createElement("strong",null,r))),u.default.createElement(n.Col,{className:"ellipsis",lg:10,md:9,sm:9,xs:8},u.default.createElement(d.default,null))))))};c.propTypes={children:o.default.node,fluid:o.default.boolean};t.default=c},1884:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(7);var o=l(a);var i=r(0);var u=l(i);var s=r(1);var d=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}var f=function e(t){var r=t.className,a=t.isFullscreen,i=c(t,["className","isFullscreen"]);return d.default.createElement("div",n({},i,{className:(0,o.default)(r,{fullscreen:a})}))};f.propTypes={className:u.default.string,isFullscreen:u.default.bool.isRequired};t.default=f},1885:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(570);var a=r(0);var o=s(a);var i=r(1);var u=s(i);function s(e){return e&&e.__esModule?e:{default:e}}var d=function e(t){var r=t.children,a=t.placement,o=t.tooltip;var i=u.default.createElement(n.Tooltip,null,o);return u.default.createElement(n.OverlayTrigger,{delayShow:500,overlay:i,placement:a,rootClose:true},r)};d.propTypes={children:o.default.node,placement:o.default.oneOf(["bottom","top"]).isRequired,tooltip:o.default.string.isRequired};t.default=d},1886:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var i=function e(){return a.default.createElement("div",{className:"authtree-btn-toolbar-divider"})};t.default=i},1887:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(570);var o=r(7);var i=c(o);var u=r(0);var s=c(u);var d=r(1);var l=c(d);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}var p=function e(t){var r=t.className,o=t.title,u=f(t,["className","title"]);return l.default.createElement(a.Button,n({},u,{className:(0,i.default)(r,{"fr-btn-secondary":true}),"data-title":o}))};p.propTypes={className:s.default.string,title:s.default.string};t.default=p},1888:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(570);var a=r(61);var o=r(0);var i=h(o);var u=r(1);var s=h(u);var d=r(1887);var l=h(d);var c=r(1886);var f=h(c);var p=r(1885);var v=h(p);function h(e){return e&&e.__esModule?e:{default:e}}var m=function e(t){var r=t.invertTooltipPlacement,o=t.isDeleteNodeEnabled,i=t.onAutoLayout,u=t.onFullscreenToggle,d=t.onNodeDelete,c=t.onTreeSave;var p=r?"bottom":"top";var h=(0,a.t)("console.authentication.trees.edit.toolbar.autoLayout");var m=(0,a.t)("console.authentication.trees.edit.toolbar.fullscreen");var y=(0,a.t)("console.authentication.trees.edit.toolbar.deleteNode");return s.default.createElement(n.ButtonToolbar,{className:"authtree-btn-toolbar"},s.default.createElement(v.default,{placement:p,tooltip:h},s.default.createElement(l.default,{onClick:i,title:h},s.default.createElement("i",{className:"fa fa-sitemap fa-rotate-270"}))),s.default.createElement(v.default,{placement:p,tooltip:m},s.default.createElement(l.default,{onClick:u,title:m},s.default.createElement("i",{className:"fa fa-arrows-alt"}))),s.default.createElement(f.default,null),s.default.createElement(v.default,{placement:p,tooltip:y},s.default.createElement(l.default,{disabled:!o,onClick:d,title:y},s.default.createElement("i",{className:"fa fa-trash"}))),s.default.createElement(n.Button,{bsStyle:"primary",className:"pull-right",onClick:c},(0,a.t)("common.form.save")))};m.propTypes={invertTooltipPlacement:i.default.bool.isRequired,isDeleteNodeEnabled:i.default.bool.isRequired,onAutoLayout:i.default.func.isRequired,onFullscreenToggle:i.default.func.isRequired,onNodeDelete:i.default.func.isRequired,onTreeSave:i.default.func.isRequired};t.default=m},1889:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(570);var o=r(61);var i=r(6);var u=r(0);var s=c(u);var d=r(1);var l=c(d);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){v(t,e);function t(e){f(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleDisplayNameChange=r.handleDisplayNameChange.bind(r);return r}n(t,[{key:"handleDisplayNameChange",value:function e(t){this.props.onDisplayNameChange(this.props.nodeId,t.target.value)}},{key:"render",value:function e(){var t=!(0,i.isEmpty)(this.props.nodeName);return l.default.createElement(a.Form,null,l.default.createElement(a.FormGroup,{controlId:(0,i.uniqueId)("nodeDisplayName"),validationState:t?null:"error"},l.default.createElement(a.ControlLabel,null,(0,o.t)("console.authentication.trees.edit.nodes.selectedNode.nodeName")),l.default.createElement(a.FormControl,{onBlur:this.handleDisplayNameChange,onChange:this.handleDisplayNameChange,type:"text",value:this.props.nodeName})))}}]);return t}(d.Component);h.propTypes={nodeId:s.default.string,nodeName:s.default.string,onDisplayNameChange:s.default.func.isRequired};t.default=h},1890:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(570);var o=r(6);var i=r(61);var u=r(7);var s=y(u);var d=r(0);var l=y(d);var c=r(1);var f=y(c);var p=r(870);var v=y(p);var h=r(1889);var m=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){b(t,e);function t(e){g(this,t);var r=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleChange=r.handleChange.bind(r);r.handleSubmit=r.handleSubmit.bind(r);return r}n(t,[{key:"handleChange",value:function e(t){var r=t.formData;this.props.onFieldChange(r);this.props.onPropertiesChange(this.props.nodeId,this.props.nodeType,r)}},{key:"handleSubmit",value:function e(){this.props.onPropertiesChange(this.props.nodeId,this.props.nodeType,this.props.properties)}},{key:"render",value:function e(){var t=void 0;var r=void 0;var n=void 0;var u=(0,o.get)(this.props.properties,"_type.name");if(this.props.isExpanded&&u){t=f.default.createElement("h4",{className:"authtree-content-side-title text-primary"},u);r=f.default.createElement(m.default,{nodeId:this.props.nodeId,nodeName:this.props.nodeName,onDisplayNameChange:this.props.onDisplayNameChange});n=(0,o.has)(this.props.schema,"properties")?f.default.createElement("span",null,f.default.createElement("hr",null),f.default.createElement(v.default,{alwaysValidate:true,formData:this.props.properties,onChange:this.handleChange,onSubmit:this.handleSubmit,schema:this.props.schema,validationMode:this.props.isNew?"create":"edit"})):f.default.createElement(a.Alert,{bsStyle:"info"},f.default.createElement("p",null,(0,i.t)("console.authentication.trees.edit.nodes.properties.noProperties")))}return f.default.createElement("div",{className:(0,s.default)({"authtree-content-side":true,"authtree-content-right":true,expanded:!!this.props.isExpanded})},t,r,n)}}]);return t}(c.Component);_.propTypes={isExpanded:l.default.bool.isRequired,isNew:l.default.bool.isRequired,nodeId:l.default.string,nodeName:l.default.string,nodeType:l.default.string,onDisplayNameChange:l.default.func.isRequired,onFieldChange:l.default.func.isRequired,onPropertiesChange:l.default.func.isRequired,properties:l.default.objectOf(l.default.any),schema:l.default.objectOf(l.default.any)};t.default=_},1891:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(570);var a=r(61);var o=r(0);var i=d(o);var u=r(1);var s=d(u);function d(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){var r=t.filter,o=t.onChange,i=t.onClear;return s.default.createElement(n.FormGroup,{className:"authtree-content-left-filter",controlId:"authtreeContentLeftFilter"},s.default.createElement(n.ControlLabel,{srOnly:true},(0,a.t)("console.authentication.trees.edit.nodes.nodeTypes.label")),s.default.createElement(n.InputGroup,null,s.default.createElement(n.FormControl,{onBlur:o,onChange:o,placeholder:(0,a.t)("common.form.filter"),value:r}),s.default.createElement("i",{className:"fa fa-search"}),s.default.createElement(n.InputGroup.Button,null,s.default.createElement(n.Button,{disabled:!r,onClick:i},s.default.createElement("i",{className:"fa fa-times"})))))};l.propTypes={filter:i.default.string.isRequired,onChange:i.default.func.isRequired,onClear:i.default.func.isRequired};t.default=l},1892:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(1642);var o=h(a);var i=r(1614);var u=r(570);var s=r(7);var d=h(s);var l=r(0);var c=h(l);var f=r(1);var p=h(f);var v=r(1632);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}var y=function e(t){var r=t.connectDragSource,a=t.displayName,i=t.filter,s=t.isDragging,l=m(t,["connectDragSource","displayName","filter","isDragging"]);return r(p.default.createElement("div",n({className:(0,d.default)({"edit-tree-type-item-selected":s,"authtree-content-left-item":true})},l),p.default.createElement(u.Panel,null,p.default.createElement(u.Panel.Body,null,p.default.createElement("span",{className:"fa-stack authtree-content-left-item-icon"},p.default.createElement("i",{className:"fa fa-circle fa-stack-2x text-primary"}),p.default.createElement("i",{className:"fa fa-user fa-stack-1x fa-inverse"})),p.default.createElement(o.default,{match:i},a)))))};y.propTypes={connectDragSource:c.default.func.isRequired,displayName:c.default.string.isRequired,filter:c.default.string,isDragging:c.default.bool.isRequired,nodeType:c.default.string.isRequired};var g={beginDrag:function e(t){return{displayName:t.displayName,nodeType:t.nodeType}}};var N=function e(t,r){return{connectDragSource:t.dragSource(),isDragging:r.isDragging()}};t.default=(0,i.DragSource)(v.NEW_NODE_TYPE,g,N)(y)},1893:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(6);var o=r(61);var i=r(0);var u=h(i);var s=r(1);var d=h(s);var l=r(1892);var c=h(l);var f=r(1891);var p=h(f);var v=r(115);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function N(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){N(t,e);function t(e){y(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={filter:""};r.handleFilterChange=r.handleFilterChange.bind(r);r.handleFilterClear=r.handleFilterClear.bind(r);return r}n(t,[{key:"handleFilterChange",value:function e(t){this.setState({filter:t.target.value})}},{key:"handleFilterClear",value:function e(){this.setState({filter:""})}},{key:"render",value:function e(){var t=this;var r=function e(r){return r.toUpperCase().includes(t.state.filter.toUpperCase())};var n=[];var i=(0,o.t)("console.authentication.trees.edit.nodes.success.title");r(i)&&n.push(d.default.createElement(c.default,{displayName:i,filter:this.state.filter,key:v.SUCCESS_NODE_TYPE,nodeType:v.SUCCESS_NODE_TYPE}));var u=(0,o.t)("console.authentication.trees.edit.nodes.failure.title");r(u)&&n.push(d.default.createElement(c.default,{displayName:u,filter:this.state.filter,key:v.FAILURE_NODE_TYPE,nodeType:v.FAILURE_NODE_TYPE}));var s=(0,a.filter)(this.props.nodeTypes,function(e){return r(e.name)});n.length&&s.length&&n.push(d.default.createElement("hr",null));var l=(0,a.map)((0,a.sortBy)(s,function(e){return e.name.toUpperCase()}),function(e){var r=e._id,n=e.name;return d.default.createElement(c.default,{displayName:n,filter:t.state.filter,key:r,nodeType:r})});n.push.apply(n,m(l));var f=n.length?n:d.default.createElement("div",{className:"text-muted text-center"},(0,o.t)("console.common.noResults"));return d.default.createElement("div",{className:"authtree-content-side authtree-content-left"},d.default.createElement("h4",{className:"authtree-content-side-title"},(0,o.t)("console.authentication.trees.edit.nodes.nodeTypes.title")),d.default.createElement(p.default,{filter:this.state.filter,onChange:this.handleFilterChange,onClear:this.handleFilterClear}),f)}}]);return t}(s.Component);b.propTypes={nodeTypes:u.default.objectOf(u.default.shape({_id:u.default.string.isRequired,name:u.default.string.isRequired})).isRequired};t.default=b},2005:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(6);var o=r(1614);var i=r(570);var u=r(7);var s=x(u);var d=r(1920);var l=x(d);var c=r(1659);var f=x(c);var p=r(0);var v=x(p);var h=r(1);var m=x(h);var y=r(1893);var g=x(y);var N=r(1890);var b=x(N);var _=r(1888);var E=x(_);var O=r(1884);var C=x(O);var P=r(1532);var R=x(P);var w=r(115);var D=r(1883);var T=x(D);var S=r(1881);var M=x(S);var q=r(1880);var I=x(q);var j=r(1658);function x(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function F(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var L=function e(t){var r=76;var n=81;var a=57;var o=55;return t?window.innerHeight-o:window.innerHeight-o-a-r-n};var U=function e(t,r,n){var o=(0,a.reduce)(t,function(e,t){return(0,a.max)([e,t.y+t.height])},0);var i=(0,a.reduce)(t,function(e,t){return(0,a.max)([e,t.x+t.width])},0);var u=(0,a.max)([r,o+j.TREE_PADDING]);var s=(0,a.max)([n,i+j.TREE_PADDING]);return{canvasWidth:s,canvasHeight:u}};var Y=(0,a.debounce)(function(e,t,r,n){e(t,r,n)},500,{leading:true});var G=function(e){F(t,e);function t(e){A(this,t);var r=k(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={containerWidth:0};r.handleNodeDelete=r.handleNodeDelete.bind(r);r.handleNodePropertiesChange=r.handleNodePropertiesChange.bind(r);r.handleTreeMeasure=r.handleTreeMeasure.bind(r);r.handleWindowResize=r.handleWindowResize.bind(r);return r}n(t,[{key:"componentWillMount",value:function e(){window.addEventListener("resize",(0,a.debounce)(this.handleWindowResize,100))}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"handleWindowResize",value:function e(){this.forceUpdate()}},{key:"handleTreeMeasure",value:function e(t){this.setState({containerWidth:t.width,containerX:t.left,containerY:t.top})}},{key:"handleNodeDelete",value:function e(){this.props.onNodeDelete(this.props.selectedNode.id)}},{key:"handleNodePropertiesChange",value:function e(t,r,n){Y(this.props.onNodePropertiesChange,t,r,n)}},{key:"render",value:function e(){var t=this;var r=L(this.props.isFullscreen);var n=U(this.props.measurements,r,this.state.containerWidth),o=n.canvasHeight,u=n.canvasWidth;var d=function e(){var r=t.props.selectedNode.id;var n=t.props.nodesInPages[r];return n?t.props.localNodeProperties[n].nodes.filter(function(e){return e._id===r})[0]:t.props.nodes[r]};var l=function e(r){var n=(0,a.cloneDeep)(r);n.properties.tree.enumNames=(0,a.without)(n.properties.tree.enumNames,t.props.treeId);n.properties.tree.enum=(0,a.without)(n.properties.tree.enum,t.props.treeId);return n};var c=function e(r){var n=void 0;t.props.selectedNodeSchema&&(n=r===w.PAGE_NODE_TYPE?{}:r===w.INNER_TREE_NODE_TYPE?l(t.props.selectedNodeSchema):t.props.selectedNodeSchema);return n};if(this.props.isFetching)return m.default.createElement(R.default,null);var p=d();var v=(0,a.get)(this.props.selectedNode,"type");var h=c(v);var y=!!this.props.selectedNodeSchema&&this.props.selectedNode.id;return m.default.createElement("div",null,m.default.createElement(T.default,{fluid:true},m.default.createElement(M.default,null)),m.default.createElement(i.Grid,{fluid:true},m.default.createElement(i.Row,null,m.default.createElement(C.default,{isFullscreen:this.props.isFullscreen},m.default.createElement("div",{className:"authtree-container"},m.default.createElement(g.default,{nodeTypes:this.props.nodeTypes}),m.default.createElement("div",{className:(0,s.default)({"authtree-content-centre":true,"collapsed-right":y})},m.default.createElement(E.default,{invertTooltipPlacement:this.props.isFullscreen,isDeleteNodeEnabled:!!this.props.selectedNode.id,onAutoLayout:this.props.onAutoLayout,onFullscreenToggle:this.props.onFullscreenToggle,onNodeDelete:this.handleNodeDelete,onTreeSave:this.props.onTreeSave}),m.default.createElement(f.default,{onMeasure:this.handleTreeMeasure},m.default.createElement(I.default,{canvasHeight:o,canvasWidth:u,containerHeight:r,localNodeProperties:this.props.localNodeProperties,measurements:this.props.measurements,nodes:this.props.nodes,nodesInPages:this.props.nodesInPages,onNewConnection:this.props.onNewConnection,onNewNodeCreate:this.props.onNewNodeCreate,onNodeDeselect:this.props.onNodeDeselect,onNodeDimensionsChange:this.props.onNodeDimensionsChange,onNodeMove:this.props.onNodeMove,onNodePropertiesChange:this.props.onNodePropertiesChange,onNodeSelect:this.props.onNodeSelect,selectedNodeId:this.props.selectedNode.id}))),m.default.createElement(b.default,{isExpanded:y,isNew:this.props.selectedNodeIsNew,nodeId:this.props.selectedNode.id,nodeName:(0,a.get)(p,"displayName"),nodeType:this.props.selectedNode.type,onDisplayNameChange:this.props.onNodeDisplayNameChange,onFieldChange:this.props.onNodePropertiesFieldChange,onPropertiesChange:this.handleNodePropertiesChange,properties:this.props.selectedNodeProperties,schema:h}))))))}}]);return t}(h.Component);G.propTypes={isFetching:v.default.bool.isRequired,isFullscreen:v.default.bool.isRequired,localNodeProperties:v.default.objectOf(v.default.shape({_type:v.default.shape({_id:v.default.string}).isRequired,nodes:v.default.arrayOf(v.default.shape({_id:v.default.string}))})).isRequired,measurements:v.default.objectOf(v.default.object).isRequired,nodeTypes:v.default.objectOf(v.default.object).isRequired,nodes:v.default.objectOf(v.default.object).isRequired,nodesInPages:v.default.objectOf(v.default.string).isRequired,onAutoLayout:v.default.func.isRequired,onFullscreenToggle:v.default.func.isRequired,onNewConnection:v.default.func.isRequired,onNewNodeCreate:v.default.func.isRequired,onNodeDelete:v.default.func.isRequired,onNodeDeselect:v.default.func.isRequired,onNodeDimensionsChange:v.default.func.isRequired,onNodeDisplayNameChange:v.default.func.isRequired,onNodeMove:v.default.func.isRequired,onNodePropertiesChange:v.default.func.isRequired,onNodePropertiesFieldChange:v.default.func.isRequired,onNodeSelect:v.default.func.isRequired,onTreeSave:v.default.func.isRequired,selectedNode:v.default.shape({id:v.default.string,type:v.default.string}),selectedNodeIsNew:v.default.bool.isRequired,selectedNodeProperties:v.default.objectOf(v.default.any),selectedNodeSchema:v.default.objectOf(v.default.any),treeId:v.default.string.isRequired};t.default=(0,o.DragDropContext)(l.default)(G)},2006:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=r(1720);var o=function e(t,r){return(0,n.chain)(t).map(function(e,o){return(0,n.map)(e,function(e,i){return{id:(0,n.findKey)(e),x:(0,a.getNodeXPosition)(t,o,r),y:(0,a.getNodeYPosition)(t,o,i,r)}})}).flatten().value()};t.default=o},2007:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var o=function e(t,r){var o=(0,n.keys)(t);var i=(0,n.map)(n.union.apply(void 0,a(r)),function(e){return(0,n.findKey)(e)});var u=(0,n.difference)(o,i);return n.pick.apply(void 0,[t].concat(a(u)))};t.default=o},2008:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=r(1720);var o=function e(t,r,o){var i=(0,n.max)((0,a.getColumnHeights)(r,o));var u=a.HORIZONTAL_NODE_MARGIN;var s=function e(t){var r=u;u=u+a.HORIZONTAL_NODE_MARGIN+t;return r};return(0,n.chain)(t).map(function(e,t){return{id:t,x:s(o[t].width),y:i+a.VERTICAL_NODE_MARGIN}}).sortBy("id").value()};t.default=o},2009:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=function e(t){var r=[];return(0,n.chain)(t).map(function(e){var t=(0,n.map)(e,function(e){if(-1===(0,n.findIndex)(r,e)){r.push(e);return e}return null});return(0,n.filter)(t,function(e){return!(0,n.isEmpty)(e)}).length>0?t:null}).compact().value()};t.default=a},2010:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=r(2009);var o=i(a);function i(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var s=function e(t){var r=(0,o.default)(t);return(0,n.map)(n.zip.apply(void 0,u(r)),function(e){return(0,n.compact)(e)})};t.default=s},2011:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);function a(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var o=function e(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var i=[];if((0,n.find)(o,function(e){return(0,n.findKey)(e)===t}))i.push(o);else{o.push(a({},t,r[t]));var u=r[t].connections;(0,n.isEmpty)(u)?i.push(o):(0,n.forEach)((0,n.keys)(u).sort(),function(t){(0,n.forEach)(e(u[t],r,(0,n.clone)(o)),function(e){i.push(e)})})}return i.sort(function(e,t){return t.length-e.length})};t.default=o},2012:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=r(2011);var o=v(a);var i=r(2010);var u=v(i);var s=r(2008);var d=v(s);var l=r(2007);var c=v(l);var f=r(2006);var p=v(f);function v(e){return e&&e.__esModule?e:{default:e}}var h=function e(t,r,a){var i=(0,o.default)(t,r);var s=(0,u.default)(i);var l=(0,c.default)(r,s);var f=(0,p.default)(s,a);var v=(0,d.default)(l,s,a);return(0,n.keyBy)(f.concat(v),"id")};t.default=h},2013:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createOrUpdate=v;t.get=h;t.getAllTypes=m;t.getSchema=y;t.getTemplate=g;t.listOutcomes=N;t.remove=b;var n=r(6);var a=r(169);var o=l(a);var i=r(27);var u=l(i);var s=r(168);var d=l(s);function l(e){return e&&e.__esModule?e:{default:e}}var c=new o.default(""+u.default.host+u.default.context+"/json");var f="/realm-config/authentication/authenticationtrees/nodes";var p={"Accept-API-Version":"protocol=2.0,resource=1.0"};function v(e,t,r,a){return c.serviceCall({url:(0,d.default)(f+"/"+r+"/"+a,{realm:e}),type:"PUT",headers:p,data:JSON.stringify((0,n.omit)(t,"_rev"))})}function h(e,t,r){return c.serviceCall({url:(0,d.default)(f+"/"+t+"/"+r,{realm:e}),headers:p,suppressSpinner:true})}function m(e){return c.serviceCall({url:(0,d.default)(f+"?_action=getAllTypes",{realm:e}),headers:p,suppressSpinner:true,type:"POST"})}function y(e,t){return c.serviceCall({url:(0,d.default)(f+"/"+t+"?_action=schema",{realm:e}),headers:p,suppressSpinner:true,type:"POST"})}function g(e,t){return c.serviceCall({url:(0,d.default)(f+"/"+t+"?_action=template",{realm:e}),headers:p,suppressSpinner:true,type:"POST"})}function N(e,t,r){return c.serviceCall({url:(0,d.default)(f+"/"+r+"?_action=listOutcomes",{realm:e}),headers:p,type:"POST",data:JSON.stringify(t)})}function b(e,t,r){return c.serviceCall({url:(0,d.default)(f+"/"+t+"/"+r,{realm:e}),headers:p,suppressSpinner:true,type:"DELETE"})}}}]);
//# sourceMappingURL=127.b3f51838ad.js.map