(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[106],{1372:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}return function(t,r,a){r&&e(t.prototype,r);a&&e(t,a);return t}}();var o=r(3);var l=r(6);var u=r(0);var s=U(u);var i=r(1);var c=U(i);var f=r(1534);var p=r(1530);var d=r(234);var h=r(233);var v=r(1527);var g=U(v);var m=r(560);var b=U(m);var y=r(1811);var C=U(y);var w=r(73);var _=U(w);var I=r(1522);var S=U(I);var E=r(1521);var O=U(E);function U(e){return e&&e.__esModule?e:{default:e}}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function R(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=function(e){R(t,e);function t(e){j(this,t);var r=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isFetching:true,groupId:""};r.handleCreate=r.handleCreate.bind(r);r.handleGroupIdChange=r.handleGroupIdChange.bind(r);r.handleServerUrlChange=r.handleServerUrlChange.bind(r);return r}n(t,[{key:"componentDidMount",value:function e(){var t=this;(0,f.getInitialState)(this.props.router.params[0],p.WEB_AGENT).then(function(e){var r=e.schema,a=e.values;t.setState({isFetching:false});t.props.setSchema(r);t.props.setTemplate(a)},function(e){t.setState({isFetching:false});b.default.addMessage({response:e,type:b.default.TYPE_DANGER})})}},{key:"handleGroupIdChange",value:function e(t){this.setState({groupId:t})}},{key:"handleServerUrlChange",value:function e(t){this.setState({serverUrl:t})}},{key:"handleCreate",value:function e(t){var r=this;var n=this.props.router.params[0];var o=a({},t,{serverUrl:this.state.serverUrl});(0,f.create)(n,p.WEB_AGENT,o,this.state.groupId).then(function(){_.default.routeTo(_.default.configuration.routes.realmsApplicationsAgentsWebAgentGroupsEdit,{args:(0,l.map)([n,r.state.groupId],encodeURIComponent),trigger:true})},function(e){b.default.addMessage({response:e,type:b.default.TYPE_DANGER})})}},{key:"render",value:function e(){var t=!(0,l.isEmpty)(this.state.groupId)&&!(0,l.isEmpty)(this.state.serverUrl);return c.default.createElement(C.default,{isCreateAllowed:t,isFetching:this.state.isFetching,onCreate:this.handleCreate,onGroupIdChange:this.handleGroupIdChange,onServerUrlChange:this.handleServerUrlChange,schema:this.props.schema,serverUrl:this.state.serverUrl,template:this.props.template})}}]);return t}(i.Component);A.propTypes={router:O.default,schema:s.default.shape({type:s.default.string.isRequired}),setSchema:s.default.func.isRequired,setTemplate:s.default.func.isRequired,template:s.default.shape({type:s.default.string.isRequired})};A=(0,g.default)(A,function(e){return{schema:e.remote.config.realm.applications.agents.web.groups.schema,template:e.remote.config.realm.applications.agents.web.groups.template}},function(e){return{setSchema:(0,o.bindActionCreators)(d.setSchema,e),setTemplate:(0,o.bindActionCreators)(h.setTemplate,e)}});A=(0,S.default)(A);t.default=A},1534:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getAll=g;t.get=m;t.getSchema=b;t.remove=y;t.getInitialState=C;t.create=w;t.update=_;var a=r(6);var n=r(169);var o=h(n);var l=r(27);var u=h(l);var s=r(1524);var i=h(s);var c=r(1523);var f=h(c);var p=r(168);var d=h(p);function h(e){return e&&e.__esModule?e:{default:e}}var v=new o.default(""+u.default.host+u.default.context+"/json");function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=(0,f.default)(r.pagination);var n=(0,i.default)(r.fields);return v.serviceCall({url:(0,d.default)("/realm-config/agents/groups/"+t+"?_queryFilter=true"+a+n,{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function m(e,t,r){return v.serviceCall({url:(0,d.default)("/realm-config/agents/groups/"+t+"/"+encodeURIComponent(r),{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function b(e,t){return v.serviceCall({url:(0,d.default)("/realm-config/agents/groups/"+t+"?_action=schema",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function y(e,t,r){var n=(0,a.map)(r,function(r){return v.serviceCall({url:(0,d.default)("/realm-config/agents/groups/"+t+"/"+encodeURIComponent(r),{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"DELETE"})});return Promise.all(n)}function C(e,t){function r(){return v.serviceCall({url:(0,d.default)("/realm-config/agents/groups/"+t+"?_action=template",{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})}return Promise.all([b(e,t),r()]).then(function(e){return{schema:e[0],values:e[1]}})}function w(e,t,r,a){return v.serviceCall({url:(0,d.default)("/realm-config/agents/groups/"+t+"/"+encodeURIComponent(a),{realm:e}),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0","If-None-Match":"*"},data:JSON.stringify(r),suppressSpinner:true,errorsHandlers:{incorrectRevisionError:{status:412}}})}function _(e,t,r,n){return v.serviceCall({url:(0,d.default)("/realm-config/agents/groups/"+t+"/"+encodeURIComponent(n),{realm:e}),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},data:JSON.stringify((0,a.omit)(r,"_rev"))})}},1810:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}return function(t,r,a){r&&e(t.prototype,r);a&&e(t,a);return t}}();var n=r(570);var o=r(61);var l=r(0);var u=g(l);var s=r(1);var i=g(s);var c=r(1544);var f=g(c);var p=r(1543);var d=g(p);var h=r(1629);var v=g(h);function g(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){y(t,e);function t(e){m(this,t);var r=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={groupId:"",serverUrl:""};r.handleGroupIdChange=r.handleGroupIdChange.bind(r);r.handleServerUrlChange=r.handleServerUrlChange.bind(r);return r}a(t,[{key:"handleGroupIdChange",value:function e(t){var r=this;this.setState({groupId:t},function(){r.props.onGroupIdChange((0,d.default)(r.state.groupId)?r.state.groupId:null)})}},{key:"handleServerUrlChange",value:function e(t){var r=this;this.setState({serverUrl:t},function(){r.props.onServerUrlChange((0,v.default)(r.state.serverUrl)?r.state.serverUrl:null)})}},{key:"render",value:function e(){var t=(0,v.default)(this.state.serverUrl);var r=(0,d.default)(this.state.groupId);return i.default.createElement(n.Form,{horizontal:true},i.default.createElement(f.default,{isValid:r,label:(0,o.t)("console.applications.agents.common.groups.new.groupId.title"),onChange:this.handleGroupIdChange,validationMessage:(0,o.t)("console.common.validation.invalidCharacters"),value:this.state.groupId}),i.default.createElement(f.default,{isValid:t,label:(0,o.t)("console.applications.agents.common.serverUrl.title"),onChange:this.handleServerUrlChange,placeholder:(0,o.t)("console.applications.agents.common.serverUrl.placeholder"),validationMessage:(0,o.t)("console.applications.agents.common.serverUrl.validationMessage"),value:this.state.serverUrl}),this.props.children)}}]);return t}(s.Component);C.propTypes={children:u.default.node.isRequired,onGroupIdChange:u.default.func.isRequired,onServerUrlChange:u.default.func.isRequired};t.default=C},1811:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}return function(t,r,a){r&&e(t.prototype,r);a&&e(t,a);return t}}();var n=r(570);var o=r(61);var l=r(0);var u=O(l);var s=r(1);var i=O(s);var c=r(1540);var f=O(c);var p=r(1557);var d=O(p);var h=r(866);var v=O(h);var g=r(865);var m=O(g);var b=r(1532);var y=O(b);var C=r(1810);var w=O(C);var _=r(1529);var I=O(_);var S=r(73);var E=O(S);function O(e){return e&&e.__esModule?e:{default:e}}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=function(e){P(t,e);function t(e){U(this,t);var r=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setRef=r.setRef.bind(r);r.handleCreate=r.handleCreate.bind(r);return r}a(t,[{key:"componentDidUpdate",value:function e(){if(!this.jsonSchemaView&&this.props.template){this.jsonSchemaView=new d.default({hideInheritance:true,schema:new v.default(this.props.schema),values:new m.default(this.props.template),showOnlyRequiredAndEmpty:true});this.jsonForm.appendChild(this.jsonSchemaView.render().el)}}},{key:"handleCreate",value:function e(){this.props.onCreate(this.jsonSchemaView.getData())}},{key:"setRef",value:function e(t){this.jsonForm=t}},{key:"render",value:function e(){var t=void 0;t=this.props.isFetching?i.default.createElement(y.default,null):i.default.createElement(w.default,{onGroupIdChange:this.props.onGroupIdChange,onServerUrlChange:this.props.onServerUrlChange},i.default.createElement("div",{ref:this.setRef}));return i.default.createElement("div",null,i.default.createElement(I.default,{title:(0,o.t)("console.applications.agents.web.groups.new.title")}),i.default.createElement(n.Panel,null,i.default.createElement(n.Panel.Body,null,t),i.default.createElement(n.Panel.Footer,null,i.default.createElement(f.default,{backRoute:E.default.configuration.routes.realmsApplicationsAgentsWeb,disabled:!this.props.isCreateAllowed,onCreateClick:this.handleCreate}))))}}]);return t}(s.Component);R.propTypes={isCreateAllowed:u.default.bool.isRequired,isFetching:u.default.bool.isRequired,onCreate:u.default.func.isRequired,onGroupIdChange:u.default.func.isRequired,onServerUrlChange:u.default.func.isRequired,schema:u.default.objectOf(u.default.object).isRequired,template:u.default.objectOf(u.default.object).isRequired};t.default=R}}]);
//# sourceMappingURL=106.a011d5acf8.js.map