(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[128,220],{1164:function(e,t,r){var a=r(62);e.exports=(a["default"]||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,r,a,n){return'<a class="btn info-button visible-lg-inline-block visible-md-inline-block visible-sm-inline-block" tabindex="0" data-toggle="popoverclickaway">\n    <i class="fa fa-info-circle"></i>\n</a>\n'},useData:true})},1394:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}return function(t,r,a){r&&e(t.prototype,r);a&&e(t,a);return t}}();var n=r(3);var i=r(6);var o=r(0);var u=j(o);var l=r(1);var s=j(l);var c=r(1615);var f=r(219);var d=r(218);var p=r(1527);var v=j(p);var h=r(560);var m=j(h);var y=r(2018);var b=j(y);var g=r(73);var w=j(g);var _=r(1522);var E=j(_);var O=r(1521);var C=j(O);function j(e){return e&&e.__esModule?e:{default:e}}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=function(e){T(t,e);function t(){N(this,t);var e=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={isFetching:true,treeName:""};e.handleCreate=e.handleCreate.bind(e);e.handleTreeNameChange=e.handleTreeNameChange.bind(e);return e}a(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.props.router.params[0];(0,c.getInitialState)(r).then(function(e){var r=e.schema,a=e.template;t.setState({isFetching:false});t.props.setSchema(r);t.props.setTemplate(a)},function(e){t.setState({isFetching:false});m.default.addMessage({response:e,type:m.default.TYPE_DANGER})})}},{key:"handleCreate",value:function e(t){var r=this;var a=this.props.router.params[0];(0,c.create)(a,t,this.state.treeName).then(function(){w.default.routeTo(w.default.configuration.routes.realmsAuthenticationTreesEdit,{args:(0,i.map)([a,r.state.treeName],encodeURIComponent),trigger:true})},function(e){return m.default.addMessage({response:e,type:m.default.TYPE_DANGER})})}},{key:"handleTreeNameChange",value:function e(t){this.setState({treeName:t})}},{key:"render",value:function e(){return s.default.createElement(b.default,{isCreateAllowed:!(0,i.isEmpty)(this.state.treeName),isFetching:this.state.isFetching,onCreate:this.handleCreate,onTreeNameChange:this.handleTreeNameChange,schema:this.props.schema,template:this.props.template,treeName:this.state.treeName})}}]);return t}(l.Component);R.propTypes={router:C.default,schema:u.default.objectOf(u.default.object).isRequired,setSchema:u.default.func.isRequired,setTemplate:u.default.func.isRequired,template:u.default.objectOf(u.default.object).isRequired};R=(0,v.default)(R,function(e){return{schema:e.remote.config.realm.authentication.trees.schema,template:e.remote.config.realm.authentication.trees.template}},function(e){return{setSchema:(0,n.bindActionCreators)(f.set,e),setTemplate:(0,n.bindActionCreators)(d.set,e)}});R=(0,E.default)(R);t.default=R},1521:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(1);var n=u(a);var i=r(0);var o=u(i);function u(e){return e&&e.__esModule?e:{default:e}}var l=o.default.shape({params:o.default.array.isRequired});t.default=l},1522:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){var t=function t(r){var a=l.default.currentRoute;var i=l.default.extractParameters(a,c.default.getCurrentFragment());var u=l.default.applyDefaultParameters(a,i);var s={params:n.default.map(u,function(e){if(!e)return"";return decodeURIComponent(e)})};return o.default.createElement(e,n.default.extend({},r,{router:s}))};t.displayName="withRouter("+d(e)+")";t.WrappedComponent=e;return t};var a=r(6);var n=f(a);var i=r(1);var o=f(i);var u=r(73);var l=f(u);var s=r(63);var c=f(s);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return e.displayName||e.name||"Component"}},1525:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(1539);var a=r(6);var n=_(a);var i=r(19);var o=_(i);var u=r(159);var l=_(u);var s=r(1538);var c=_(s);var f=r(1164);var d=_(f);var p=r(1541);var v=_(p);var h=r(866);var m=_(h);var y=r(865);var b=_(y);var g=r(1531);var w=_(g);function _(e){return e&&e.__esModule?e:{default:e}}function E(e){var t=(0,d.default)();(0,o.default)(e).find(".help-block:not(.errormsg)").addClass("hidden-lg hidden-md hidden-sm").each(function(e,r){var a=(0,o.default)(t);a.popoverclickaway({container:"#content",html:true,placement:"auto top",content:r.innerHTML}).click(function(e){e.preventDefault()});(0,o.default)(r).parent().append(a)})}function O(e){(0,o.default)(e).find("input:password").attr("placeholder",o.default.t("common.form.passwordPlaceholder"))}w.default.define("enum_plugin",function(e){var t=this,r=arguments;var a=e.schema;var i=n.default.indexOf(a.enum,"");var o=i>-1;var u=function e(){var a=function e(t){return!t||8!==t.keyCode};t.deleteSelection=function(){var e=t.deleteSelection;return function(n){if(a(n))return e.apply(t,r);return false}}()};var l=function e(){t.plugins.settings["dropdown_header"]={title:a.options.enum_titles[i]};t.require("dropdown_header");t.setup=function(){var e=t.setup;return function(){e.apply(t,r);t.$dropdown.on("mousedown",".selectize-dropdown-header",function(){t.setValue("");t.close();t.blur();return false})}}()};o?l():u()});function C(e,t){var r=t.schema,a=t.values,n=t.hideInheritance,i=void 0!==n&&n;var o=6;var u=4;c.default.plugins.selectize.enable=true;c.default.plugins.selectize.plugins=function(e){return[{name:"enum_plugin",options:{schema:e}}]};c.default.defaults.themes.openam=v.default.getTheme(o,u);var l=r.toFlatWithInheritanceMeta(a);var s=a.removeInheritance();l=l.raw;s=s.raw;var f=new c.default(e[0],{disable_collapse:true,disable_edit_json:true,disable_properties:true,hide_inheritance:i,iconlib:"fontawesome4",schema:l,theme:"openam"});E(e);O(e);f.setValue(s);return f}var j=l.default.View.extend({className:"jsoneditor-block",initialize:function e(t){if(!(t.schema instanceof m.default))throw new TypeError('[JSONEditorView] "schema" argument is not an instance of JSONSchema.');if(!(t.values instanceof b.default))throw new TypeError('[JSONEditorView] "values" argument is not an instance of JSONValues.');this.options=n.default.defaults(t,{displayTitle:true})},toggleInheritance:function e(t,r,a){this.options.values=this.options.values.extend(this.getData());this.options.values=this.options.values.addValueForPath([t,"inherited"],a);this.options.values=this.options.values.addValueForPath([t,"value"],r);this.render()},render:function e(){this.$el.empty();var t=n.default.get(this.jsonEditor,"watchlist");this.jsonEditor=C(this.$el,this.options);this.jsonEditor.watchlist=t;this.options.displayTitle||this.$el.find("[data-header]").parent().hide();return this},isValid:function e(){return 0===this.jsonEditor.validate().length},getData:function e(){var t=new b.default(this.jsonEditor.getValue());this.options.schema.hasDefaultProperties()&&(t=t.pick(this.options.schema.raw.defaultProperties));t=t.nullifyEmptyPasswords(this.options.schema.getPasswordKeys());t=t.addInheritance(this.options.values.raw);return t.raw},setData:function e(t){this.options.values=this.options.values.extend(t)},watch:function e(t,r){this.jsonEditor.watch(t,r)},destroy:function e(){var t=this;var r=n.default.keys(this.jsonEditor.watchlist);n.default.forEach(r,function(e){t.jsonEditor.unwatch(e)});this.jsonEditor.destroy();this.jsonEditor=null}});t.default=j},1527:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n=r(1548);var i=r(1);var o=s(i);var u=r(81);var l=s(u);function s(e){return e&&e.__esModule?e:{default:e}}var c=function e(t){return t.displayName||t.name||"Component"};var f=function e(t){for(var r=arguments.length,i=Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];var s=n.connect.apply(void 0,i)(t);var f=function e(t){return o.default.createElement(s,a({},t,{store:l.default}))};f.displayName="connectWithStore("+c(t)+")";f.WrappedComponent=t;return f};t.default=f},1528:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(6);var n=p(a);var i=r(159);var o=p(i);var u=r(1525);var l=p(u);var s=r(866);var c=p(s);var f=r(865);var d=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function v(e){e&&setTimeout(e,0)}var h=o.default.View.extend({initialize:function e(t){if(!(t.schema instanceof c.default))throw new TypeError('[FlatJSONSchemaView] "schema" argument is not an instance of JSONSchema.');if(!(t.values instanceof d.default))throw new TypeError('[FlatJSONSchemaView] "values" argument is not an instance of JSONValues.');this.options=n.default.defaults(t,{showOnlyRequiredAndEmpty:false})},render:function e(){var t=this.options.schema;var r=true;if(this.options.showOnlyRequiredAndEmpty){var a=this.options.schema.getRequiredPropertyKeys();var i=this.options.values.getEmptyValueKeys(t);var o=n.default.intersection(a,i);t=t.removeUnrequiredNonDefaultProperties().addDefaultProperties(o);r=!n.default.isEmpty(o)}this.subview=new l.default({displayForm:r,hideInheritance:this.options.hideInheritance,displayTitle:false,el:this.$el,schema:t,values:this.options.values}).render();v(this.options.onRendered);return this},isValid:function e(){return!this.subview||this.subview.isValid()},getData:function e(){if(this.subview){var t;return(t=this.subview).getData.apply(t,arguments)}},setData:function e(t){if(this.subview){this.options.values=this.options.values.extend(t);return this.subview.setData(t)}},watch:function e(t,r){this.subview&&this.subview.watch(t,r)},destroy:function e(){if(this.subview){this.subview.destroy();this.subview=null}}});t.default=h},1529:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(0);var n=u(a);var i=r(1);var o=u(i);function u(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){var r=t.children,a=t.icon,n=t.title,i=t.type;var u=i?"deep":"shallow";var l=a?o.default.createElement("span",{className:"header-icon pull-left bg-primary"},o.default.createElement("i",{className:"fa fa-"+a})):null;var s=i?o.default.createElement("h4",{className:"page-type"},i):null;return o.default.createElement("header",{className:"page-header page-header-no-border clearfix"},l,o.default.createElement("div",{className:"button-group pull-right "+u+"-page-header-button-group"},r),o.default.createElement("div",{className:"pull-left"},s,o.default.createElement("h1",{className:"wordwrap"},n)))};l.propTypes={children:n.default.node,icon:n.default.string,title:n.default.string.isRequired,type:n.default.string};t.default=l},1532:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(1);var n=o(a);var i=r(61);function o(e){return e&&e.__esModule?e:{default:e}}var u=function e(){return n.default.createElement("p",{className:"loading text-muted"},n.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-2x fa-fw"}),n.default.createElement("span",null,(0,i.t)("console.common.loading")))};t.default=u},1540:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(570);var n=r(6);var i=r(61);var o=r(0);var u=m(o);var l=r(1);var s=m(l);var c=r(73);var f=m(c);var d=r(1522);var p=m(d);var v=r(1521);var h=m(v);function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var b=function e(t){var r=t.backRoute,o=t.backRouteArgs,u=t.disabled,l=t.onCreateClick,c=t.router;var d=c.params[0];var p=(0,n.map)([d].concat(y(o)),encodeURIComponent);var v="#"+f.default.getLink(r,p);return s.default.createElement(a.Clearfix,null,s.default.createElement("div",{className:"pull-right"},s.default.createElement("div",{className:"am-btn-action-group"},s.default.createElement(a.Button,{href:v},(0,i.t)("common.form.cancel")),s.default.createElement(a.Button,{bsStyle:"primary",disabled:u,onClick:l},(0,i.t)("common.form.create")))))};b.defaultProps={backRouteArgs:[],disabled:false};b.propTypes={backRoute:u.default.shape({url:u.default.oneOfType([u.default.string,u.default.instanceOf(RegExp)]).isRequired,pattern:u.default.string.isRequired}).isRequired,backRouteArgs:u.default.arrayOf(u.default.string),disabled:u.default.bool,onCreateClick:u.default.func.isRequired,router:h.default};t.default=(0,p.default)(b)},1615:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),u;!(a=(u=o.next()).done);a=true){r.push(u.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{!a&&o["return"]&&o["return"]()}finally{if(n)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.create=y;t.update=b;t.get=g;t.getAll=w;t.getInitialState=_;t.remove=E;var i=r(6);var o=r(169);var u=d(o);var l=r(27);var s=d(l);var c=r(168);var f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}var p=new u.default(""+s.default.host+s.default.context+"/json");var v="/realm-config/authentication/authenticationtrees/trees";var h={"Accept-API-Version":"protocol=2.0,resource=1.0"};function m(e){var t=function e(t){return(0,i.omitBy)(t,function(e,t){return(0,i.startsWith)(t,"_")})};return n({},t(e),{nodes:(0,i.mapValues)(e.nodes,function(e){return t(e)})})}function y(e,t,r){return p.serviceCall({url:(0,f.default)(v+"/"+r,{realm:e}),type:"PUT",headers:n({},h,{"If-None-Match":"*"}),data:JSON.stringify(m(t)),errorsHandlers:{incorrectRevisionError:{status:412}}})}function b(e,t,r){return p.serviceCall({url:(0,f.default)(v+"/"+r,{realm:e}),type:"PUT",headers:h,data:JSON.stringify(m(t))})}function g(e,t){return p.serviceCall({url:(0,f.default)(v+"/"+t+"?forUI=true",{realm:e}),headers:h})}function w(e){return p.serviceCall({url:(0,f.default)(v+"?_action=getIds",{realm:e}),headers:h,suppressSpinner:true,type:"POST"})}function _(e){var t=p.serviceCall({url:(0,f.default)(v+"?_action=schema",{realm:e}),headers:h,type:"POST"});var r=p.serviceCall({url:(0,f.default)(v+"?_action=template",{realm:e}),headers:h,type:"POST"});return Promise.all([t,r]).then(function(e){var t=a(e,2),r=t[0],n=t[1];return{schema:r,template:n}})}function E(e,t){var r=(0,i.map)(t,function(t){return p.serviceCall({url:(0,f.default)(v+"/"+t,{realm:e}),headers:h,type:"DELETE"})});return Promise.all(r)}},2017:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}return function(t,r,a){r&&e(t.prototype,r);a&&e(t,a);return t}}();var n=r(570);var i=r(61);var o=r(6);var u=r(0);var l=f(u);var s=r(1);var c=f(s);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){v(t,e);function t(e){d(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleTreeNameChange=r.handleTreeNameChange.bind(r);return r}a(t,[{key:"handleTreeNameChange",value:function e(t){this.props.onTreeNameChange(t.target.value)}},{key:"render",value:function e(){return c.default.createElement(n.Form,{horizontal:true},c.default.createElement(n.FormGroup,{controlId:(0,o.uniqueId)("treeName")},c.default.createElement(n.ControlLabel,{className:"col-sm-4"},(0,i.t)("console.authentication.trees.new.treeName")),c.default.createElement(n.Col,{sm:6},c.default.createElement(n.FormControl,{onChange:this.handleTreeNameChange,type:"text",value:this.props.treeName}))))}}]);return t}(s.Component);h.propTypes={onTreeNameChange:l.default.func.isRequired,treeName:l.default.string.isRequired};t.default=h},2018:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}return function(t,r,a){r&&e(t.prototype,r);a&&e(t,a);return t}}();var n=r(570);var i=r(61);var o=r(0);var u=N(o);var l=r(1);var s=N(l);var c=r(1540);var f=N(c);var d=r(1528);var p=N(d);var v=r(866);var h=N(v);var m=r(865);var y=N(m);var b=r(1532);var g=N(b);var w=r(2017);var _=N(w);var E=r(1529);var O=N(E);var C=r(73);var j=N(C);function N(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function R(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=function(e){R(t,e);function t(e){P(this,t);var r=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleCreate=r.handleCreate.bind(r);r.setRef=r.setRef.bind(r);return r}a(t,[{key:"componentDidUpdate",value:function e(){if(!this.jsonSchemaView&&this.props.template){this.jsonSchemaView=new p.default({schema:new h.default(this.props.schema),values:new y.default(this.props.template),showOnlyRequiredAndEmpty:true});this.jsonForm.appendChild(this.jsonSchemaView.render().el)}}},{key:"handleCreate",value:function e(){this.props.onCreate(this.jsonSchemaView.getData())}},{key:"setRef",value:function e(t){this.jsonForm=t}},{key:"render",value:function e(){var t=this.props.isFetching?s.default.createElement(g.default,null):s.default.createElement("div",null,s.default.createElement(_.default,{onTreeNameChange:this.props.onTreeNameChange,treeName:this.props.treeName}),s.default.createElement("div",{ref:this.setRef}));return s.default.createElement("div",null,s.default.createElement(O.default,{title:(0,i.t)("console.authentication.trees.new.title")}),s.default.createElement(n.Panel,null,s.default.createElement(n.Panel.Body,null,t),s.default.createElement(n.Panel.Footer,null,s.default.createElement(f.default,{backRoute:j.default.configuration.routes.realmsAuthenticationTrees,disabled:!this.props.isCreateAllowed,onCreateClick:this.handleCreate}))))}}]);return t}(l.Component);S.propTypes={isCreateAllowed:u.default.bool.isRequired,isFetching:u.default.bool.isRequired,onCreate:u.default.func.isRequired,onTreeNameChange:u.default.func.isRequired,schema:u.default.objectOf(u.default.object).isRequired,template:u.default.objectOf(u.default.object).isRequired,treeName:u.default.string.isRequired};t.default=S}}]);
//# sourceMappingURL=128.a0f488620f.js.map