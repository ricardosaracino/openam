(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28,220,334,335,359,398],{1164:function(e,t,a){var r=a(62);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,a,r,n){return'<a class="btn info-button visible-lg-inline-block visible-md-inline-block visible-sm-inline-block" tabindex="0" data-toggle="popoverclickaway">\n    <i class="fa fa-info-circle"></i>\n</a>\n'},useData:true})},1165:function(e,t,a){var r=a(62);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,a,r,n){var l,i=null!=t?t:e.nullContext||{},o=a.helperMissing,s="function",u=e.escapeExpression;return'<div class="subnav-container">\n    <div class="container">\n        <strong><i class="fa fa-angle-left text-muted"></i> <a href="'+u((l=null!=(l=a.hash||(null!=t?t.hash:t))?l:o,typeof l===s?l.call(i,{name:"hash",hash:{},data:n}):l))+'">'+u((l=null!=(l=a.title||(null!=t?t.title:t))?l:o,typeof l===s?l.call(i,{name:"title",hash:{},data:n}):l))+"</a></strong>\n    </div>\n</div>\n"},useData:true})},1168:function(e,t,a){var r=a(62);e.exports=(r["default"]||r).template({1:function(e,t,a,r,n){var l;return"alert-"+e.escapeExpression((l=null!=(l=a.type||(null!=t?t.type:t))?l:a.helperMissing,"function"===typeof l?l.call(null!=t?t:e.nullContext||{},{name:"type",hash:{},data:n}):l))},3:function(e,t,a,r,n){return'<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">Ã—</span><span class="sr-only">'+e.escapeExpression((a.t||t&&t.t||a.helperMissing).call(null!=t?t:e.nullContext||{},"console.common.form.close",{name:"t",hash:{},data:n}))+"</span></button>"},5:function(e,t,a,r,n){return'            <i class="fa fa-check-circle-o"></i>\n'},7:function(e,t,a,r,n){return'            <i class="fa fa-exclamation-circle"></i>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,a,r,n){var l,i=null!=t?t:e.nullContext||{},o=a.helperMissing;return'\x3c!--\n  Copyright 2015-2017 ForgeRock AS. All Rights Reserved\n \n  Use of this code requires a commercial software license with ForgeRock AS.\n  or with one of its affiliates. All use shall be exclusively subject\n  to such license between the licensee and ForgeRock AS.\n--\x3e\n<div class="alert '+(null!=(l=a["if"].call(i,null!=t?t.type:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?l:"")+'" role="alert">\n    <div class="media">\n        '+(null!=(l=a["if"].call(i,null!=t?t.dismissable:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?l:"")+'\n        <div class="media-left" href="#">\n'+(null!=(l=(a.equals||t&&t.equals||o).call(i,null!=t?t.type:t,"success",{name:"equals",hash:{},fn:e.program(5,n,0),inverse:e.program(7,n,0),data:n}))?l:"")+'        </div>\n        <div class="media-body">\n            '+e.escapeExpression((a.t||t&&t.t||o).call(i,null!=t?t.text:t,{name:"t",hash:{},data:n}))+"\n        </div>\n    </div>\n</div>\n"},useData:true})},1285:function(e,t,a){var r=a(62);e.exports=(r["default"]||r).template({1:function(e,t,a,r,n){var l;return null!=(l=e.invokePartial(r["headers/_Title"],t,{name:"headers/_Title",hash:{title:"console.realms.newRealm"},data:n,indent:"        ",helpers:a,partials:r,decorators:e.decorators}))?l:""},3:function(e,t,a,r,n){var l;return null!=(l=e.invokePartial(r["headers/_TitleWithSubAndIcon"],t,{name:"headers/_TitleWithSubAndIcon",hash:{buttons:"templates/admin/views/realms/partials/_HeaderDeleteButton",icon:"cloud",type:"console.realms.edit.title",title:null!=t?t.realmName:t},data:n,indent:"        ",helpers:a,partials:r,decorators:e.decorators}))?l:""},5:function(e,t,a,r,n){return"                        "+e.escapeExpression((a.t||t&&t.t||a.helperMissing).call(null!=t?t:e.nullContext||{},"common.form.create",{name:"t",hash:{},data:n}))+"\n"},7:function(e,t,a,r,n){return"                        "+e.escapeExpression((a.t||t&&t.t||a.helperMissing).call(null!=t?t:e.nullContext||{},"common.form.saveChanges",{name:"t",hash:{},data:n}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,a,r,n){var l,i=null!=t?t:e.nullContext||{};return'<nav id="backlink"></nav>\n<div class="container">\n'+(null!=(l=a["if"].call(i,null!=t?t.newEntity:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?l:"")+'\n    <div class="panel panel-default">\n        <div class="panel-body ">\n            <form data-realm-form></form>\n            <form data-realm-stateless-session-form></form>\n            <div data-realm-alert class="col-sm-offset-4 col-sm-6"></div>\n        </div>\n        <div class="panel-footer clearfix">\n            <div class="pull-right">\n                <button data-cancel class="btn btn-default">'+e.escapeExpression((a.t||t&&t.t||a.helperMissing).call(i,"common.form.cancel",{name:"t",hash:{},data:n}))+'</button>\n                <button data-save class="btn btn-primary" type="button" disabled>\n'+(null!=(l=a["if"].call(i,null!=t?t.newEntity:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.program(7,n,0),data:n}))?l:"")+"                </button>\n            </div>\n        </div>\n    </div>\n</div>\n"},usePartial:true,useData:true})},1286:function(e,t,a){var r=a(62);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,a,r,n){var l;return null!=(l=e.invokePartial(r["alerts/_Alert"],t,{name:"alerts/_Alert",hash:{text:"console.realms.realmNameValidationError",type:"warning"},data:n,helpers:a,partials:r,decorators:e.decorators}))?l:""},usePartial:true,useData:true})},1525:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});a(1539);var r=a(6);var n=w(r);var l=a(19);var i=w(l);var o=a(159);var s=w(o);var u=a(1538);var c=w(u);var d=a(1164);var f=w(d);var v=a(1541);var h=w(v);var m=a(866);var p=w(m);var g=a(865);var y=w(g);var A=a(1531);var b=w(A);function w(e){return e&&e.__esModule?e:{default:e}}function _(e){var t=(0,f.default)();(0,i.default)(e).find(".help-block:not(.errormsg)").addClass("hidden-lg hidden-md hidden-sm").each(function(e,a){var r=(0,i.default)(t);r.popoverclickaway({container:"#content",html:true,placement:"auto top",content:a.innerHTML}).click(function(e){e.preventDefault()});(0,i.default)(a).parent().append(r)})}function P(e){(0,i.default)(e).find("input:password").attr("placeholder",i.default.t("common.form.passwordPlaceholder"))}b.default.define("enum_plugin",function(e){var t=this,a=arguments;var r=e.schema;var l=n.default.indexOf(r.enum,"");var i=l>-1;var o=function e(){var r=function e(t){return!t||8!==t.keyCode};t.deleteSelection=function(){var e=t.deleteSelection;return function(n){if(r(n))return e.apply(t,a);return false}}()};var s=function e(){t.plugins.settings["dropdown_header"]={title:r.options.enum_titles[l]};t.require("dropdown_header");t.setup=function(){var e=t.setup;return function(){e.apply(t,a);t.$dropdown.on("mousedown",".selectize-dropdown-header",function(){t.setValue("");t.close();t.blur();return false})}}()};i?s():o()});function E(e,t){var a=t.schema,r=t.values,n=t.hideInheritance,l=void 0!==n&&n;var i=6;var o=4;c.default.plugins.selectize.enable=true;c.default.plugins.selectize.plugins=function(e){return[{name:"enum_plugin",options:{schema:e}}]};c.default.defaults.themes.openam=h.default.getTheme(i,o);var s=a.toFlatWithInheritanceMeta(r);var u=r.removeInheritance();s=s.raw;u=u.raw;var d=new c.default(e[0],{disable_collapse:true,disable_edit_json:true,disable_properties:true,hide_inheritance:l,iconlib:"fontawesome4",schema:s,theme:"openam"});_(e);P(e);d.setValue(u);return d}var C=s.default.View.extend({className:"jsoneditor-block",initialize:function e(t){if(!(t.schema instanceof p.default))throw new TypeError('[JSONEditorView] "schema" argument is not an instance of JSONSchema.');if(!(t.values instanceof y.default))throw new TypeError('[JSONEditorView] "values" argument is not an instance of JSONValues.');this.options=n.default.defaults(t,{displayTitle:true})},toggleInheritance:function e(t,a,r){this.options.values=this.options.values.extend(this.getData());this.options.values=this.options.values.addValueForPath([t,"inherited"],r);this.options.values=this.options.values.addValueForPath([t,"value"],a);this.render()},render:function e(){this.$el.empty();var t=n.default.get(this.jsonEditor,"watchlist");this.jsonEditor=E(this.$el,this.options);this.jsonEditor.watchlist=t;this.options.displayTitle||this.$el.find("[data-header]").parent().hide();return this},isValid:function e(){return 0===this.jsonEditor.validate().length},getData:function e(){var t=new y.default(this.jsonEditor.getValue());this.options.schema.hasDefaultProperties()&&(t=t.pick(this.options.schema.raw.defaultProperties));t=t.nullifyEmptyPasswords(this.options.schema.getPasswordKeys());t=t.addInheritance(this.options.values.raw);return t.raw},setData:function e(t){this.options.values=this.options.values.extend(t)},watch:function e(t,a){this.jsonEditor.watch(t,a)},destroy:function e(){var t=this;var a=n.default.keys(this.jsonEditor.watchlist);n.default.forEach(a,function(e){t.jsonEditor.unwatch(e)});this.jsonEditor.destroy();this.jsonEditor=null}});t.default=C},1526:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=o;var r=a(61);var n=a(655);var l=i(n);function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.t)("common.form.delete");l.default.confirm({type:l.default.TYPE_DANGER,title:(0,r.t)("common.form.confirm")+" "+a,message:e.message?e.message:(0,r.t)("console.common.confirmDeleteText",{type:e.type}),btnOKLabel:a,btnOKClass:"btn-danger",callback:function e(a){a&&t&&t()}})}},1528:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(6);var n=v(r);var l=a(159);var i=v(l);var o=a(1525);var s=v(o);var u=a(866);var c=v(u);var d=a(865);var f=v(d);function v(e){return e&&e.__esModule?e:{default:e}}function h(e){e&&setTimeout(e,0)}var m=i.default.View.extend({initialize:function e(t){if(!(t.schema instanceof c.default))throw new TypeError('[FlatJSONSchemaView] "schema" argument is not an instance of JSONSchema.');if(!(t.values instanceof f.default))throw new TypeError('[FlatJSONSchemaView] "values" argument is not an instance of JSONValues.');this.options=n.default.defaults(t,{showOnlyRequiredAndEmpty:false})},render:function e(){var t=this.options.schema;var a=true;if(this.options.showOnlyRequiredAndEmpty){var r=this.options.schema.getRequiredPropertyKeys();var l=this.options.values.getEmptyValueKeys(t);var i=n.default.intersection(r,l);t=t.removeUnrequiredNonDefaultProperties().addDefaultProperties(i);a=!n.default.isEmpty(i)}this.subview=new s.default({displayForm:a,hideInheritance:this.options.hideInheritance,displayTitle:false,el:this.$el,schema:t,values:this.options.values}).render();h(this.options.onRendered);return this},isValid:function e(){return!this.subview||this.subview.isValid()},getData:function e(){if(this.subview){var t;return(t=this.subview).getData.apply(t,arguments)}},setData:function e(t){if(this.subview){this.options.values=this.options.values.extend(t);return this.subview.setData(t)}},watch:function e(t,a){this.subview&&this.subview.watch(t,a)},destroy:function e(){if(this.subview){this.subview.destroy();this.subview=null}}});t.default=m},1533:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1537);var n=u(r);var l=a(1536);var i=u(l);var o=a(1526);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}var c={};c.showConfirmationBeforeDeleting=function(e,t){(0,n.default)("FormHelper.showConfirmationBeforeDeleting","org/forgerock/openam/ui/admin/utils/form/showConfirmationBeforeAction");return(0,s.default)(e,t)};c.setActiveTab=function(e,t){(0,n.default)("FormHelper.setActiveTab","org/forgerock/openam/ui/admin/utils/form/setActiveTab");return(0,i.default)(e,t)};t.default=c},1536:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){e&&e.activeTabId&&e.$el.find('.nav-tabs a[href="'+e.activeTabId+'"]').tab("show")}},1537:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=r;function r(e,t){console.warn(e+" is marked as deprecated. \nPlease use "+t)}},1553:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(6);var n=v(r);var l=a(19);var i=v(l);var o=a(159);var s=v(o);var u=a(1165);var c=v(u);var d=a(63);var f=v(d);function v(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return n.default.take(e,t+1).join("/")}t.default=s.default.View.extend({el:"#backlink",render:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;var a=f.default.getCurrentFragment().split("/");var r=a[t];var l=n.default.startCase(""+r);var o={title:i.default.t("console.navigation."+r+".title",{defaultValue:l}),hash:"#"+h(a,t)};this.$el.html((0,c.default)(o))}})},1558:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){var a=[];var r=true;var n=false;var l=void 0;try{for(var i=e[Symbol.iterator](),o;!(r=(o=i.next()).done);r=true){a.push(o.value);if(t&&a.length===t)break}}catch(e){n=true;l=e}finally{try{!r&&i["return"]&&i["return"]()}finally{if(n)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var n=a(6);var l=a(19);var i=A(l);var o=a(169);var s=A(o);var u=a(27);var c=A(u);var d=a(168);var f=A(d);var v=a(866);var h=A(v);var m=a(865);var p=A(m);var g=a(867);var y=A(g);function A(e){return e&&e.__esModule?e:{default:e}}var b=new s.default(""+c.default.host+c.default.context+"/json");b.authentication={get:function e(t){return y.default.schemaWithValues(b,(0,f.default)("/realm-config/authentication",{realm:t}))},update:function e(t,a){return b.serviceCall({url:(0,f.default)("/realm-config/authentication",{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"PUT",data:JSON.stringify(a)})},chains:{all:function e(t){return Promise.all([b.serviceCall({url:(0,f.default)("/realm-config/authentication/chains?_queryFilter=true",{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}),b.serviceCall({url:(0,f.default)("/realm-config/authentication",{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})]).then(function(e){var t=r(e,2),a=t[0],l=t[1];(0,n.each)(a.result,function(e){if(e._id===l.adminAuthModule){e.defaultConfig=e.defaultConfig||{};e.defaultConfig.adminAuthModule=true}if(e._id===l.orgConfig){e.defaultConfig=e.defaultConfig||{};e.defaultConfig.orgConfig=true}});return{values:a}})},create:function e(t,a){return b.serviceCall({url:(0,f.default)("/realm-config/authentication/chains?_action=create",{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify(a)})},get:function e(t,a){var l;return Promise.all([b.serviceCall({url:(0,f.default)("/realm-config/authentication",{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}),b.serviceCall({url:(0,f.default)("/realm-config/authentication/chains/"+a,{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}),b.serviceCall({url:(0,f.default)("/realm-config/authentication/modules?_queryFilter=true",{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})]).then(function(e){var t=r(e,3),a=t[0],i=t[1],o=t[2];i._id===a.adminAuthModule&&(i.adminAuthModule=true);i._id===a.orgConfig&&(i.orgConfig=true);i.authChainConfiguration=i.authChainConfiguration||[];(0,n.each)(i.authChainConfiguration,function(e){l=(0,n.find)(o.result,{_id:e.module});l&&(e.type=l.type)});return{chainData:i,modulesData:(0,n.sortBy)(o.result,"_id")}})},remove:function e(t,a){return b.serviceCall({url:(0,f.default)("/realm-config/authentication/chains/"+a,{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"DELETE"})},update:function e(t,a,r){return b.serviceCall({url:(0,f.default)("/realm-config/authentication/chains/"+a,{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"PUT",data:JSON.stringify(r)})}},modules:{all:function e(t){return b.serviceCall({url:(0,f.default)("/realm-config/authentication/modules?_queryFilter=true",{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){var t=e.result;return(0,n.sortBy)(t,"_id")})},create:function e(t,a,r){return b.serviceCall({url:(0,f.default)("/realm-config/authentication/modules/"+r+"?_action=create",{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify(a)})},get:function e(t,a,n){function l(){return b.serviceCall({url:(0,f.default)("/realm-config/authentication/modules/"+n+"/"+a,{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})}return Promise.all([this.schema(t,n),l(),this.types.get(t,n)]).then(function(e){var t=r(e,3),a=t[0],n=t[1],l=t[2];return{name:l.name,schema:a,values:new p.default(n)}})},exists:function e(t,a){var r=i.default.Deferred(),n="_queryFilter="+encodeURIComponent('_id eq "'+a+'"')+"&_fields=_id",l=b.serviceCall({url:(0,f.default)("/realm-config/authentication/modules?"+n,{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}});l.then(function(e){r.resolve(e.result.length>0)});return r},remove:function e(t,a,r){return b.serviceCall({url:(0,f.default)("/realm-config/authentication/modules/"+r+"/"+a,{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"DELETE"})},update:function e(t,a,r,n){return b.serviceCall({url:(0,f.default)("/realm-config/authentication/modules/"+r+"/"+a,{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"PUT",data:n}).then(function(e){return new p.default(e)})},types:{all:function e(t){return b.serviceCall({url:(0,f.default)("/realm-config/authentication/modules?_action=getAllTypes",{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"}).then(function(e){var t=e.result;return(0,n.sortBy)(t,"name")})},get:function e(t,a){return b.authentication.modules.types.all(t).then(function(e){return(0,n.find)(e,{_id:a})})}},schema:function e(t,a){return b.serviceCall({url:(0,f.default)("/realm-config/authentication/modules/"+a+"?_action=schema",{realm:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"}).then(function(e){return new h.default(e)})}}};t.default=b},1573:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){var a=[];var r=true;var n=false;var l=void 0;try{for(var i=e[Symbol.iterator](),o;!(r=(o=i.next()).done);r=true){a.push(o.value);if(t&&a.length===t)break}}catch(e){n=true;l=e}finally{try{!r&&i["return"]&&i["return"]()}finally{if(n)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var n=a(6);var l=p(n);var i=a(169);var o=p(i);var s=a(27);var u=p(s);var c=a(168);var d=p(c);var f=a(866);var v=p(f);var h=a(865);var m=p(h);function p(e){return e&&e.__esModule?e:{default:e}}var g=new o.default(""+u.default.host+u.default.context+"/json");var y="server-default";var A="advanced";var b=function e(t){return"serverDefaults"===t};var w=function e(t){return b(t)?y:t};var _=function e(t){return l.default.map(t,function(e,t){return{key:t,value:e}})};var P=function e(t){return l.default.reduce(t,function(e,t){e[t.key]=t.value;return e},{})};var E=function e(t,a){return g.serviceCall({url:(0,d.default)("/global-config/servers/"+t+"/properties/"+a+"?_action=schema",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"}).then(function(e){return new v.default(e)})};var C=function e(t,a){return g.serviceCall({url:(0,d.default)("/global-config/servers/"+t+"/properties/"+a,{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){a===A&&(e=l.default.sortBy(_(e),function(e){return e.key}));return new m.default(e)})};var D=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;var n=a;t===A&&(n=P(a[A]));return g.serviceCall({url:(0,d.default)("/global-config/servers/"+r+"/properties/"+t,{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"PUT",data:JSON.stringify(n)})};g.servers={clone:function e(t,a){return g.serviceCall({url:(0,d.default)("/global-config/servers/"+t+"?_action=clone",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify({clonedUrl:a})})},get:function e(t,a){return Promise.all([E(t,a),C(t,a)]).then(function(e){return{schema:e[0],values:e[1]}})},getWithDefaults:function e(t,a){var n=w(t);var l=[g.servers.get(n,a)];b(t)||"directoryConfiguration"===a||l.push(C(y,a));return Promise.all(l).then(function(e){var t=r(e,2),a=t[0],n=t[1],l=void 0===n?{}:n;return{schema:a.schema,values:a.values,defaultValues:l}})},getUrl:function e(t){return g.serviceCall({url:(0,d.default)("/global-config/servers/"+t,{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){return e.url},function(){return})},getAll:function e(){return g.serviceCall({url:(0,d.default)("/global-config/servers?_queryFilter=true",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){return l.default.reject(e.result,{_id:y})})},remove:function e(t){return g.serviceCall({url:(0,d.default)("/global-config/servers/"+t,{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"DELETE"})},create:function e(t){return g.serviceCall({url:(0,d.default)("/global-config/servers?_action=create",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify(t)})},update:function e(t,a,r){return D(t,a,w(r))},ADVANCED_SECTION:A,DEFAULT_SERVER:y};t.default=g},1625:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(6);var n=m(r);var l=a(169);var i=m(l);var o=a(27);var s=m(o);var u=a(168);var c=m(u);var d=a(866);var f=m(d);var v=a(865);var h=m(v);function m(e){return e&&e.__esModule?e:{default:e}}var p=new i.default(""+s.default.host+s.default.context+"/json");function g(e){return"core"===e?"":"/modules/"+e}p.authentication={getAll:function e(){return p.serviceCall({url:(0,c.default)("/global-config/authentication/modules?_action=getAllTypes",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"}).then(function(e){return n.default.sortBy(e.result,"name")})},schema:function e(){var t=function e(t){return p.serviceCall({url:(0,c.default)("/global-config/authentication?_action="+t,{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})};return Promise.all([t("schema"),t("template")]).then(function(e){return{schema:e[0],values:e[1]}})},get:function e(t){var a=g(t);var r=function e(){return p.serviceCall({url:(0,c.default)("/global-config/authentication"+a+"?_action=schema",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"}).then(function(e){return new f.default(e)})};var n=function e(){return p.serviceCall({url:(0,c.default)("/global-config/authentication"+a,{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){return new h.default(e)})};return Promise.all([r(),n()]).then(function(e){return{schema:e[0],values:e[1],name:e[1].raw._type.name}})},update:function e(t,a){return p.serviceCall({url:(0,c.default)("/global-config/authentication"+g(t),{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"PUT",data:a})}};t.default=p},1676:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(6);var n=u(r);var l=a(19);var i=u(l);var o=a(1573);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a;return e}function d(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var f=function e(t){return"com.sun.identity.server.fqdnMap["+t+"]"};var v=function e(t,a,r){var l=function e(t){return n.default.map(t,function(e){return f(e)})};var o=n.default.difference(a,r);var u=l(o);var v=l(n.default.difference(r,a));var h=i.default.Deferred();s.default.servers.get(s.default.servers.DEFAULT_SERVER,s.default.servers.ADVANCED_SECTION).then(function(e){var t=n.default.removeByValues(e.values.raw,"key",[].concat(d(v),d(u)));var a=n.default.map(o,function(e){var t=f(e);return{key:t,value:e}});s.default.servers.update(s.default.servers.ADVANCED_SECTION,c({},s.default.servers.ADVANCED_SECTION,t.concat(a)),s.default.servers.DEFAULT_SERVER).then(h.resolve,h.reject)},h.reject);return h};t.default=v},884:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});a(1539);a(1531);var r=a(6);var n=$(r);var l=a(19);var i=$(l);var o=a(61);var s=$(o);var u=a(114);var c=$(u);var d=a(1168);var f=$(d);var v=a(1553);var h=$(v);var m=a(27);var p=$(m);var g=a(1286);var y=$(g);var A=a(1285);var b=$(A);var w=a(59);var _=$(w);var P=a(1528);var E=$(P);var C=a(1533);var D=$(C);var T=a(1625);var S=$(T);var V=a(866);var I=$(V);var O=a(865);var x=$(O);var M=a(560);var k=$(M);var N=a(1558);var j=$(N);var R=a(871);var q=$(R);var B=a(73);var F=$(B);var J=a(1676);var U=$(J);function $(e){return e&&e.__esModule?e:{default:e}}function L(){(0,i.default)('input[type="text"]:not(:disabled):first').prop("autofocus",true)}function G(e){var t=' @#$%&+?:;,/=\\<>"';for(var a=0;a<t.length;a++)if(e.indexOf(t[a])>-1)return true;return false}function Y(e){var t=function e(t,a,r){return n.default.assign({},t,{_id:t._id+n.default.uniqueId(),title:s.default.t(a),description:s.default.t(r)})};e.dnsAliases=t(e.aliases,"console.realms.edit.dnsAliases.title","console.realms.edit.dnsAliases.description");e.realmAliases=t(e.aliases,"console.realms.edit.realmAliases.title","console.realms.edit.realmAliases.description");return e}function z(e){var t=n.default.indexOf(e,"aliases");t>0&&e.splice(t,1,"realmAliases","dnsAliases");return e}function K(e){return n.default.filter(e,function(e){return e.indexOf(".")>-1})}function W(e){return n.default.filter(e,function(e){return-1===e.indexOf(".")})}function H(e){return"/"===e}function Q(){var e=false;var t=(0,i.default)('input[name="root[name]"]').val();var a="";t.length>0&&(G(t)?a=(0,y.default)():e=true);(0,i.default)("[data-realm-alert]").html(a);return e}var X=c.default.extend({template:b.default,partials:{"alerts/_Alert":f.default},events:{"click [data-save]":"handleSave","click [data-cancel]":"returnBack","click [data-delete]":"onDeleteClick",'keyup input[name="root[name]"]':"onDataChange",'change input[name="root[name]"]':"onDataChange"},render:function e(t){var a=void 0;var r=void 0;this.realmPath=t[0];if(t[0]){this.data.realmPath=t[0];this.data.realmName="/"===t[0]?i.default.t("console.common.topLevelRealm"):t[0].split("/").pop();this.data.newEntity=false;this.data.headerActions=[{actionPartial:"form/_Button",data:"delete",title:"common.form.delete",icon:"fa-times",disabled:!this.canRealmBeDeleted(this.data.realmPath)}]}else{this.data.newEntity=true;this.data.headerActions=null}if(this.data.newEntity){a=q.default.realms.schema();r=S.default.authentication.schema()}else{a=q.default.realms.get(this.data.realmPath);r=j.default.authentication.get(this.data.realmPath)}this.parentRender(function(){var e=this;Promise.all([a,q.default.realms.all(),r]).then(function(t){var a=t[0];var r=n.default.map(t[1].result,"path");if(e.data.newEntity)if(r.length>1){a.schema.properties.parentPath["enum"]=r;a.schema.properties.parentPath.options={enum_titles:r}}else a.schema.properties.parentPath.readonly=true;else{a.schema.properties.name.readonly=true;a.schema.properties.parentPath.readonly=true;H(a.values.name)&&(a.schema.properties.active.readonly=true);e.toggleSubmitButton(true)}a.schema.required=z(a.schema.required);a.schema.properties=Y(a.schema.properties);a.values.dnsAliases=K(a.values.aliases);a.values.realmAliases=W(a.values.aliases);e.originalDnsAliases=a.values.dnsAliases;var l=e.data.newEntity?"schema.properties.defaults.properties.general":"schema.properties.general";var i=new I.default(a.schema).addDefaultProperties(a.schema.required);e.subviews=[new E.default({schema:i,values:new x.default(a.values)}),new E.default({schema:new I.default(n.default.get(t[2],l)).addDefaultProperties(["statelessSessionsEnabled"]),values:new x.default(n.default.get(t[2],"values.general",{}))})];e.subviews[0].render().$el.appendTo(e.$el.find("[data-realm-form]"));e.subviews[0].subview.jsonEditor.options["show_errors"]="never";e.subviews[1].render().$el.appendTo(e.$el.find("[data-realm-stateless-session-form]"));(new h.default).render(0);L()},function(e){k.default.addMessage({type:k.default.TYPE_DANGER,response:e})})})},returnBack:function e(){this.data.newEntity?F.default.routeTo(F.default.configuration.routes.realms,{args:[],trigger:true}):F.default.routeTo(F.default.configuration.routes.realmDefault,{args:[encodeURIComponent(this.data.realmPath)],trigger:true})},onDataChange:function e(){this.toggleSubmitButton(Q())},handleSave:function e(t){var a=this;t.preventDefault();this.toggleSubmitButton(false);var r=function e(t){k.default.addMessage({type:k.default.TYPE_DANGER,response:t})};var l=this.subviews[0].getData();var o=n.default.cloneDeep(l);o.aliases=n.default.union(o.realmAliases,o.dnsAliases);delete o.realmAliases;delete o.dnsAliases;var s=this.subviews[1].getData();var u=this.data.newEntity?q.default.realms.create(o):q.default.realms.update(o);u.then(function(e){var t="/"===e.name;var r="/"===e.parentPath;var n=void 0;n=t?"/":r?"/"+e.name:e.parentPath+"/"+e.name;var o=(0,U.default)(e,l.dnsAliases,a.originalDnsAliases).then(function(){a.originalDnsAliases=K(e.aliases)},function(){k.default.addMessage({type:k.default.TYPE_DANGER,message:i.default.t("console.realms.edit.errors.fqdnMap")})});var u=j.default.authentication.update(n,s).fail(function(){k.default.addMessage({type:k.default.TYPE_DANGER,message:i.default.t("console.realms.edit.errors.statelessSessions")})});var c=function e(){if(a.data.newEntity){a.data.newEntity=false;F.default.routeTo(F.default.configuration.routes.realmDefault,{args:[encodeURIComponent(n)],trigger:true})}else _.default.sendEvent(p.default.EVENT_DISPLAY_MESSAGE_REQUEST,"changesSaved")};Promise.all([o,u]).then(c,c)},r).always(function(){a.toggleSubmitButton(true)})},onDeleteClick:function e(t){t.preventDefault();D.default.showConfirmationBeforeDeleting({type:i.default.t("console.realms.edit.title")},n.default.bind(this.deleteRealm,this))},deleteRealm:function e(){var t=this;var a=function e(){F.default.routeTo(F.default.configuration.routes.realms,{args:[],trigger:true});_.default.sendEvent(p.default.EVENT_DISPLAY_MESSAGE_REQUEST,"changesSaved")};var r=function e(){k.default.addMessage({type:k.default.TYPE_DANGER,message:i.default.t("console.realms.edit.errors.fqdnMap")})};q.default.realms.remove(this.realmPath).then(function(){(0,U.default)(t.realmPath,[],t.originalDnsAliases).then(a,function(){r();a()})},function(e){e&&409===e.status?k.default.addMessage({message:i.default.t("console.realms.parentRealmCannotDeleted"),type:k.default.TYPE_DANGER}):k.default.addMessage({response:e,type:k.default.TYPE_DANGER})})},canRealmBeDeleted:function e(t){return"/"!==t},toggleSubmitButton:function e(t){this.$el.find("[data-save]").prop("disabled",!t)}});t.default=new X}}]);
//# sourceMappingURL=28.e49c5383e1.js.map