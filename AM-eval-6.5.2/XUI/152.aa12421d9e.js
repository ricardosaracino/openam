(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[152,11],{1314:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(6);var l=i(a);var n=r(1593);var s=i(n);var o=r(1561);var u=i(o);function i(e){return e&&e.__esModule?e:{default:e}}var d=s.default.extend({template:"user/uma/views/resource/StarredPageTemplate",render:function e(t,r){var a=this;u.default.labels.all().then(function(e){var t=l.default.find(e.result,function(e){return"starred"===e.name.toLowerCase()});t?a.renderGrid(a.createLabelCollection(t._id),a.createColumns("starred"),r):console.error('Unable to find "starred" label. Label should have been created by UI on first load.')})}});t.default=d},1535:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(19);var l=o(a);var n=r(1562);var s=o(n);function o(e){return e&&e.__esModule?e:{default:e}}s.default.HeaderCell.prototype.render=function(){this.$el.empty();var e=this.column,t=s.default.callByNeed(e.sortable(),e,this.collection),r;r=t?(0,l.default)("<a>").text(e.get("label")).append("<b class='sort-caret'></b>"):document.createTextNode(e.get("label"));this.$el.append(r);this.$el.attr("data-field",e.get("name"));this.$el.addClass(e.get("direction"));this.delegateEvents();return this};t.default=s.default},1546:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r(1552);var l=r(6);var n=y(l);var s=r(19);var o=y(s);var u=r(159);var i=y(u);var d=r(12);var c=y(d);var f=r(1535);var h=y(f);var p=r(560);var v=y(p);var m=r(73);var g=y(m);function y(e){return e&&e.__esModule?e:{default:e}}var b={};b.DatetimeAgoCell=h.default.Cell.extend({className:"date-time-ago-cell",formatter:{fromRaw:function e(t){return(0,c.default)(t).fromNow()}},render:function e(){b.DatetimeAgoCell.__super__.render.apply(this);this.$el.attr("title",(0,c.default)(this.model.get(this.column.get("name"))).format("Do MMMM YYYY, h:mm:ssa"));return this}});b.ArrayCell=h.default.Cell.extend({className:"array-formatter-cell",buildHtml:function e(t){var r="<ul>",a=0;for(;a<t.length;a++)n.default.isString(t[a])?r+="<li>"+t[a]+"</li>":r+="<li>"+JSON.stringify(t[a])+"</li>";r+="</ul>";return r},render:function e(){this.$el.empty();var t=this.model.get(this.column.attributes.name);this.$el.append(this.buildHtml(t));this.delegateEvents();return this}});b.ObjectCell=h.default.Cell.extend({className:"object-formatter-cell",render:function e(){this.$el.empty();var t=this.model.get(this.column.attributes.name),r='<dl class="dl-horizontal">',a;for(a in t)n.default.isString(t[a])?r+="<dt>"+a+"</dt><dd>"+t[a]+"</dd>":r+="<dt>"+a+"</dt><dd>"+JSON.stringify(t[a])+"</dd>";r+="</dl>";this.$el.append(r);this.delegateEvents();return this}});b.UniversalIdToUsername=h.default.Cell.extend({formatter:{fromRaw:function e(t){return t.substring(3,t.indexOf(",ou=user"))}},render:function e(){b.UniversalIdToUsername.__super__.render.apply(this);this.$el.attr("title",this.model.get(this.column.get("name")));return this}});b.ClickableRow=h.default.Row.extend({events:{click:"onClick",keyup:"onKeyup"},onKeyup:function e(t){13===t.keyCode&&this.callback&&this.callback(t)},onClick:function e(t){this.callback&&this.callback(t)}});b.TemplateCell=h.default.Cell.extend({className:"template-cell",render:function e(){var t=this.template(this.model);this.$el.html(t);this.rendered&&this.rendered();this.delegateEvents();return this}});b.ClassHeaderCell=h.default.HeaderCell.extend({className:"",render:function e(){b.ClassHeaderCell.__super__.render.apply(this);this.delegateEvents();return this}});b.UriExtCell=h.default.UriCell.extend({events:{click:"gotoUrl"},render:function e(){this.$el.empty();var t=this.model.get(this.column.get("name")),r=this.formatter.fromRaw(t,this.model),a=n.default.isFunction(this.column.get("href"))?this.column.get("href")(t,r,this.model):this.column.get("href");this.$el.append((0,o.default)("<a>",{href:a||t,title:this.title||r}).text(r));if(a){this.$el.data("href",a);this.$el.prop("title",this.title||r)}this.delegateEvents();return this},gotoUrl:function e(t){t.preventDefault();var r=(0,o.default)(t.currentTarget).data("href");g.default.navigate(r,{trigger:true})}});b.FilterHeaderCell=h.default.HeaderCell.extend({className:"filter-header-cell enable-pointer",render:function e(){var t=new h.default.Extension.ThemeableServerSideFilter({name:this.column.get("name"),placeholder:o.default.t("common.form.filter"),collection:this.collection});this.addClassName&&this.$el.addClass(this.addClassName);this.collection.state.filters=this.collection.state.filters?this.collection.state.filters:[];this.collection.state.filters.push(t);b.FilterHeaderCell.__super__.render.apply(this);this.$el.prepend(t.render().el);return this}});b.queryFilter=function(e){void 0===e&&(e={});var t=[],r=e._queryFilter||[],a=function(){return e&&e.filterName&&"eq"===e.filterName?function(e,t){return e+"+eq+"+encodeURIComponent('"*'+t+'*"')}:function(e,t){return e+"+co+"+encodeURIComponent('"'+t+'"')}}();n.default.each(this.state.filters,function(e){""!==e.query()&&t.push(a(e.name,e.query()))});t=t.concat(r);return 0===t.length||t.join("+AND+")};b.parseState=function(e){this.state.totalRecords||(this.state.totalRecords=e.remainingPagedResults+e.resultCount);this.state.totalPages||(this.state.totalPages=Math.ceil(this.state.totalRecords/this.state.pageSize));return this.state};b.pagedResultsOffset=function(){return(this.state.currentPage-1)*this.state.pageSize};b.sortKeys=function(){return 1===this.state.order?"-"+this.state.sortKey:this.state.sortKey};b.sync=function(e,t,r){var a=[],l=["_pageSize","_pagedResultsOffset","_sortKeys"];"*"===r.data._queryId&&true===r.data._queryFilter?l.push("_queryId"):l.push("_queryFilter");n.default.forIn(r.data,function(e,t){n.default.includes(l,t)&&a.push(t+"="+e)});r.data=a.join("&");r.processData=false;r.beforeSend||(r.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=1.0")});r.error=function(e){v.default.addMessage({type:v.default.TYPE_DANGER,response:e})};return i.default.sync(e,t,r)};b.parseRecords=function(e){return e.result};b.getQueryParams=function(e){e=e||{};return{_sortKeys:this.sortKeys,_queryFilter:function t(){return b.queryFilter.call(this,e)},pageSize:"_pageSize",_pagedResultsOffset:this.pagedResultsOffset}};b.doubleSortFix=function(e){var t=e.cid,r=e.collection.filter(function(e){return e.cid!==t});n.default.each(r,function(e){e.set("direction",null)})};b.getState=function(e){var t={pageSize:20,sortKey:"name"};e&&"object"===("undefined"===typeof e?"undefined":a(e))&&n.default.extend(t,e);return t};t.default=b},1550:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(6);var l=i(a);var n=r(37);var s=i(n);var o=r(63);var u=i(o);function i(e){return e&&e.__esModule?e:{default:e}}var d={};d.decorateURLWithOverrideRealm=function(e){var t=d.getOverrideRealm(),r,a,l;if(t){if(-1!==e.indexOf("realm="))return e;a=e.indexOf("#");if(-1!==a){l=e.slice(a);e=e.slice(0,a)}r=-1===e.indexOf("?")?"?":"&";e=""+e+r+"realm="+t;l&&(e+=l)}return e};d.decorateURIWithRealm=function(e){e=d.decorateURIWithSubRealm(e);e=d.decorateURLWithOverrideRealm(e);return e};d.decorateURIWithSubRealm=function(e){var t=s.default.globalData,r=t&&t.auth?t.auth.subRealm:"",a=r?r+"/":"";t&&t.auth&&(void 0===t.auth.subRealm||null===t.auth.subRealm)&&console.warn("Unable to decorate URI, Configuration.globalData.auth.subRealm not yet set");e=e.replace("__subrealm__/",a);return e};d.getRealm=function(){var e=d.getOverrideRealm()||d.getSubRealm();return"/"===e.substring(0,1)?e.substring(1):e};d.getOverrideRealm=function(){var e=u.default.parseQueryString(u.default.getCurrentQueryString()).realm,t=u.default.parseQueryString(u.default.getCurrentFragmentQueryString()).realm;return e||t};d.getSubRealm=function(){var e=u.default.getCurrentFragment().split("/"),t=e.shift().split("&")[0],r=["login","passwordReset","continuePasswordReset","register","continueRegister"],a;if(t&&l.default.includes(r,t)){a=e.join("/").split("&")[0];a="/"===a.slice(-1)?a.slice(0,-1):a}else a=s.default.globalData.auth.subRealm?s.default.globalData.auth.subRealm:"";return a};d.encodeRealm=function(e){var t=[],r=e.split("/");l.default.each(r,function(e){""!==e&&t.push(encodeURIComponent(e))});return"/"+t.join("/")};t.default=d},1551:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(1603);var a=r(6);var l=i(a);var n=r(19);var s=i(n);var o=r(159);var u=i(o);function i(e){return e&&e.__esModule?e:{default:e}}t.default=u.default.RelationalModel.extend({parse:function e(t){l.default.isUrl(t.id)?t=this.resolve(t.id):t.name=t.id;return t},resolve:function e(t){var r={id:t,name:t};s.default.ajax({async:false,dataType:"json",success:function e(t){r.name=t.name;r["icon_uri"]=t.icon_uri},url:t});return r},sync:function e(t,r,a){a.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=1.0")};return u.default.Model.prototype.sync.call(this,t,r,a)}})},1552:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(1579);var a=r(6);var l=i(a);var n=r(19);var s=i(n);var o=r(1535);var u=i(o);function i(e){return e&&e.__esModule?e:{default:e}}u.default.Extension.ThemeableServerSideFilter=u.default.Extension.ServerSideFilter.extend({events:l.default.extend(u.default.Extension.ServerSideFilter.prototype.events,{"keyup input[type=search]":"keyupSearch"}),keyupSearch:function e(t){t.preventDefault();this.showClearButtonMaybe(t);this.minimumSearchChars&&(0,s.default)(t.target).val().length>=this.minimumSearchChars&&this.search(t)},className:"form-group has-feedback",template:function e(t){return'<input class="form-control input-sm" type="search" '+(t.placeholder?'placeholder="'+t.placeholder+'"':"")+' name="'+t.name+'" '+(t.value?'value="'+t.value+'"':"")+'/><a class="fa fa-times form-control-feedback" data-backgrid-action="clear" role="button" href="#"></a>'}});t.default=u.default.Extension.ThemeableServerSideFilter},1554:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(1588);var a=r(19);var l=o(a);var n=r(1535);var s=o(n);function o(e){return e&&e.__esModule?e:{default:e}}s.default.Extension.ThemeablePaginator=s.default.Extension.Paginator.extend({className:"text-center",controls:{rewind:{label:"&laquo;",title:l.default.t("common.grid.pagination.first")},back:{label:"&lsaquo;",title:l.default.t("common.grid.pagination.previous")},forward:{label:"&rsaquo;",title:l.default.t("common.grid.pagination.next")},fastForward:{label:"&raquo;",title:l.default.t("common.grid.pagination.last")}},ulClassName:"pagination",render:function e(){s.default.Extension.Paginator.prototype.render.call(this);this.ulClassName&&this.$el.find("ul").addClass(this.ulClassName);return this}});t.default=s.default.Extension.ThemeablePaginator},1560:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(159);var l=o(a);var n=r(1551);var s=o(n);function o(e){return e&&e.__esModule?e:{default:e}}t.default=l.default.RelationalModel.extend({idAttribute:"subject",relations:[{type:l.default.HasMany,key:"scopes",relatedModel:s.default,includeInJSON:l.default.Model.prototype.idAttribute,parse:true}],validate:function e(t){if(!t.subject)return"no subject";if(!t.scopes||!t.scopes.length)return"no scopes"}})},1561:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(6);var l=h(a);var n=r(169);var s=h(n);var o=r(37);var u=h(o);var i=r(27);var d=h(i);var c=r(168);var f=h(c);function h(e){return e&&e.__esModule?e:{default:e}}var p=new s.default(""+d.default.host+d.default.context+"/json");p.getUmaConfig=function(){return p.serviceCall({url:(0,f.default)("/serverinfo/uma"),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){u.default.globalData.auth.uma=u.default.globalData.auth.uma||{};u.default.globalData.auth.uma.enabled=e.enabled;u.default.globalData.auth.uma.resharingMode=e.resharingMode;return e})};p.unshareAllResources=function(){var e=encodeURIComponent(u.default.loggedUser.get("username"));return p.serviceCall({url:(0,f.default)("/users/"+e+"/oauth2/resources/sets?_action=revokeAll"),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})};p.approveRequest=function(e,t){return p.serviceCall({url:(0,f.default)("/users/"+encodeURIComponent(u.default.loggedUser.get("username"))+"/uma/pendingrequests/"+e+"?_action=approve"),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify({scopes:t})})};p.denyRequest=function(e){return p.serviceCall({url:(0,f.default)("/users/"+encodeURIComponent(u.default.loggedUser.get("username"))+"/uma/pendingrequests/"+e+"?_action=deny"),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})};p.labels={all:function e(){return p.serviceCall({url:(0,f.default)("/users/"+encodeURIComponent(u.default.loggedUser.get("username"))+"/oauth2/resources/labels?_queryFilter=true"),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})},create:function e(t,r){return p.serviceCall({url:(0,f.default)("/users/"+encodeURIComponent(u.default.loggedUser.get("username"))+"/oauth2/resources/labels?_action=create"),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify({name:t,type:r})})},get:function e(t){return p.serviceCall({url:(0,f.default)("/users/"+encodeURIComponent(u.default.loggedUser.get("username"))+"/oauth2/resources/labels?_queryFilter=true"),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){return l.default.find(e.result,{_id:t})})},remove:function e(t){return p.serviceCall({url:(0,f.default)("/users/"+encodeURIComponent(u.default.loggedUser.get("username"))+"/oauth2/resources/labels/"+encodeURIComponent(t)),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"DELETE"})}};t.default=p},1574:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(6);var l=b(a);var n=r(19);var s=b(n);var o=r(159);var u=b(o);var i=r(37);var d=b(i);var c=r(27);var f=b(c);var h=r(168);var p=b(h);var v=r(1581);var m=b(v);var g=r(1551);var y=b(g);function b(e){return e&&e.__esModule?e:{default:e}}t.default=u.default.RelationalModel.extend({fetch:function e(){var t=s.default.Deferred();u.default.RelationalModel.prototype.fetch.call(this,{success:function e(r){t.resolve(r)},error:function e(r,a){t.reject(a)}});return t.promise()},idAttribute:"_id",parse:function e(t){if(!t.policy){t.policy={};t.policy.permissions=[]}t.policy.policyId=t._id;t.scopes=l.default.map(t.scopes,function(e){return{id:e}});return t},relations:[{type:u.default.HasOne,key:"policy",relatedModel:m.default,parse:true},{type:u.default.HasMany,key:"scopes",relatedModel:y.default,includeInJSON:u.default.Model.prototype.idAttribute,parse:true}],toggleStarred:function e(t){var r=l.default.includes(this.get("labels"),t);r?this.set("labels",l.default.reject(this.get("labels"),function(e){return e===t})):this.get("labels").push(t)},urlRoot:""+f.default.host+f.default.context+"/json"+(0,p.default)("/users/"+d.default.loggedUser.get("username")+"/oauth2/resources/sets")})},1575:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(1531);var a=r(6);var l=I(a);var n=r(19);var s=I(n);var o=r(114);var u=I(o);var i=r(1535);var d=I(i);var c=r(1546);var f=I(c);var h=r(655);var p=I(h);var v=r(27);var m=I(v);var g=r(59);var y=I(g);var b=r(1550);var C=I(b);var _=r(1582);var S=I(_);var R=r(1560);var M=I(R);var P=r(1551);var x=I(P);var O=r(1574);var U=I(O);function I(e){return e&&e.__esModule?e:{default:e}}var E,w=/[?&]realm=/,A=/\/json\/users\/[^/]+\/uma\/policies/,j=/\/json\/users\/[^/]+\/oauth2\/resourcesets/;s.default.ajaxPrefilter(function(e){(A.test(e.url)||j.test(e.url))&&!w.test(e.url)&&C.default.getOverrideRealm()&&(e.url=C.default.decorateURLWithOverrideRealm(e.url))});E=u.default.extend({initialize:function e(){this.parentModel=null},template:"user/uma/views/share/CommonShare",events:{"click input#shareButton":"save"},enableOrDisableShareButton:function e(){var t=this.$el.find("#selectUser select")[0].selectize.getValue().length>0,r=this.$el.find("#selectPermission select")[0].selectize.getValue().length>0;this.$el.find("input#shareButton").prop("disabled",!(t&&r))},onParentModelError:function e(t,r){console.error("Unrecoverable load failure UMAResourceSetWithPolicy. "+r.responseJSON.code+" ("+r.responseJSON.reason+") "+r.responseJSON.message)},onParentModelSync:function e(t){t.get("policy").set("policyId",this.parentModel.id);this.render()},syncParentModel:function e(t){var r=!this.parentModel||t&&this.parentModel.id!==t;if(r){this.stopListening(this.parentModel);this.parentModel=U.default.findOrCreate({_id:t});this.listenTo(this.parentModel,"sync",this.onParentModelSync);this.listenTo(this.parentModel,"error",this.onParentModelError);this.parentModel.fetch()}return r},renderDialog:function e(t,r){var a=this,l=(0,s.default)("<div></div>"),n=t._id||t,o={type:p.default.TYPE_PRIMARY,title:s.default.t("uma.share.shareResource"),size:p.default.SIZE_WIDE,cssClass:"shareDialog",message:l,buttons:[{label:s.default.t("common.form.close"),cssClass:"btn-default",action:function e(t){t.close()}}],onshow:function e(){a.element=l;a.render(n,r)},onshown:function e(){a.renderShareCounter(r)}};this.toBeCreated=t.toBeCreated;this.afterShare=t.share;p.default.show(o)},render:function e(t,r){var a=this,l,n;t instanceof Array&&(t=t[0]);if(this.syncParentModel(t))return;this.data={};this.data.name=this.parentModel.get("name");this.data.icon=this.parentModel.get("icon_uri");this.data.scopes=this.parentModel.get("scopes").toJSON();l=this.parentModel.get("policy").get("permissions");this.data.permissions=l.toJSON();n=new d.default.Grid({columns:[{name:"subject",label:s.default.t("uma.resources.show.grid.0"),cell:"string",editable:false,headerCell:f.default.ClassHeaderCell.extend({className:"col-md-6"})},{name:"scopes",label:s.default.t("uma.resources.show.grid.2"),cell:d.default.Cell.extend({render:function e(){var t=this.model.get("scopes").pluck("name").join(", ");this.$el.empty();this.$el.append(t);this.delegateEvents();return this}}),editable:false,headerCell:f.default.ClassHeaderCell.extend({className:"col-md-6"})}],collection:l,emptyText:s.default.t("console.common.noResults"),className:"backgrid table"});this.parentRender(function(){a.renderUserOptions();a.renderPermissionOptions();a.renderShareCounter(r);a.$el.find("#advancedView").append(n.render().el);a.$el.find("#umaShareImage img").error(function(){(0,s.default)(this).parent().addClass("fa-file-image-o no-image")})})},renderPermissionOptions:function e(){var t=this;this.$el.find("#selectPermission select").selectize({plugins:["restore_on_backspace"],delimiter:false,persist:false,create:false,hideSelected:true,onChange:function e(){t.enableOrDisableShareButton()}})},renderUserOptions:function e(){var t=this;this.$el.find("#selectUser select").selectize({addPrecedence:true,create:true,onChange:function e(r){var a=t.parentModel.get("policy").get("permissions").findWhere({subject:r}),l,n=t.$el.find("#selectPermission select");if(a){l=a.get("scopes").pluck("name");n[0].selectize.focus();n[0].selectize.setValue(l)}t.enableOrDisableShareButton()}})},reset:function e(){this.$el.find("#selectUser select")[0].selectize.clear();this.$el.find("#selectPermission select")[0].selectize.clear();this.$el.find("input#shareButton").prop("disabled",true);this.renderShareCounter()},save:function e(){var t=this;var r=this.parentModel.get("policy").get("permissions"),a=this.$el.find("#selectUser select")[0].selectize.getValue(),n=l.default.each(this.$el.find("#selectPermission select")[0].selectize.getValue(),function(e){return x.default.find({id:e})}),s=[],o;l.default.forEach(a,function(e){var t=M.default.findOrCreate({subject:e,scopes:n});r.add(t);s.push(t)});o=this.parentModel.get("policy");this.toBeCreated&&(o.toBeCreated=this.toBeCreated);o.save().then(function(){y.default.sendEvent(m.default.EVENT_DISPLAY_MESSAGE_REQUEST,"policyCreatedSuccess");t.reset()},function(e){e.status&&500===e.status&&l.default.forEach(s,function(e){r.remove(e)});y.default.sendEvent(m.default.EVENT_DISPLAY_MESSAGE_REQUEST,"policyCreatedFail")}).always(function(){t.toBeCreated=false;t.afterShare&&t.afterShare()})},renderShareCounter:function e(t){var r=this.parentModel.get("policy"),a=r?r.get("permissions").length:0;S.default.render(a,t)}});t.default=E},1581:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(6);var l=v(a);var n=r(159);var s=v(n);var o=r(37);var u=v(o);var i=r(27);var d=v(i);var c=r(168);var f=v(c);var h=r(1560);var p=v(h);function v(e){return e&&e.__esModule?e:{default:e}}t.default=s.default.RelationalModel.extend({idAttribute:"policyId",toBeCreated:true,relations:[{type:s.default.HasMany,key:"permissions",relatedModel:p.default}],parse:function e(t){l.default.isEmpty(t.permissions)||(this.toBeCreated=false);return t},sync:function e(t,r,a){a=a||{};a.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=1.0")};if("update"===t.toLowerCase()&&true===r.toBeCreated){r.toBeCreated=false;a.headers={};a.headers["If-None-Match"]="*"}r.get("permissions").length||(r.toBeCreated=true);return s.default.Model.prototype.sync.call(this,t,r,a)},urlRoot:""+d.default.host+d.default.context+"/json"+(0,f.default)("/users/"+u.default.loggedUser.get("username")+"/uma/policies")})},1582:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(19);var l=o(a);var n=r(114);var s=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var u=s.default.extend({template:"user/uma/views/share/ShareCounter",element:"#shareCounter",render:function e(t,r){this.data.shareCount=t;this.data.shareInfo=this.getShareInfo(t);this.data.shareIcon=this.getShareIcon(t);this.parentRender(function(){r&&r()})},getShareInfo:function e(t){var r=t?{count:t}:{context:"none"};return l.default.t("uma.share.info",r)},getShareIcon:function e(t){var r="fa fa-lock";1===t?r="fa fa-user":t>1&&(r="fa fa-users");return r}});t.default=new u},1593:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(1572);r(1554);var a=r(19);var l=_(a);var n=r(159);var s=_(n);var o=r(114);var u=_(o);var i=r(1535);var d=_(i);var c=r(1546);var f=_(c);var h=r(1575);var p=_(h);var v=r(37);var m=_(v);var g=r(27);var y=_(g);var b=r(168);var C=_(b);function _(e){return e&&e.__esModule?e:{default:e}}var S=u.default.extend({createCollection:function e(t,r){var a=this;return s.default.PageableCollection.extend({url:y.default.context+"/json"+t,queryParams:f.default.getQueryParams({_sortKeys:f.default.sortKeys,_queryFilter:r,_pagedResultsOffset:f.default.pagedResultsOffset}),state:f.default.getState(),parseState:f.default.parseState,parseRecords:function e(t){t.result.length&&a.recordsPresent();return t.result},sync:f.default.sync})},createLabelCollection:function e(t){var r=[];t&&r.push('labels eq "'+t+'"');return this.createCollection((0,C.default)("/users/"+m.default.loggedUser.get("username")+"/oauth2/resources/sets"),r.map(encodeURIComponent))},createSetCollection:function e(t){var r=['resourceOwnerId eq "'+m.default.loggedUser.get("username")+'"'];t&&(r[0]="! "+r[0]);return this.createCollection((0,C.default)("/users/"+m.default.loggedUser.get("username")+"/oauth2/resources/sets"),r.map(encodeURIComponent))},createColumns:function e(t){return[{name:"name",label:l.default.t("uma.resources.grid.header.0"),cell:f.default.UriExtCell,headerCell:f.default.FilterHeaderCell,href:function e(r,a,l){return"#uma/resources/"+t+"/"+l.get("_id")},editable:false},{name:"resourceServer",label:l.default.t("uma.resources.grid.header.1"),cell:"string",editable:false,headerCell:f.default.ClassHeaderCell},{name:"type",label:l.default.t("uma.resources.grid.header.2"),cell:"string",headerCell:f.default.ClassHeaderCell,editable:false},{name:"share",label:l.default.t("uma.resources.grid.header.3"),cell:d.default.Cell.extend({className:"fr-col-btn-1 fa fa-share",events:{click:"share"},share:function e(){var t=this;var r=new p.default;r.renderDialog({_id:this.model.get("_id"),toBeCreated:this.model.toBeCreated,share:function e(){t.model.toBeCreated=false}})},render:function e(){this.$el.attr({title:l.default.t("uma.share.shareResource")});this.delegateEvents();return this}}),editable:false,sortable:false,headerCell:f.default.ClassHeaderCell}]},recordsPresent:function e(){},renderGrid:function e(t,r,a){var n=this,s,o;this.data.collection=new t;this.data.collection.on("backgrid:sort",f.default.doubleSortFix);s=new d.default.Grid({columns:r,className:"backgrid table",collection:this.data.collection,emptyText:l.default.t("console.common.noResults")});o=new d.default.Extension.ThemeablePaginator({collection:this.data.collection,windowSize:3});this.parentRender(function(){n.$el.find(".table-container").append(s.render().el);n.$el.find(".panel-body").append(o.render().el);n.data.collection.fetch({reset:true,processData:false}).then(function(){a&&a()})})}});t.default=S}}]);
//# sourceMappingURL=152.aa12421d9e.js.map