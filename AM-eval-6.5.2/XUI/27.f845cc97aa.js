(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27,268,269,270,291,292,360,362],{1184:function(e,t,a){var n=a(62);e.exports=(n["default"]||n).template({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){var r;return'<div class="cell-model-icon">\n    <span><i class="fa"></i></span>\n</div>\n<div class="cell-model-name">\n    '+e.escapeExpression(e.lambda(null!=(r=null!=t?t.attributes:t)?r.name:r,t))+"\n</div>\n"},useData:true})},1223:function(e,t,a){var n=a(62);e.exports=(n["default"]||n).template({1:function(e,t,a,n,l){return"disabled"},3:function(e,t,a,n,l){var r,i=e.escapeExpression;return'    <div class="form-group">\n        <label class="col-sm-2 control-label" for="appDescription">'+i((a.t||t&&t.t||a.helperMissing).call(null!=t?t:e.nullContext||{},"console.common.description",{name:"t",hash:{},data:l}))+'</label>\n\n        <div class="col-sm-9">\n            <textarea class="form-control" id="appDescription" data-field="description">'+i(e.lambda(null!=(r=null!=t?t.entity:t)?r.description:r,t))+"</textarea>\n        </div>\n    </div>\n"},5:function(e,t,a,n,l){var r,i=null!=t?t:e.nullContext||{},o=a.helperMissing,s="function",u=e.escapeExpression;return'                <option selected value="'+u((r=null!=(r=a.uuid||(null!=t?t.uuid:t))?r:o,typeof r===s?r.call(i,{name:"uuid",hash:{},data:l}):r))+'">'+u((r=null!=(r=a.name||(null!=t?t.name:t))?r:o,typeof r===s?r.call(i,{name:"name",hash:{},data:l}):r))+"</option>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){var r,i=null!=t?t:e.nullContext||{},o=a.helperMissing,s=e.escapeExpression,u=e.lambda;return'<div class="block clearfix form-horizontal">\n    <div class="form-group">\n        <label class="col-sm-2 control-label" for="appId">'+s((a.t||t&&t.t||o).call(i,"console.common.id",{name:"t",hash:{},data:l}))+'</label>\n\n        <div class="col-sm-9">\n            <input type="text" id="appId" class="form-control" value="'+s(u(null!=(r=null!=t?t.entity:t)?r.name:r,t))+'" data-field="name"\n                   autofocus required placeholder="'+s((a.t||t&&t.t||o).call(i,"common.form.validation.required",{name:"t",hash:{},data:l}))+'" name="entityId"\n                   '+(null!=(r=a.unless.call(i,null!=t?t.newEntity:t,{name:"unless",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?r:"")+'>\n        </div>\n    </div>\n    <div class="form-group">\n        <label class="col-sm-2 control-label" for="appName">'+s((a.t||t&&t.t||o).call(i,"console.common.name",{name:"t",hash:{},data:l}))+'</label>\n\n        <div class="col-sm-9">\n            <input type="text" id="appName" class="form-control" value="'+s(u(null!=(r=null!=t?t.entity:t)?r.displayName:r,t))+'" data-field="displayName"\n                   name="entityName">\n        </div>\n    </div>\n\n'+(null!=(r=a.unless.call(i,null!=t?t.newEntity:t,{name:"unless",hash:{},fn:e.program(3,l,0),inverse:e.noop,data:l}))?r:"")+'\n    <div class="form-group">\n        <label class="col-sm-2 control-label" for="resTypesSelection">\n            '+s((a.t||t&&t.t||o).call(i,"console.authorization.common.resourceTypes",{name:"t",hash:{},data:l}))+'\n        </label>\n\n        <div class="col-sm-9">\n            <select multiple class="selectize" id="resTypesSelection">\n                <option disabled selected value="">'+s((a.t||t&&t.t||o).call(i,"console.authorization.policySets.edit.addResourceTypes",{name:"t",hash:{},data:l}))+"</option>\n"+(null!=(r=a.each.call(i,null!=(r=null!=t?t.options:t)?r.selectedResourceTypes:r,{name:"each",hash:{},fn:e.program(5,l,0),inverse:e.noop,data:l}))?r:"")+'            </select>\n\n            <span class="input-helper-text">'+s((a.t||t&&t.t||o).call(i,"console.authorization.policySets.edit.selectResourceTypes",{name:"t",hash:{},data:l}))+"</span>\n        </div>\n    </div>\n</div>\n"},useData:true})},1224:function(e,t,a){var n=a(62);e.exports=(n["default"]||n).template({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){var r,i=null!=t?t:e.nullContext||{},o=a.helperMissing,s=e.escapeExpression;return(null!=(r=e.invokePartial(n["headers/_Title"],t,{name:"headers/_Title",hash:{title:"console.authorization.policySets.edit.new"},data:l,helpers:a,partials:n,decorators:e.decorators}))?r:"")+'\n<div class="panel panel-default panel-collapse fr-panel-with-border">\n    <div class="panel-body" id="policySetSettings"></div>\n    <div class="panel-footer clearfix">\n        <div class="pull-right">\n            <a class="btn btn-default" href="'+s((a.routeTo||t&&t.routeTo||o).call(i,"realmsPolicySets",null!=(r=null!=t?t.entity:t)?r.realm:r,{name:"routeTo",hash:{},data:l}))+'">'+s((a.t||t&&t.t||o).call(i,"common.form.cancel",{name:"t",hash:{},data:l}))+'</a>\n            <button data-save class="btn btn-primary" type="button">'+s((a.t||t&&t.t||o).call(i,"common.form.create",{name:"t",hash:{},data:l}))+"</button>\n        </div>\n    </div>\n</div>\n"},usePartial:true,useData:true})},1225:function(e,t,a){var n=a(62);e.exports=(n["default"]||n).template({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){var r,i=e.escapeExpression,o=null!=t?t:e.nullContext||{},s=a.helperMissing;return(null!=(r=e.invokePartial(n["headers/_TitleWithSubAndIcon"],t,{name:"headers/_TitleWithSubAndIcon",hash:{buttons:"templates/admin/views/realms/partials/_HeaderDeleteButton",icon:"folder",type:"console.authorization.common.policySet",title:null!=t?t.displayName:t},data:l,helpers:a,partials:n,decorators:e.decorators}))?r:"")+'\n<p class="page-description">'+i(e.lambda(null!=(r=null!=t?t.entity:t)?r.description:r,t))+'</p>\n\n<div class="tab-menu">\n    <ul class="nav nav-tabs" role="tablist">\n        <li class="active">\n            <a href="#policiesPanel" role="tab" data-toggle="tab" aria-expanded="true">\n                '+i((a.t||t&&t.t||s).call(o,"console.authorization.policySets.edit.policies",{name:"t",hash:{},data:l}))+'\n            </a>\n        </li>\n        <li>\n            <a href="#settingsPanel" role="tab" data-toggle="tab" aria-expanded="true">'+i((a.t||t&&t.t||s).call(o,"common.form.details",{name:"t",hash:{},data:l}))+'</a>\n        </li>\n    </ul>\n</div>\n\n<div class="panel panel-default fr-panel-tab">\n    <div class="panel-body tab-content">\n        <div role="tabpanel" class="tab-pane active" id="policiesPanel"></div>\n\n        <div role="tabpanel" class="tab-pane" id="settingsPanel">\n            <div id="policySetSettings"></div>\n\n            <div class="tab-pane-footer clearfix">\n                <div class="pull-right">\n                    <button data-save class="btn btn-primary" type="button">'+i((a.t||t&&t.t||s).call(o,"common.form.saveChanges",{name:"t",hash:{},data:l}))+"</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"},usePartial:true,useData:true})},1243:function(e,t,a){var n=a(62);e.exports=(n["default"]||n).template({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){return'<button type="button" class="btn btn-primary" data-add-entity>\n    <i class="fa fa-plus"></i> '+e.escapeExpression((a.t||t&&t.t||a.helperMissing).call(null!=t?t:e.nullContext||{},"console.authorization.policies.list.addNew",{name:"t",hash:{},data:l}))+"\n</button>\n"},useData:true})},1244:function(e,t,a){var n=a(62);e.exports=(n["default"]||n).template({1:function(e,t,a,n,l){return'    <div class="btn-toolbar" role="toolbar" aria-label="toolbar" data-grid-toolbar></div>\n'},3:function(e,t,a,n,l){return'    <div class="table-container"></div>\n    <div id="paginationContainer"></div>\n'},5:function(e,t,a,n,l){var r=null!=t?t:e.nullContext||{},i=a.helperMissing,o=e.escapeExpression;return'    <div class="call-to-action-block">\n        <h3>'+o((a.t||t&&t.t||i).call(r,"console.authorization.policies.list.noPolicies",{name:"t",hash:{},data:l}))+'</h3>\n        <button type="button" class="btn btn-primary" data-add-entity>\n            <i class="fa fa-plus"></i> '+o((a.t||t&&t.t||i).call(r,"console.authorization.policies.list.addNew",{name:"t",hash:{},data:l}))+"\n        </button>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){var r,i=null!=t?t:e.nullContext||{};return(null!=(r=a["if"].call(i,null!=(r=null!=t?t.items:t)?r.length:r,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?r:"")+'\n<p class="panel-description">'+e.escapeExpression((a.t||t&&t.t||a.helperMissing).call(i,"console.authorization.policies.list.description",{name:"t",hash:{},data:l}))+"</p>\n\n"+(null!=(r=a["if"].call(i,null!=(r=null!=t?t.items:t)?r.length:r,{name:"if",hash:{},fn:e.program(3,l,0),inverse:e.program(5,l,0),data:l}))?r:"")},useData:true})},1303:function(e,t,a){var n=a(62);e.exports=(n["default"]||n).template({1:function(e,t,a,n,l){return'    <span class="text-success"><i class="fa fa-check-circle"></i> '+e.escapeExpression((a.t||t&&t.t||a.helperMissing).call(null!=t?t:e.nullContext||{},"common.user.active",{name:"t",hash:{},data:l}))+"</span>\n"},3:function(e,t,a,n,l){return'    <span class="text-warning"><i class="fa fa-ban"></i> '+e.escapeExpression((a.t||t&&t.t||a.helperMissing).call(null!=t?t:e.nullContext||{},"common.user.inactive",{name:"t",hash:{},data:l}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){var r;return null!=(r=a["if"].call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.attributes:t)?r.active:r,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.program(3,l,0),data:l}))?r:""},useData:true})},1580:function(e,t,a){(function(e){!function(e){var t=function(){var t=[];var a=false;var n;var l=function(e){clearTimeout(n);n=setTimeout(r,100)};var r=function(){for(var e=0,a=t.length;e<a;e++)t[e].apply()};return{register:function(n){t.push(n);if(false===a){e(window).bind("resize",l);a=true}},unregister:function(e){for(var a=0,n=t.length;a<n;a++)if(t[a]==e){delete t[a];break}}}}();var a=function(a,n){this.element=e(a);this.dropdown=e('<li class="dropdown hide pull-right tabdrop"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+n.text+' <b class="caret"></b></a><ul class="dropdown-menu"></ul></li>').prependTo(this.element);this.element.parent().is(".tabs-below")&&this.dropdown.addClass("dropup");t.register(e.proxy(this.layout,this));this.layout()};a.prototype={constructor:a,layout:function(){var t=[];this.dropdown.removeClass("hide");this.element.append(this.dropdown.find("li")).find(">li").not(".tabdrop").each(function(){this.offsetTop>0&&t.push(this)});if(t.length>0){t=e(t);this.dropdown.find("ul").empty().append(t);1==this.dropdown.find(".active").length?this.dropdown.addClass("active"):this.dropdown.removeClass("active")}else this.dropdown.addClass("hide")}};e.fn.tabdrop=function(t){return this.each(function(){var n=e(this),l=n.data("tabdrop"),r="object"===typeof t&&t;l||n.data("tabdrop",l=new a(this,e.extend({},e.fn.tabdrop.defaults,r)));"string"==typeof t&&l[t]()})};e.fn.tabdrop.defaults={text:'<i class="icon-align-justify"></i>'};e.fn.tabdrop.Constructor=a}(e)}).call(this,a(19))},1596:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a(169);var l=f(n);var r=a(1578);var i=f(r);var o=a(27);var s=f(o);var u=a(168);var d=f(u);var c=a(1550);var p=f(c);function f(e){return e&&e.__esModule?e:{default:e}}var m=new l.default(""+s.default.host+s.default.context+"/json"),h=function e(){var t=i.default.getCurrentRealm();return"/"===t?"":p.default.encodeRealm(t)};m.getApplicationType=function(e){return m.serviceCall({url:(0,d.default)("/applicationtypes/"+e,{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getDecisionCombiners=function(){return m.serviceCall({url:(0,d.default)("/decisioncombiners/?_queryId=&_fields=title",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getEnvironmentConditions=function(){return m.serviceCall({url:(0,d.default)("/conditiontypes?_queryId=&_fields=title,logical,config",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getSubjectConditions=function(){return m.serviceCall({url:(0,d.default)("/subjecttypes?_queryId=&_fields=title,logical,config",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getAllUserAttributes=function(){return m.serviceCall({url:(0,d.default)("/subjectattributes?_queryFilter=true",{realm:h()}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.queryIdentities=function(e,t){return m.serviceCall({url:(0,d.default)("/"+e+"?_queryId="+t+"*",{realm:h()}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getUniversalId=function(e,t){return m.serviceCall({url:(0,d.default)("/"+t+"/"+e+"?_fields=universalid",{realm:h()}),headers:{"Cache-Control":"no-cache","Accept-API-Version":"protocol=1.0,resource=2.0"}})};m.getDataByType=function(e){return m.serviceCall({url:(0,d.default)("/"+e+"?_queryFilter=true",{realm:h()}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getScriptById=function(e){return m.serviceCall({url:(0,d.default)("/scripts/"+e,{realm:h()}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getAllRealms=function(){return m.serviceCall({url:(0,d.default)("/realms?_queryFilter=true",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.importPolicies=function(e){return m.serviceCall({serviceUrl:""+s.default.host+s.default.context,url:(0,d.default)("/xacml"+h()+"/policies",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:e})};m.listResourceTypes=function(){return m.serviceCall({url:(0,d.default)("/resourcetypes?_queryFilter=name+eq+"+encodeURIComponent('"^(?!Delegation Service$).*"'),{realm:h()}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};t.default=m},1608:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a(6);var l=c(n);var r=a(159);var i=c(r);var o=a(1570);var s=c(o);var u=a(1555);var d=c(u);function c(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.Model.extend({idAttribute:"name",urlRoot:d.default.substitute("__api__/applications"),defaults:function e(){return{name:null,displayName:null,description:"",resourceTypeUuids:[],realm:""}},parse:function e(t){l.default.isEmpty(t.displayName)?this.displayName=t.name:this.displayName=t.displayName;return t},validate:function e(t){if(""===t.name.trim())return"errorNoId";if(0===t.name.indexOf("#"))return"errorCantStartWithHash";if(l.default.isEmpty(t.resourceTypeUuids))return"applicationErrorNoResourceTypes"},sync:function e(t,a,n){n=n||{};n.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=2.0")};n.error=s.default.errorHandler;if(null===a.id){t="create";n.url=this.urlRoot()+"/?_action=create"}return i.default.Model.prototype.sync.call(this,t,a,n)}})},1656:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a(159);var l=u(n);var r=a(1570);var i=u(r);var o=a(1555);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}t.default=l.default.Model.extend({idAttribute:"name",urlRoot:s.default.substitute("__api__/policies"),defaults:function e(){return{name:null,description:"",resources:[],actionValues:{}}},validate:function e(t){if(""===t.name.trim())return"errorNoName";if(0===t.name.indexOf("#"))return"errorCantStartWithHash";if(0===t.resources.length)return"policyErrorNoResources"},sync:function e(t,a,n){n=n||{};n.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=2.0")};n.error=i.default.errorHandler;if(null===a.id){t="create";n.url=this.urlRoot()+"/?_action=create"}return l.default.Model.prototype.sync.call(this,t,a,n)}})},1864:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});a(1572);a(1554);var n=a(6);var l=V(n);var r=a(19);var i=V(r);var o=a(159);var s=V(o);var u=a(1657);var d=V(u);var c=a(1535);var p=V(c);var f=a(1546);var m=V(f);var h=a(27);var v=V(h);var y=a(59);var b=V(y);var g=a(1184);var C=V(g);var P=a(1244);var T=V(P);var x=a(1243);var S=V(x);var _=a(1656);var A=V(_);var E=a(73);var I=V(E);var w=a(1183);var R=V(w);var M=a(1303);var N=V(M);var k=a(1555);var D=V(k);function V(e){return e&&e.__esModule?e:{default:e}}var z=d.default.extend({element:"#policiesPanel",template:T.default,toolbarTemplate:S.default,events:{"click [data-add-entity]":"addNewPolicy"},render:function e(t,a){var n=this,r,o,u,d,c;l.default.extend(this.data,t);r=s.default.PageableCollection.extend({url:D.default.substitute("__api__/policies"),model:A.default,state:m.default.getState(),queryParams:m.default.getQueryParams({filterName:"eq",_queryFilter:['applicationName+eq+"'+encodeURIComponent(this.data.policySetModel.id)+'"']}),parseState:m.default.parseState,parseRecords:m.default.parseRecords,sync:function e(t,a,n){n.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=2.0")};return m.default.sync(t,a,n)}});c=m.default.ClickableRow.extend({callback:function e(t){var a=(0,i.default)(t.target);if(a.parents().hasClass("fr-col-btn-2"))return;I.default.routeTo(I.default.configuration.routes.realmsPolicyEdit,{args:l.default.map([n.data.realmPath,n.data.policySetModel.id,this.model.id],encodeURIComponent),trigger:true})}});o=[{name:"name",label:i.default.t("console.authorization.policies.list.grid.0"),cell:m.default.TemplateCell.extend({iconClass:"fa-gavel",template:C.default,rendered:function e(){this.$el.find("i.fa").addClass(this.iconClass)}}),headerCell:m.default.FilterHeaderCell,sortType:"toggle",editable:false},{name:"active",label:i.default.t("console.authorization.policies.list.grid.1"),cell:m.default.TemplateCell.extend({template:N.default}),sortable:false,editable:false},{name:"",cell:m.default.TemplateCell.extend({className:"fr-col-btn-2",template:R.default,events:{"click [data-edit-item]":"editItem","click [data-delete-item]":"deleteItem"},editItem:function e(){I.default.routeTo(I.default.configuration.routes.realmsPolicyEdit,{args:l.default.map([n.data.realmPath,n.data.policySetModel.id,this.model.id],encodeURIComponent),trigger:true})},deleteItem:function e(t){n.onDeleteClick(t,{type:i.default.t("console.authorization.common.policy")},this.model.id,function(){b.default.sendEvent(v.default.EVENT_CHANGE_VIEW,{route:I.default.currentRoute,args:l.default.map([n.data.realmPath,n.data.policySetModel.id],encodeURIComponent)})})}}),sortable:false,editable:false}];this.data.items=new r;u=new p.default.Grid({columns:o,row:c,collection:n.data.items,className:"backgrid table table-hover",emptyText:i.default.t("console.common.noResults")});d=new p.default.Extension.ThemeablePaginator({collection:n.data.items,windowSize:3});this.bindDefaultHandlers();this.data.items.fetch({reset:true}).then(function(){n.parentRender(function(){if(n.data.items.length){n.renderToolbar();n.$el.find(".table-container").append(u.render().el);n.$el.find("#paginationContainer").append(d.render().el)}a&&a()})})},addNewPolicy:function e(){I.default.routeTo(I.default.configuration.routes.realmsPolicyNew,{args:l.default.map([this.data.realmPath,this.data.policySetModel.id],encodeURIComponent),trigger:true})}});t.default=new z},883:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){var a=[];var n=true;var l=false;var r=void 0;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=true){a.push(o.value);if(t&&a.length===t)break}}catch(e){l=true;r=e}finally{try{!n&&i["return"]&&i["return"]()}finally{if(l)throw r}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();a(1580);a(1531);var l=a(6);var r=N(l);var i=a(19);var o=N(i);var s=a(114);var u=N(s);var d=a(27);var c=N(d);var p=a(1225);var f=N(p);var m=a(59);var h=N(m);var v=a(1533);var y=N(v);var b=a(560);var g=N(b);var C=a(1224);var P=N(C);var T=a(1596);var x=N(T);var S=a(1864);var _=N(S);var A=a(1608);var E=N(A);var I=a(1223);var w=N(I);var R=a(73);var M=N(R);function N(e){return e&&e.__esModule?e:{default:e}}t.default=u.default.extend({APPLICATION_TYPE:"iPlanetAMWebAgentService",validationFields:["name","resourceTypeUuids"],events:{"click [data-save]":"submitForm","click [data-delete]":"onDeleteClick"},initialize:function e(){u.default.prototype.initialize.call(this);this.model=null},onModelSync:function e(){this.renderAfterSyncModel()},render:function e(t,a){var n=t[1];this.realmPath=t[0];a&&(this.renderCallback=a);this.appTypePromise=x.default.getApplicationType(this.APPLICATION_TYPE);this.envConditionsPromise=x.default.getEnvironmentConditions();this.subjConditionsPromise=x.default.getSubjectConditions();this.decisionCombinersPromise=x.default.getDecisionCombiners();this.resourceTypesPromise=x.default.listResourceTypes();if(n){this.template=f.default;this.data.headerActions=[{actionPartial:"form/_Button",data:"delete",title:"common.form.delete",icon:"fa-times"}];this.model=new E.default({name:n});this.listenTo(this.model,"sync",this.onModelSync);this.model.fetch()}else{this.data.newEntity=true;this.template=P.default;this.model=new E.default;this.listenTo(this.model,"sync",this.onModelSync);this.renderAfterSyncModel()}},renderAfterSyncModel:function e(){this.data.entity=this.model.attributes;this.data.displayName=this.model.displayName;this.data.entity.realm||(this.data.entity.realm=this.realmPath);this.renderApplication()},renderApplication:function e(){var t=this,a=function e(){t.parentRender(function(){_.default.render({realmPath:t.realmPath,policySetModel:t.model},function(){t.$el.find(".tab-menu .nav-tabs").tabdrop();var e=(0,w.default)(t.data);t.$el.find("#policySetSettings").append(e);t.populateResourceTypes();y.default.setActiveTab(t);t.$el.find("#policySetSettings [autofocus]").focus();t.renderCallback&&t.renderCallback()})})},l=function e(a){var n={};n.allResourceTypes=a;n.availableResourceTypes=r.default.filter(a,function(e){return!r.default.includes(t.data.entity.resourceTypeUuids,e.uuid)});n.selectedResourceTypes=r.default.findByValues(n.allResourceTypes,"uuid",t.data.entity.resourceTypeUuids);n.selectedResourceTypesInitial=r.default.clone(n.selectedResourceTypes);return n};this.model.id?this.resourceTypesPromise.then(function(e){r.default.extend(t.data,{options:l(e.result)});a()}):Promise.all([this.envConditionsPromise,this.subjConditionsPromise,this.decisionCombinersPromise,this.resourceTypesPromise]).then(function(e){var i=n(e,4),o=i[0],s=i[1],u=i[2],d=i[3];t.data.entity.applicationType=t.APPLICATION_TYPE;t.processConditions(t.data,o.result,s.result);t.data.entity.entitlementCombiner=u.result.title;r.default.extend(t.data,{options:l(d.result)});a()})},populateResourceTypes:function e(){var t=this;this.resTypesSelection=this.$el.find("#resTypesSelection").selectize({sortField:"name",valueField:"uuid",labelField:"name",searchField:"name",options:this.data.options.allResourceTypes,onChange:function e(a){t.data.entity.resourceTypeUuids=a}})},processConditions:function e(t,a,n){if(!t.entityId){t.entity.conditions=this.populateConditions(a,a);t.entity.subjects=this.populateConditions(n,n)}},populateConditions:function e(t,a){var n=[];r.default.each(a,function(e){n.push(e.title)});return n},submitForm:function e(t){t.preventDefault();var a=this,n,l=r.default.clone(this.model.attributes);this.updateFields();this.activeTabId=this.$el.find(".tab-menu li.active a").attr("href");r.default.extend(this.model.attributes,this.data.entity);n=this.model.save();if(n)n.then(function(){a.data.newEntity?M.default.routeTo(M.default.configuration.routes.realmsPolicySetEdit,{args:r.default.map([a.realmPath,a.model.id],encodeURIComponent),trigger:true}):h.default.sendEvent(c.default.EVENT_DISPLAY_MESSAGE_REQUEST,"changesSaved")});else{r.default.extend(this.model.attributes,l);h.default.sendEvent(c.default.EVENT_DISPLAY_MESSAGE_REQUEST,this.model.validationError)}},onDeleteClick:function e(t){t.preventDefault();y.default.showConfirmationBeforeDeleting({type:o.default.t("console.authorization.common.policySet")},r.default.bind(this.deletePolicySet,this))},deletePolicySet:function e(){var t=this,a=function e(){M.default.routeTo(M.default.configuration.routes.realmsPolicySets,{args:[encodeURIComponent(t.realmPath)],trigger:true});h.default.sendEvent(c.default.EVENT_DISPLAY_MESSAGE_REQUEST,"changesSaved")},n=function e(t,a){g.default.addMessage({response:a,type:g.default.TYPE_DANGER})};this.model.destroy({success:a,error:n,wait:true})},updateFields:function e(){var t=this;var a=this.$el.find("[data-field]");r.default.each(a,function(e){var a=e.getAttribute("data-field");"checkbox"===e.type?e.checked&&t.data.entity[a].push(e.value):t.data.entity[a]=r.default.trim(e.value)})}})}}]);
//# sourceMappingURL=27.f845cc97aa.js.map