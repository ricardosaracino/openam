(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[150],{1312:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});a(1572);a(1554);var r=a(6);var l=C(r);var n=a(19);var s=C(n);var i=a(159);var o=C(i);var u=a(114);var d=C(u);var f=a(1535);var c=C(f);var h=a(1546);var m=C(h);var p=a(37);var g=C(p);var v=a(27);var y=C(v);var b=a(168);var _=C(b);function C(e){return e&&e.__esModule?e:{default:e}}var S=d.default.extend({template:"user/uma/views/history/ListHistory",baseTemplate:"common/DefaultBaseTemplate",events:{},render:function e(){var t=this;var a=new(o.default.PageableCollection.extend({url:y.default.context+"/json"+(0,_.default)("/users/"+g.default.loggedUser.get("username")+"/uma/auditHistory"),state:{pageSize:10,sortKey:"eventTime",order:1},queryParams:{pageSize:"_pageSize",_sortKeys:m.default.sortKeys,_queryFilter:m.default.queryFilter,_pagedResultsOffset:m.default.pagedResultsOffset},parseState:m.default.parseState,parseRecords:m.default.parseRecords,sync:m.default.sync}));var r=new c.default.Grid({columns:[{name:"requestingPartyName",label:s.default.t("uma.history.grid.header.0"),headerCell:m.default.FilterHeaderCell,cell:"string",editable:false,sortType:"toggle"},{name:"resourceSetName",label:s.default.t("uma.history.grid.header.1"),headerCell:m.default.FilterHeaderCell,cell:m.default.UriExtCell,href:function e(t,a,r){return"#uma/resources/myresources/all/"+encodeURIComponent(r.get("resourceSetId"))},editable:false,sortType:"toggle"},{name:"type",label:s.default.t("uma.history.grid.header.2"),cell:"string",formatter:l.default.extend({},c.default.CellFormatter.prototype,{fromRaw:function e(t){return s.default.t("uma.history.grid.types."+t.toLowerCase())}}),editable:false,sortType:"toggle"},{name:"eventTime",label:s.default.t("uma.history.grid.header.3"),cell:m.default.DatetimeAgoCell,editable:false,sortType:"toggle"}],emptyText:s.default.t("console.common.noResults"),className:"backgrid table",collection:a});a.on("backgrid:sort",m.default.doubleSortFix);var n=new c.default.Extension.ThemeablePaginator({collection:a,windowSize:3});this.parentRender(function(){t.$el.find(".table-container").append(r.render().el);t.$el.find(".panel-body").append(n.render().el);a.fetch({processData:false,reset:true})})}});t.default=new S},1535:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(19);var l=i(r);var n=a(1562);var s=i(n);function i(e){return e&&e.__esModule?e:{default:e}}s.default.HeaderCell.prototype.render=function(){this.$el.empty();var e=this.column,t=s.default.callByNeed(e.sortable(),e,this.collection),a;a=t?(0,l.default)("<a>").text(e.get("label")).append("<b class='sort-caret'></b>"):document.createTextNode(e.get("label"));this.$el.append(a);this.$el.attr("data-field",e.get("name"));this.$el.addClass(e.get("direction"));this.delegateEvents();return this};t.default=s.default},1546:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a(1552);var l=a(6);var n=y(l);var s=a(19);var i=y(s);var o=a(159);var u=y(o);var d=a(12);var f=y(d);var c=a(1535);var h=y(c);var m=a(560);var p=y(m);var g=a(73);var v=y(g);function y(e){return e&&e.__esModule?e:{default:e}}var b={};b.DatetimeAgoCell=h.default.Cell.extend({className:"date-time-ago-cell",formatter:{fromRaw:function e(t){return(0,f.default)(t).fromNow()}},render:function e(){b.DatetimeAgoCell.__super__.render.apply(this);this.$el.attr("title",(0,f.default)(this.model.get(this.column.get("name"))).format("Do MMMM YYYY, h:mm:ssa"));return this}});b.ArrayCell=h.default.Cell.extend({className:"array-formatter-cell",buildHtml:function e(t){var a="<ul>",r=0;for(;r<t.length;r++)n.default.isString(t[r])?a+="<li>"+t[r]+"</li>":a+="<li>"+JSON.stringify(t[r])+"</li>";a+="</ul>";return a},render:function e(){this.$el.empty();var t=this.model.get(this.column.attributes.name);this.$el.append(this.buildHtml(t));this.delegateEvents();return this}});b.ObjectCell=h.default.Cell.extend({className:"object-formatter-cell",render:function e(){this.$el.empty();var t=this.model.get(this.column.attributes.name),a='<dl class="dl-horizontal">',r;for(r in t)n.default.isString(t[r])?a+="<dt>"+r+"</dt><dd>"+t[r]+"</dd>":a+="<dt>"+r+"</dt><dd>"+JSON.stringify(t[r])+"</dd>";a+="</dl>";this.$el.append(a);this.delegateEvents();return this}});b.UniversalIdToUsername=h.default.Cell.extend({formatter:{fromRaw:function e(t){return t.substring(3,t.indexOf(",ou=user"))}},render:function e(){b.UniversalIdToUsername.__super__.render.apply(this);this.$el.attr("title",this.model.get(this.column.get("name")));return this}});b.ClickableRow=h.default.Row.extend({events:{click:"onClick",keyup:"onKeyup"},onKeyup:function e(t){13===t.keyCode&&this.callback&&this.callback(t)},onClick:function e(t){this.callback&&this.callback(t)}});b.TemplateCell=h.default.Cell.extend({className:"template-cell",render:function e(){var t=this.template(this.model);this.$el.html(t);this.rendered&&this.rendered();this.delegateEvents();return this}});b.ClassHeaderCell=h.default.HeaderCell.extend({className:"",render:function e(){b.ClassHeaderCell.__super__.render.apply(this);this.delegateEvents();return this}});b.UriExtCell=h.default.UriCell.extend({events:{click:"gotoUrl"},render:function e(){this.$el.empty();var t=this.model.get(this.column.get("name")),a=this.formatter.fromRaw(t,this.model),r=n.default.isFunction(this.column.get("href"))?this.column.get("href")(t,a,this.model):this.column.get("href");this.$el.append((0,i.default)("<a>",{href:r||t,title:this.title||a}).text(a));if(r){this.$el.data("href",r);this.$el.prop("title",this.title||a)}this.delegateEvents();return this},gotoUrl:function e(t){t.preventDefault();var a=(0,i.default)(t.currentTarget).data("href");v.default.navigate(a,{trigger:true})}});b.FilterHeaderCell=h.default.HeaderCell.extend({className:"filter-header-cell enable-pointer",render:function e(){var t=new h.default.Extension.ThemeableServerSideFilter({name:this.column.get("name"),placeholder:i.default.t("common.form.filter"),collection:this.collection});this.addClassName&&this.$el.addClass(this.addClassName);this.collection.state.filters=this.collection.state.filters?this.collection.state.filters:[];this.collection.state.filters.push(t);b.FilterHeaderCell.__super__.render.apply(this);this.$el.prepend(t.render().el);return this}});b.queryFilter=function(e){void 0===e&&(e={});var t=[],a=e._queryFilter||[],r=function(){return e&&e.filterName&&"eq"===e.filterName?function(e,t){return e+"+eq+"+encodeURIComponent('"*'+t+'*"')}:function(e,t){return e+"+co+"+encodeURIComponent('"'+t+'"')}}();n.default.each(this.state.filters,function(e){""!==e.query()&&t.push(r(e.name,e.query()))});t=t.concat(a);return 0===t.length||t.join("+AND+")};b.parseState=function(e){this.state.totalRecords||(this.state.totalRecords=e.remainingPagedResults+e.resultCount);this.state.totalPages||(this.state.totalPages=Math.ceil(this.state.totalRecords/this.state.pageSize));return this.state};b.pagedResultsOffset=function(){return(this.state.currentPage-1)*this.state.pageSize};b.sortKeys=function(){return 1===this.state.order?"-"+this.state.sortKey:this.state.sortKey};b.sync=function(e,t,a){var r=[],l=["_pageSize","_pagedResultsOffset","_sortKeys"];"*"===a.data._queryId&&true===a.data._queryFilter?l.push("_queryId"):l.push("_queryFilter");n.default.forIn(a.data,function(e,t){n.default.includes(l,t)&&r.push(t+"="+e)});a.data=r.join("&");a.processData=false;a.beforeSend||(a.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=1.0")});a.error=function(e){p.default.addMessage({type:p.default.TYPE_DANGER,response:e})};return u.default.sync(e,t,a)};b.parseRecords=function(e){return e.result};b.getQueryParams=function(e){e=e||{};return{_sortKeys:this.sortKeys,_queryFilter:function t(){return b.queryFilter.call(this,e)},pageSize:"_pageSize",_pagedResultsOffset:this.pagedResultsOffset}};b.doubleSortFix=function(e){var t=e.cid,a=e.collection.filter(function(e){return e.cid!==t});n.default.each(a,function(e){e.set("direction",null)})};b.getState=function(e){var t={pageSize:20,sortKey:"name"};e&&"object"===("undefined"===typeof e?"undefined":r(e))&&n.default.extend(t,e);return t};t.default=b},1552:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});a(1579);var r=a(6);var l=u(r);var n=a(19);var s=u(n);var i=a(1535);var o=u(i);function u(e){return e&&e.__esModule?e:{default:e}}o.default.Extension.ThemeableServerSideFilter=o.default.Extension.ServerSideFilter.extend({events:l.default.extend(o.default.Extension.ServerSideFilter.prototype.events,{"keyup input[type=search]":"keyupSearch"}),keyupSearch:function e(t){t.preventDefault();this.showClearButtonMaybe(t);this.minimumSearchChars&&(0,s.default)(t.target).val().length>=this.minimumSearchChars&&this.search(t)},className:"form-group has-feedback",template:function e(t){return'<input class="form-control input-sm" type="search" '+(t.placeholder?'placeholder="'+t.placeholder+'"':"")+' name="'+t.name+'" '+(t.value?'value="'+t.value+'"':"")+'/><a class="fa fa-times form-control-feedback" data-backgrid-action="clear" role="button" href="#"></a>'}});t.default=o.default.Extension.ThemeableServerSideFilter},1554:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});a(1588);var r=a(19);var l=i(r);var n=a(1535);var s=i(n);function i(e){return e&&e.__esModule?e:{default:e}}s.default.Extension.ThemeablePaginator=s.default.Extension.Paginator.extend({className:"text-center",controls:{rewind:{label:"&laquo;",title:l.default.t("common.grid.pagination.first")},back:{label:"&lsaquo;",title:l.default.t("common.grid.pagination.previous")},forward:{label:"&rsaquo;",title:l.default.t("common.grid.pagination.next")},fastForward:{label:"&raquo;",title:l.default.t("common.grid.pagination.last")}},ulClassName:"pagination",render:function e(){s.default.Extension.Paginator.prototype.render.call(this);this.ulClassName&&this.$el.find("ul").addClass(this.ulClassName);return this}});t.default=s.default.Extension.ThemeablePaginator}}]);
//# sourceMappingURL=150.b7db2c0e9e.js.map