(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[60],{1326:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(3);var o=r(6);var u=r(61);var s=r(0);var l=T(s);var c=r(1);var i=T(c);var f=r(1600);var d=r(185);var p=r(1527);var v=T(p);var m=r(1744);var h=T(m);var y=r(560);var g=T(y);var _=r(73);var b=T(_);var P=r(1526);var w=T(P);var C=r(1522);var S=T(C);var E=r(1521);var A=T(E);function T(e){return e&&e.__esModule?e:{default:e}}function I(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var u=t[a](o);var s=u.value}catch(e){r(e);return}if(!u.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=function(e){k(t,e);function t(e){O(this,t);var r=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isFetching:true};r.handleDelete=r.handleDelete.bind(r);r.handleEdit=r.handleEdit.bind(r);return r}n(t,[{key:"componentDidMount",value:function(){var e=I(regeneratorRuntime.mark(function e(){var t,r,n,a,u,s;return regeneratorRuntime.wrap(function e(l){while(1)switch(l.prev=l.next){case 0:t=this.props.router.params[0];l.prev=1;l.next=4;return(0,f.getCreatableTypes)(t);case 4:r=l.sent;n=r.result;a=(0,o.map)(n,function(e){return e._id});l.next=9;return Promise.all((0,o.map)(a,function(e){return(0,f.getAllByType)(t,e)}));case 9:u=l.sent;s=(0,o.reduce)(u,function(e,t){var r=t.result;return e.concat(r)},[]);this.props.setInstances(s);l.next=17;break;case 14:l.prev=14;l.t0=l["catch"](1);g.default.addMessage({response:l.t0,type:g.default.TYPE_DANGER});case 17:l.prev=17;this.setState({isFetching:false});return l.finish(17);case 20:case"end":return l.stop()}},e,this,[[1,14,17,20]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleDelete",value:function e(t){var r=this;var n=this.props.router.params[0];var a=this.props.stores.length===t.length;var s=a?(0,u.t)("console.secretStores.confirmDeleteAll",{count:t.length}):(0,u.t)("console.secretStores.confirmDeleteSelected",{count:t.length});(0,w.default)({message:s},I(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return(0,f.remove)(n,t);case 3:(0,o.forEach)(t,function(e){r.props.removeInstance(e._compositeId)});g.default.messages.displayMessageFromConfig("changesSaved");a.next=10;break;case 7:a.prev=7;a.t0=a["catch"](0);g.default.addMessage({response:a.t0,type:g.default.TYPE_DANGER});case 10:case"end":return a.stop()}},e,r,[[0,7]])})))}},{key:"handleEdit",value:function e(t){var r=this.props.router.params[0];var n=t._id;var a=t._type._id;b.default.routeTo(b.default.configuration.routes.realmsSecretStoresEdit,{args:(0,o.map)([r,a,n],encodeURIComponent),trigger:true})}},{key:"render",value:function e(){var t=this.props.router.params[0];var r=b.default.getLink(b.default.configuration.routes.realmsSecretStoresNew,[encodeURIComponent(t)]);return i.default.createElement(h.default,{isFetching:this.state.isFetching,items:this.props.stores,keyField:"_compositeId",newHref:"#"+r,onDelete:this.handleDelete,onRowClick:this.handleEdit})}}]);return t}(c.Component);j.propTypes={removeInstance:l.default.func.isRequired,router:A.default,setInstances:l.default.func.isRequired,stores:l.default.arrayOf(l.default.object).isRequired};j=(0,v.default)(j,function(e){return{stores:(0,d.withCompositeId)(e.remote.config.realm.secretStores.instances.list)}},function(e){return{removeInstance:(0,a.bindActionCreators)(d.remove,e),setInstances:(0,a.bindActionCreators)(d.set,e)}});j=(0,S.default)(j);t.default=j},1521:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var a=s(n);var o=r(0);var u=s(o);function s(e){return e&&e.__esModule?e:{default:e}}var l=u.default.shape({params:u.default.array.isRequired});t.default=l},1545:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var a=s(n);var o=r(7);var u=s(o);function s(e){return e&&e.__esModule?e:{default:e}}var l=function e(t,r,n){return a.default.createElement("span",{className:(0,u.default)({"am-table-icon-cell":true,"am-table-icon-cell-editable":r})},a.default.createElement("span",{className:"fa-stack fa-lg am-table-icon-cell-stack"},a.default.createElement("i",{className:"fa fa-circle fa-stack-2x text-primary"}),a.default.createElement("i",{className:"fa "+t+" fa-stack-1x fa-inverse"}))," ",a.default.createElement("span",null,n))};var c=function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(e){return l(t,r,e)}};t.default=c},1556:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=function e(t,r){return function(e,a,o,u){return t((0,n.get)(e,r),a,o,u)}};t.default=a},1600:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.create=p;t.get=v;t.getAllByType=m;t.getCreatableTypes=h;t.getCreatableTypesByType=y;t.getSchema=g;t.getInitialState=_;t.remove=b;t.update=P;var n=r(6);var a=r(169);var o=i(a);var u=r(27);var s=i(u);var l=r(168);var c=i(l);function i(e){return e&&e.__esModule?e:{default:e}}var f=new o.default(""+s.default.host+s.default.context+"/json");var d="/realm-config/secrets/stores";function p(e,t,r,n){return f.serviceCall({url:(0,c.default)(d+"/"+t+"/"+encodeURIComponent(n),{realm:e}),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0","If-None-Match":"*"},data:JSON.stringify(r)})}function v(e,t,r){return f.serviceCall({url:(0,c.default)(d+"/"+t+"/"+encodeURIComponent(r),{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true})}function m(e,t){return f.serviceCall({url:(0,c.default)(d+"/"+t+"?_queryFilter=true",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true})}function h(e){return f.serviceCall({url:(0,c.default)(d+"?_action=getCreatableTypes",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true,type:"POST"})}function y(e,t){return f.serviceCall({url:(0,c.default)(d+"/"+t+"?_action=getCreatableTypes",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true,type:"POST"})}function g(e,t){return f.serviceCall({url:(0,c.default)(d+"/"+t+"?_action=schema",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true,type:"POST"})}function _(e,t){function r(){return f.serviceCall({url:(0,c.default)(d+"/"+t+"?_action=template",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true,type:"POST"})}return Promise.all([g(e,t),r()]).then(function(e){return{schema:e[0],values:e[1]}})}function b(e,t){var r=(0,n.map)(t,function(t){return f.serviceCall({url:(0,c.default)(d+"/"+t._type._id+"/"+encodeURIComponent(t._id),{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"DELETE"})});return Promise.all(r)}function P(e,t,r,a){return f.serviceCall({url:(0,c.default)(d+"/"+t+"/"+encodeURIComponent(r),{realm:e}),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},data:JSON.stringify((0,n.omit)(a,"_rev"))})}},1744:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(6);var o=r(570);var u=r(61);var s=r(656);var l=r(0);var c=b(l);var i=r(1);var f=b(i);var d=r(1556);var p=b(d);var v=r(1545);var m=b(v);var h=r(1547);var y=b(h);var g=r(1529);var _=b(g);function b(e){return e&&e.__esModule?e:{default:e}}var P=function e(t){return f.default.createElement(i.Fragment,null,f.default.createElement(_.default,{title:(0,u.t)("console.secretStores.list.title")}),f.default.createElement(o.Panel,null,f.default.createElement(o.Panel.Body,null,f.default.createElement(y.default,n({},(0,a.omit)(t,"children"),{addButton:{title:(0,u.t)("console.secretStores.list.callToAction.button"),href:t.newHref},description:(0,u.t)("console.secretStores.list.callToAction.description"),onDelete:t.onDelete,onRowClick:t.onRowClick,title:(0,u.t)("console.secretStores.list.callToAction.title")}),f.default.createElement(s.TableHeaderColumn,{dataField:"_id",dataFormat:(0,m.default)("fa-eye"),dataSort:true},(0,u.t)("console.secretStores.list.grid.0")),f.default.createElement(s.TableHeaderColumn,{dataField:"_type",dataFormat:(0,p.default)(function(e){return e},"name")},(0,u.t)("console.secretStores.list.grid.1"))))))};P.propTypes={newHref:c.default.string.isRequired,onDelete:c.default.func.isRequired,onRowClick:c.default.func.isRequired};t.default=P}}]);
//# sourceMappingURL=60.ecedbe6e7a.js.map