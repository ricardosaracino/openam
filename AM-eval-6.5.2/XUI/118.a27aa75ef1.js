(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[118],{1384:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,a,r){a&&e(t.prototype,a);r&&e(t,r);return t}}();var n=a(6);var l=R(n);var s=a(570);var o=a(61);var u=a(1);var i=R(u);var c=a(603);var d=R(c);var f=a(1868);var p=a(1583);var v=a(1599);var h=R(v);var m=a(1626);var y=R(m);var b=a(1867);var _=R(b);var g=a(1529);var E=R(g);var S=a(1522);var O=R(S);var P=a(1521);var w=R(P);function R(e){return e&&e.__esModule?e:{default:e}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function C(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=l.default.debounce(function(e,t,a){l.default.isEmpty(t)?a(null,{options:[]}):(0,p.getByUsernameStartsWith)(e,t).then(function(e){a(null,{options:l.default.map(e,function(e){return{label:e,value:e}})})},function(e){return a(e.statusText)})},300);var T=function e(t){return(0,o.t)("console.sessions.search.searchForPrompt",{label:t})};var j=function(e){C(t,e);function t(e){k(this,t);var a=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleSelectAsyncOnChange=a.handleSelectAsyncOnChange.bind(a);a.handleInvalidateSessions=a.handleInvalidateSessions.bind(a);a.fetchSessionsByUsernameAndRealm=a.fetchSessionsByUsernameAndRealm.bind(a);a.state={sessions:[]};return a}r(t,[{key:"handleInvalidateSessions",value:function e(t,a){var r=this;var n=l.default.map(a,"sessionHandle");(0,f.invalidateByHandles)(n).then(function(){return r.fetchSessionsByUsernameAndRealm(t,r.state.username)})}},{key:"fetchSessionsByUsernameAndRealm",value:function e(t,a){var r=this;(0,f.getByRealmAndUsername)(t,a).then(function(e){r.setState({sessions:e})})}},{key:"handleSelectAsyncOnChange",value:function e(t,a){var r=l.default.get(a,"value");this.setState({sessions:[],username:r});r&&this.fetchSessionsByUsernameAndRealm(t,r)}},{key:"render",value:function e(){var t=void 0;var a=this.props.router.params[0];this.state.sessions.length?t=i.default.createElement(_.default,{data:this.state.sessions,onSessionsInvalidate:l.default.partial(this.handleInvalidateSessions,a),username:this.state.username}):this.state.username&&(t=i.default.createElement(s.Panel,null,i.default.createElement(s.Panel.Body,null,i.default.createElement(h.default,null,i.default.createElement("h3",null,(0,o.t)("console.sessions.table.noResults"))))));return i.default.createElement("div",null,i.default.createElement(E.default,{title:(0,o.t)("console.sessions.title")}),i.default.createElement(y.default,null,(0,o.t)("console.sessions.search.intro")),i.default.createElement(s.FormGroup,{controlId:"findAUser"},i.default.createElement(s.ControlLabel,{srOnly:true},(0,o.t)("console.sessions.search.title")),i.default.createElement(d.default.AsyncCreatable,{autoload:false,inputProps:{id:"findAUser"},isLoading:true,loadOptions:l.default.partial(I,a),onChange:l.default.partial(this.handleSelectAsyncOnChange,a),placeholder:(0,o.t)("console.sessions.search.placeholder"),promptTextCreator:T,searchPromptText:(0,o.t)("console.sessions.search.searchPrompt"),value:this.state.username})),t)}}]);return t}(u.Component);j.propTypes={router:w.default};t.default=(0,O.default)(j)},1521:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=o(r);var l=a(0);var s=o(l);function o(e){return e&&e.__esModule?e:{default:e}}var u=s.default.shape({params:s.default.array.isRequired});t.default=u},1522:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){var t=function t(a){var r=u.default.currentRoute;var l=u.default.extractParameters(r,c.default.getCurrentFragment());var o=u.default.applyDefaultParameters(r,l);var i={params:n.default.map(o,function(e){if(!e)return"";return decodeURIComponent(e)})};return s.default.createElement(e,n.default.extend({},a,{router:i}))};t.displayName="withRouter("+f(e)+")";t.WrappedComponent=e;return t};var r=a(6);var n=d(r);var l=a(1);var s=d(l);var o=a(73);var u=d(o);var i=a(63);var c=d(i);function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return e.displayName||e.name||"Component"}},1523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function e(t){if(t){var a=t.sizePerPage,r=t.pagedResultsOffset,n=t.sortKey,l=t.sortDirection;var s=r?"&_pagedResultsOffset="+r:"";var o="&_pageSize="+a;var u=n&&l?"&_sortKeys="+encodeURIComponent(l)+n:"";return""+s+o+u}return""};t.default=r},1524:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function e(t){return t?"&_fields="+t.join(","):""};t.default=r},1529:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(0);var n=o(r);var l=a(1);var s=o(l);function o(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){var a=t.children,r=t.icon,n=t.title,l=t.type;var o=l?"deep":"shallow";var u=r?s.default.createElement("span",{className:"header-icon pull-left bg-primary"},s.default.createElement("i",{className:"fa fa-"+r})):null;var i=l?s.default.createElement("h4",{className:"page-type"},l):null;return s.default.createElement("header",{className:"page-header page-header-no-border clearfix"},u,s.default.createElement("div",{className:"button-group pull-right "+o+"-page-header-button-group"},a),s.default.createElement("div",{className:"pull-left"},i,s.default.createElement("h1",{className:"wordwrap"},n)))};u.propTypes={children:n.default.node,icon:n.default.string,title:n.default.string.isRequired,type:n.default.string};t.default=u},1583:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getSchema=y;t.getInitialState=b;t.getAll=_;t.remove=g;t.getByUsernameStartsWith=E;t.get=S;t.update=O;t.create=P;var r=a(6);var n=a(169);var l=v(n);var s=a(27);var o=v(s);var u=a(1524);var i=v(u);var c=a(1523);var d=v(c);var f=a(168);var p=v(f);function v(e){return e&&e.__esModule?e:{default:e}}var h=new l.default(""+o.default.host+o.default.context+"/json");function m(e){return h.serviceCall({url:(0,p.default)("/users?_action=template",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=4.1"},type:"POST"})}function y(e){return h.serviceCall({url:(0,p.default)("/users?_action=schema",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=4.1"},type:"POST"})}function b(e){return Promise.all([y(e),m(e)]).then(function(e){return{schema:e[0],values:e[1]}})}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=(0,d.default)(t.pagination);var r=(0,i.default)(t.fields);return h.serviceCall({url:(0,p.default)("/users?_queryFilter=true"+a+r,{realm:e}),headers:{"Accept-API-Version":"protocol=2.1,resource=4.0"}})}function g(e,t){var a=(0,r.map)(t,function(t){return h.serviceCall({url:(0,p.default)("/users/"+encodeURIComponent(t),{realm:e}),headers:{"Accept-API-Version":"protocol=2.1,resource=4.0"},type:"DELETE",errorsHandlers:{Forbidden:{status:403}}})});return Promise.all(a)}function E(e,t){return h.serviceCall({url:(0,p.default)("/users?_queryId="+encodeURIComponent(t)+"*",{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){return e.result})}function S(e,t){return h.serviceCall({url:(0,p.default)("/users/"+encodeURIComponent(t),{realm:e}),headers:{"Accept-API-Version":"protocol=2.1,resource=4.0"}})}function O(e,t,a){var n=function e(t){return(0,r.omitBy)(t,function(e,t){return(0,r.startsWith)(t,"_")})};return h.serviceCall({url:(0,p.default)("/users/"+encodeURIComponent(a),{realm:e}),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=4.0","If-Match":"*"},data:JSON.stringify(n(t))})}function P(e,t,a){return h.serviceCall({url:(0,p.default)("/users/"+encodeURIComponent(a),{realm:e}),type:"PUT",headers:{"Accept-API-Version":"protocol=2.1,resource=4.0","If-None-Match":"*"},data:JSON.stringify(t)})}},1599:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(0);var n=o(r);var l=a(1);var s=o(l);function o(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){var a=t.children;return s.default.createElement("div",{className:"call-to-action-block"},a)};u.propTypes={children:n.default.node};t.default=u},1626:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(0);var n=o(r);var l=a(1);var s=o(l);function o(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){var a=t.children;return s.default.createElement("p",{className:"page-description"},a)};u.propTypes={children:n.default.node};t.default=u},1627:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(0);var n=o(r);var l=a(1);var s=o(l);function o(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){var a=t.children,r=t.header,n=t.description;var l=n?s.default.createElement("p",{className:"block-description"},n):void 0;return s.default.createElement("div",{className:"block clearfix"},s.default.createElement("h3",{className:"block-header"},r),l,a)};u.propTypes={children:n.default.oneOfType([n.default.arrayOf(n.default.node),n.default.node]).isRequired,description:n.default.string,header:n.default.string.isRequired};t.default=u},1866:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,a,r){a&&e(t.prototype,a);r&&e(t,r);return t}}();var n=a(6);var l=m(n);var s=a(570);var o=a(61);var u=a(12);var i=m(u);var c=a(1865);var d=m(c);var f=a(0);var p=m(f);var v=a(1);var h=m(v);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(){(0,d.default)(i.default)}();var E=function e(t){var a=Math.abs((0,i.default)(t).diff(i.default.now(),"seconds"));var r=a<300?"s _":"d _ h _  m _ s _";return i.default.duration(a,"seconds").format(r,{trim:"both"})};var S=function(e){_(t,e);function t(e){y(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleDelete=a.handleDelete.bind(a);a.handleSelect=a.handleSelect.bind(a);return a}r(t,[{key:"handleDelete",value:function e(){this.props.onDelete(this.props.data)}},{key:"handleSelect",value:function e(t){this.props.onSelect(this.props.data,t.target.checked)}},{key:"render",value:function e(){var t=this.props,a=t.checked,r=t.data,n=t.sessionHandle;var u=l.default.uniqueId("select");var c=r.sessionHandle===n?h.default.createElement(s.Badge,null,(0,o.t)("console.sessions.yourSession")):h.default.createElement(s.ButtonGroup,{className:"pull-right"},h.default.createElement(s.Button,{bsStyle:"link",onClick:this.handleDelete,title:(0,o.t)("console.sessions.invalidate")},h.default.createElement("i",{className:"fa fa-close"})));return h.default.createElement("tr",{className:a?"selected":void 0},h.default.createElement("td",null,h.default.createElement(s.ControlLabel,{htmlFor:u,srOnly:true},(0,o.t)("common.form.select")),h.default.createElement("input",{checked:a,disabled:r.sessionHandle===n,id:u,onChange:this.handleSelect,type:"checkbox"})),h.default.createElement("td",null,E(r.latestAccessTime)),h.default.createElement("td",{title:(0,o.t)("console.sessions.table.expires",{timestamp:(0,i.default)(r.maxIdleExpirationTime).toISOString()})},E(r.maxIdleExpirationTime)),h.default.createElement("td",{title:(0,o.t)("console.sessions.table.expires",{timestamp:(0,i.default)(r.maxSessionExpirationTime).toISOString()})},E(r.maxSessionExpirationTime)),h.default.createElement("td",{className:"fr-col-btn-1"},c))}}]);return t}(v.Component);S.propTypes={checked:p.default.bool.isRequired,data:p.default.arrayOf(p.default.shape({latestAccessTime:p.default.string.isRequired,maxIdleExpirationTime:p.default.string.isRequired,maxSessionExpirationTime:p.default.string.isRequired,sessionHandle:p.default.string.isRequired})).isRequired,onDelete:p.default.func.isRequired,onSelect:p.default.func.isRequired,sessionHandle:p.default.string.isRequired};t.default=S},1867:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,a,r){a&&e(t.prototype,a);r&&e(t,r);return t}}();var n=a(6);var l=b(n);var s=a(570);var o=a(61);var u=a(1627);var i=b(u);var c=a(0);var d=b(c);var f=a(1);var p=b(f);var v=a(81);var h=b(v);var m=a(1866);var y=b(m);function b(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=function e(t){return l.default.find(t,function(e){return e.sessionHandle===h.default.getState().local.session.sessionHandle})};var O=function(e){E(t,e);function t(e){_(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleSelectAll=a.handleSelectAll.bind(a);a.handleSelectRow=a.handleSelectRow.bind(a);a.handleDeleteRow=a.handleDeleteRow.bind(a);a.handleDeleteSelected=a.handleDeleteSelected.bind(a);a.state={checked:[],ownSession:S(a.props.data)};return a}r(t,[{key:"componentWillReceiveProps",value:function e(t){var a=l.default.findByValues(t.data,"sessionHandle",l.default.map(this.state.checked,"sessionHandle"));this.setState({checked:a,ownSession:S(t.data)})}},{key:"handleDeleteRow",value:function e(t){this.props.onSessionsInvalidate([t])}},{key:"handleDeleteSelected",value:function e(){this.props.onSessionsInvalidate(this.state.checked)}},{key:"handleSelectAll",value:function e(t){this.setState({checked:t.target.checked?l.default.without(this.props.data,this.state.ownSession):[]})}},{key:"handleSelectRow",value:function e(t,a){var r=a?this.state.checked.concat(t):l.default.without(this.state.checked,t);this.setState({checked:r})}},{key:"render",value:function e(){var t=this;var a=function e(a){return l.default.includes(t.state.checked,a)};var r=function e(){var a=t.state.ownSession?t.props.data.length-1:t.props.data.length;return a>0&&t.state.checked.length===a};return p.default.createElement("div",null,p.default.createElement(s.ButtonToolbar,{className:"page-toolbar"},p.default.createElement(s.Button,{disabled:!this.state.checked.length,onClick:this.handleDeleteSelected},p.default.createElement("span",{className:"fa fa-close"})," ",(0,o.t)("console.sessions.invalidateSelected"))),p.default.createElement(s.Panel,null,p.default.createElement(s.Panel.Body,null,p.default.createElement(i.default,{header:this.props.username},p.default.createElement(s.Table,null,p.default.createElement("thead",null,p.default.createElement("tr",null,p.default.createElement("th",{className:"select-all-header-cell"},p.default.createElement(s.ControlLabel,{htmlFor:"selectAll",srOnly:true},(0,o.t)("common.form.selectAll")),p.default.createElement("input",{checked:r(),id:"selectAll",onChange:this.handleSelectAll,type:"checkbox"})),p.default.createElement("th",null,(0,o.t)("console.sessions.table.headers.0")),p.default.createElement("th",null,(0,o.t)("console.sessions.table.headers.1")),p.default.createElement("th",null,(0,o.t)("console.sessions.table.headers.2")),p.default.createElement("th",{className:"fr-col-btn-1"}))),p.default.createElement("tbody",null,l.default.map(this.props.data,function(e){return p.default.createElement(y.default,{checked:a(e),data:e,onDelete:t.handleDeleteRow,onSelect:t.handleSelectRow,sessionHandle:h.default.getState().local.session.sessionHandle})})))))))}}]);return t}(f.Component);O.propTypes={data:d.default.arrayOf(d.default.shape({idleTime:d.default.string,maxIdleExpirationTime:d.default.string,maxSessionExpirationTime:d.default.string,sessionHandle:d.default.string})),onSessionsInvalidate:d.default.func.isRequired,username:d.default.string.isRequired};t.default=O},1868:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getByRealmAndUsername=d;t.invalidateByHandles=f;var r=a(169);var n=i(r);var l=a(27);var s=i(l);var o=a(168);var u=i(o);function i(e){return e&&e.__esModule?e:{default:e}}var c=new n.default(""+s.default.host+s.default.context+"/json");function d(e,t){var a=encodeURIComponent('username eq "'+t+'" and realm eq "'+e+'"');return c.serviceCall({url:(0,u.default)("/sessions?_queryFilter="+a,{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=2.0"}}).then(function(e){return e.result})}function f(e){return c.serviceCall({url:(0,u.default)("/sessions?_action=logoutByHandle",{realm:false}),type:"POST",headers:{"Accept-API-Version":"protocol=1.0,resource=2.0"},data:JSON.stringify({sessionHandles:e})}).then(function(e){return e.result})}}}]);
//# sourceMappingURL=118.a27aa75ef1.js.map