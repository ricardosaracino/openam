(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[62,242],{1198:function(e,t,r){var a=r(62);e.exports=(a["default"]||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,r,a,n){var o;return(null!=(o=e.invokePartial(a["headers/_TitleWithSubAndIcon"],t,{name:"headers/_TitleWithSubAndIcon",hash:{icon:"credit-card",type:"console.sts.rest.edit.type",title:null!=t?t.title:t},data:n,helpers:r,partials:a,decorators:e.decorators}))?o:"")+"\n<form data-json-form></form>"},usePartial:true,useData:true})},1328:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){var r=[];var a=true;var n=false;var o=void 0;try{for(var u=e[Symbol.iterator](),i;!(a=(i=u.next()).done);a=true){r.push(i.value);if(t&&r.length===t)break}}catch(e){n=true;o=e}finally{try{!a&&u["return"]&&u["return"]()}finally{if(n)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}return function(t,r,a){r&&e(t.prototype,r);a&&e(t,a);return t}}();var o=r(6);var u=r(61);var i=r(1577);var s=r(1576);var l=r(114);var c=R(l);var f=r(1528);var d=R(f);var v=r(1533);var p=R(v);var m=r(866);var h=R(m);var b=r(865);var y=R(b);var g=r(560);var w=R(g);var _=r(1592);var S=R(_);var T=r(73);var P=R(T);var A=r(1602);var O=R(A);var E=r(1591);var I=R(E);var M=r(1590);var C=R(M);var j=r(1198);var k=R(j);function R(e){return e&&e.__esModule?e:{default:e}}function D(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function B(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var J=function(e){B(t,e);function t(){N(this,t);var e=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.template=k.default;e.events={"click [data-delete]":"onDelete","click [data-save]":"onSave"};return e}n(t,[{key:"createTabs",value:function e(t){return(0,o.chain)(t.raw.properties).map(function(e,t){return{id:t,order:e.propertyOrder,title:e.title}}).sortBy("order").value()}},{key:"getJSONSchemaView",value:function e(){return this.subview.getBody()}},{key:"render",value:function e(t){var r=this;var n=a(t,2),o=n[0],u=n[1];this.data={title:u,headerActions:[{actionPartial:"form/_Button",data:"delete",title:"common.form.delete",icon:"fa-times"}]};this.realm=o;Promise.all([(0,i.getSchema)(o,s.REST_STS),(0,i.get)(o,s.REST_STS,u)]).then(function(e){var t=a(e,2),n=t[0],o=t[1];r.schema=new h.default(n);r.values=new y.default(o);r.parentRender(function(){var e=r.createTabs(r.schema);r.subview=new I.default({tabs:e,createBody:function e(t){var a=new d.default({schema:new h.default(r.schema.raw.properties[t]),values:new y.default(o[t])});return a},createFooter:function e(){return new S.default({partial:"form/_JSONSchemaFooter"})}});var t={properties:r.schema.raw.properties,onChange:function e(t,a){r.subview.setTabId(t);(0,O.default)(r.$el.find('[data-schemapath="root.'+a+'"]'))}};r.$el.find("[data-tab-search]").append(new C.default(t).render().$el);r.subview.setElement("[data-json-form]");r.subview.render()})})}},{key:"onSave",value:function e(){if(!this.getJSONSchemaView().isValid()){w.default.addMessage({message:(0,u.t)("common.form.validation.errorsNotSaved"),type:w.default.TYPE_DANGER});return}this.updateValues();var t=this.values.removeNullPasswords(this.schema);var r=t.raw._id;(0,i.update)(this.realm,s.REST_STS,r,t.raw).then(function(){w.default.addMessage({message:(0,u.t)("config.messages.AppMessages.changesSaved")})},function(e){w.default.addMessage({response:e,type:w.default.TYPE_DANGER})})}},{key:"updateValues",value:function e(){this.values=this.values.extend(D({},this.getSection(),this.getJSONSchemaView().getData()))}},{key:"getSection",value:function e(){return this.subview.getTabId()}},{key:"onDelete",value:function e(t){var r=this;t.preventDefault();p.default.showConfirmationBeforeDeleting({message:(0,u.t)("console.common.confirmDeleteItem")},function(){(0,i.remove)(r.realm,s.REST_STS,[r.values.raw]).then(function(){w.default.addMessage({message:(0,u.t)("config.messages.AppMessages.changesSaved")});P.default.routeTo(P.default.configuration.routes.realmsSts,{args:[encodeURIComponent(r.realm)],trigger:true})},function(e,t){w.default.addMessage({response:t,type:w.default.TYPE_DANGER})})})}}]);return t}(c.default);t.default=J},1526:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;var a=r(61);var n=r(655);var o=u(n);function u(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.t)("common.form.delete");o.default.confirm({type:o.default.TYPE_DANGER,title:(0,a.t)("common.form.confirm")+" "+r,message:e.message?e.message:(0,a.t)("console.common.confirmDeleteText",{type:e.type}),btnOKLabel:r,btnOKClass:"btn-danger",callback:function e(r){r&&t&&t()}})}},1533:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(1537);var n=l(a);var o=r(1536);var u=l(o);var i=r(1526);var s=l(i);function l(e){return e&&e.__esModule?e:{default:e}}var c={};c.showConfirmationBeforeDeleting=function(e,t){(0,n.default)("FormHelper.showConfirmationBeforeDeleting","org/forgerock/openam/ui/admin/utils/form/showConfirmationBeforeAction");return(0,s.default)(e,t)};c.setActiveTab=function(e,t){(0,n.default)("FormHelper.setActiveTab","org/forgerock/openam/ui/admin/utils/form/setActiveTab");return(0,u.default)(e,t)};t.default=c},1536:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){e&&e.activeTabId&&e.$el.find('.nav-tabs a[href="'+e.activeTabId+'"]').tab("show")}},1537:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=a;function a(e,t){console.warn(e+" is marked as deprecated. \nPlease use "+t)}},1576:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=t.REST_STS="rest-sts";var n=t.SOAP_STS="soap-sts"},1577:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getTemplate=v;t.getSchema=p;t.getInitialState=m;t.create=h;t.get=b;t.update=y;t.getAll=g;t.remove=w;var a=r(6);var n=r(169);var o=c(n);var u=r(27);var i=c(u);var s=r(168);var l=c(s);function c(e){return e&&e.__esModule?e:{default:e}}var f=new o.default(""+i.default.host+i.default.context+"/json");var d="/realm-config/services/sts/";function v(e,t){return f.serviceCall({url:(0,l.default)(""+d+t+"?_action=template",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function p(e,t){return f.serviceCall({url:(0,l.default)(""+d+t+"?_action=schema",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function m(e,t){return Promise.all([p(e,t),v(e,t)]).then(function(e){return{schema:e[0],values:e[1]}})}function h(e,t,r,a){return f.serviceCall({url:(0,l.default)(""+d+t+"/"+encodeURIComponent(r),{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0","If-None-Match":"*"},type:"PUT",data:JSON.stringify(a)})}function b(e,t,r){return f.serviceCall({url:(0,l.default)(""+d+t+"/"+encodeURIComponent(r),{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"GET"})}function y(e,t,r,a){return f.serviceCall({url:(0,l.default)(""+d+t+"/"+encodeURIComponent(r),{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0","If-Match":"*"},type:"PUT",data:JSON.stringify(a)})}function g(e,t){return f.serviceCall({url:(0,l.default)(""+d+t+"?_queryFilter=true",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"GET"})}function w(e,t,r){var n=(0,a.map)(r,function(r){return f.serviceCall({url:(0,l.default)(""+d+t+"/"+encodeURIComponent(r._id),{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"DELETE"})});return Promise.all(n)}}}]);
//# sourceMappingURL=62.b5b98aa543.js.map