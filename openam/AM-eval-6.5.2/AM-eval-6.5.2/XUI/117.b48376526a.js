(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[117,266,267,363],{1221:function(e,t,a){var l=a(62);e.exports=(l["default"]||l).template({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,r){var n=null!=t?t:e.nullContext||{},o=a.helperMissing,i=e.escapeExpression;return'<button type="button" class="btn btn-primary pull-left" data-add-entity>\n    <i class="fa fa-plus"></i> '+i((a.t||t&&t.t||o).call(n,"console.authorization.policySets.list.addNew",{name:"t",hash:{},data:r}))+'\n</button>\n\n<a role="button" class="btn btn-default pull-right" data-export-policies>\n    <i class="fa fa-upload"></i> '+i((a.t||t&&t.t||o).call(n,"console.authorization.policySets.list.exportPolicySets",{name:"t",hash:{},data:r}))+'\n</a>\n\n<button type="button" class="btn btn-default pull-right" data-import-policies>\n    <i class="fa fa-download"></i> '+i((a.t||t&&t.t||o).call(n,"console.authorization.policySets.list.importPolicySets",{name:"t",hash:{},data:r}))+'\n</button>\n<input type="file" name="upload" class="hidden"/>\n'},useData:true})},1222:function(e,t,a){var l=a(62);e.exports=(l["default"]||l).template({1:function(e,t,a,l,r){var n;return null!=(n=a["if"].call(null!=t?t:e.nullContext||{},null!=t?t.hasPolicySets:t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.program(4,r,0),data:r}))?n:""},2:function(e,t,a,l,r){return'    <div class="btn-toolbar page-toolbar" role="toolbar" aria-label="toolbar" data-grid-toolbar></div>\n    <div class="panel panel-default">\n        <div class="panel-body">\n            <div class="table-container"></div>\n        </div>\n    </div>\n'},4:function(e,t,a,l,r){var n=null!=t?t:e.nullContext||{},o=a.helperMissing,i=e.escapeExpression;return'    <div class="panel panel-default">\n        <div class="panel-body">\n            <div class="call-to-action-block">\n                <h3>'+i((a.t||t&&t.t||o).call(n,"console.authorization.policySets.list.noPolicySets",{name:"t",hash:{},data:r}))+'</h3>\n                <button type="button" data-add-entity class="btn btn-primary">\n                    <i class="fa fa-plus"></i> '+i((a.t||t&&t.t||o).call(n,"console.authorization.policySets.list.addPolicySets",{name:"t",hash:{},data:r}))+'\n                </button>\n                <button type="button" data-import-policies class="btn btn-primary">\n                    <i class="fa fa-download"></i> '+i((a.t||t&&t.t||o).call(n,"console.authorization.policySets.list.importPolicySets",{name:"t",hash:{},data:r}))+'\n                </button>\n                <input type="file" name="upload" class="hidden"/>\n            </div>\n        </div>\n    </div>\n'},6:function(e,t,a,l,r){var n=null!=t?t:e.nullContext||{},o=a.helperMissing,i=e.escapeExpression;return'<div class="panel panel-default">\n    <div class="panel-body">\n        <div class="call-to-action-block">\n            <h3>'+i((a.t||t&&t.t||o).call(n,"console.authorization.policySets.list.noResourceTypesMessage",{name:"t",hash:{},data:r}))+'</h3>\n            <button type="button" data-add-resource class="btn btn-primary">\n                <i class="fa fa-plus"></i> '+i((a.t||t&&t.t||o).call(n,"console.authorization.resourceTypes.list.addNewResourceType",{name:"t",hash:{},data:r}))+"\n            </button>\n        </div>\n    </div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,r){var n,o=null!=t?t:e.nullContext||{};return(null!=(n=e.invokePartial(l["headers/_Title"],t,{name:"headers/_Title",hash:{title:"console.authorization.common.policySets"},data:r,helpers:a,partials:l,decorators:e.decorators}))?n:"")+'<p class="page-description">'+e.escapeExpression((a.t||t&&t.t||a.helperMissing).call(o,"console.authorization.policySets.list.description",{name:"t",hash:{},data:r}))+"</p>\n"+(null!=(n=a["if"].call(o,null!=t?t.hasResourceTypes:t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(6,r,0),data:r}))?n:"")},usePartial:true,useData:true})},1304:function(e,t,a){var l=a(62);e.exports=(l["default"]||l).template({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,r){var n;return'<div class="cell-model-icon">\n    <span><i class="fa"></i></span>\n</div>\n<div class="cell-model-name">\n    '+e.escapeExpression((n=null!=(n=a.displayName||(null!=t?t.displayName:t))?n:a.helperMissing,"function"===typeof n?n.call(null!=t?t:e.nullContext||{},{name:"displayName",hash:{},data:r}):n))+"\n</div>\n"},useData:true})},1383:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});a(1572);a(1554);var l=a(6);var r=z(l);var n=a(19);var o=z(n);var i=a(159);var s=z(i);var u=a(1657);var c=z(u);var d=a(1535);var p=z(d);var f=a(1546);var m=z(f);var v=a(27);var h=z(v);var y=a(59);var b=z(y);var g=a(1304);var P=z(g);var S=a(1596);var _=z(S);var C=a(1608);var A=z(C);var T=a(1222);var I=z(T);var x=a(1221);var R=z(x);var E=a(1550);var N=z(E);var w=a(73);var M=z(w);var k=a(1183);var V=z(k);var q=a(1555);var U=z(q);function z(e){return e&&e.__esModule?e:{default:e}}t.default=c.default.extend({template:I.default,toolbarTemplate:R.default,events:{"click [data-add-entity]":"addNewPolicySet","click [data-import-policies]":"startImportPolicies","click [data-export-policies]":"exportPolicies","click [data-add-resource]":"addResource","change [name=upload]":"readImportFile"},render:function e(t,a){this.realmPath=t[0];_.default.listResourceTypes().then(r.default.bind(function(e){var t=this;if(e.resultCount<1){this.data.hasResourceTypes=false;this.parentRender(this.renderToolbar)}else{var l=s.default.PageableCollection.extend({url:U.default.substitute("__api__/applications"),model:A.default,state:m.default.getState(),queryParams:m.default.getQueryParams({filterName:"eq",_queryFilter:["name+eq+"+encodeURIComponent('"^(?!sunAMDelegationService$).*"')]}),parseState:m.default.parseState,parseRecords:m.default.parseRecords,sync:function e(t,a,l){l.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=2.0")};return m.default.sync(t,a,l)}});this.data.selectedItems=[];this.data.hasResourceTypes=true;this.data.items=new l;this.data.items.fetch({reset:true}).then(function(e){if(e.resultCount>0){t.data.hasPolicySets=true;t.renderTable(a)}else{t.data.hasPolicySets=false;t.parentRender(t.renderToolbar)}},function(){M.default.routeTo(M.default.configuration.routes.realms,{args:[],trigger:true})})}},this))},renderTable:function e(t){var a=this;var l=this;var r=m.default.ClickableRow.extend({callback:function e(t){var a=(0,o.default)(t.target);if(a.parents().hasClass("fr-col-btn-2"))return;l.editRecord(t,this.model.id,M.default.configuration.routes.realmsPolicySetEdit)}});var n=[{name:"displayName",label:o.default.t("console.authorization.policySets.list.grid.0"),cell:m.default.TemplateCell.extend({iconClass:"fa-folder",template:P.default,rendered:function e(){this.$el.find("i.fa").addClass(this.iconClass)}}),headerCell:m.default.FilterHeaderCell,sortType:"toggle",editable:false},{name:"",cell:m.default.TemplateCell.extend({className:"fr-col-btn-2",template:V.default,events:{"click [data-edit-item]":"editItem","click [data-delete-item]":"deleteItem"},editItem:function e(t){l.editRecord(t,this.model.id,M.default.configuration.routes.realmsPolicySetEdit)},deleteItem:function e(t){l.onDeleteClick(t,{type:o.default.t("console.authorization.common.policySet")},this.model.id)}}),sortable:false,editable:false}];var i=new p.default.Grid({columns:n,row:r,collection:this.data.items,className:"backgrid table table-hover",emptyText:o.default.t("console.common.noResults")});var s=new p.default.Extension.ThemeablePaginator({collection:this.data.items,windowSize:3});this.bindDefaultHandlers();this.parentRender(function(){a.renderToolbar();a.$el.find(".table-container").append(i.render().el);a.$el.find(".panel-body").append(s.render().el);t&&t()})},startImportPolicies:function e(){this.$el.find("[name=upload]").trigger("click")},importPolicies:function e(t){_.default.importPolicies(t.target.result).then(function(){b.default.sendEvent(h.default.EVENT_DISPLAY_MESSAGE_REQUEST,"policiesUploaded")},function(e){var t=" application not found in realm",a=e?e.responseText:"",l=(0,o.default)(o.default.parseXML(a)).find("message"),r=l.length?l[0].textContent:"",n=r?r.indexOf(t):-1;n>-1?b.default.sendEvent(h.default.EVENT_DISPLAY_MESSAGE_REQUEST,{key:"policiesImportFailed",applicationName:r.slice(0,n)}):b.default.sendEvent(h.default.EVENT_DISPLAY_MESSAGE_REQUEST,"policiesUploadFailed")})},readImportFile:function e(){var t=this.$el.find("[name=upload]")[0].files[0],a=new FileReader;a.onload=this.importPolicies;t&&a.readAsText(t,"UTF-8")},exportPolicies:function e(){var t="/"===this.realmPath?"":N.default.encodeRealm(this.realmPath);this.$el.find("[data-export-policies]").attr("href",""+h.default.host+h.default.context+"/xacml"+t+"/policies")},addResource:function e(){M.default.routeTo(M.default.configuration.routes.realmsResourceTypeNew,{args:[encodeURIComponent(this.realmPath)],trigger:true})},addNewPolicySet:function e(){M.default.routeTo(M.default.configuration.routes.realmsPolicySetNew,{args:[encodeURIComponent(this.realmPath)],trigger:true})}})},1596:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var l=a(169);var r=f(l);var n=a(1578);var o=f(n);var i=a(27);var s=f(i);var u=a(168);var c=f(u);var d=a(1550);var p=f(d);function f(e){return e&&e.__esModule?e:{default:e}}var m=new r.default(""+s.default.host+s.default.context+"/json"),v=function e(){var t=o.default.getCurrentRealm();return"/"===t?"":p.default.encodeRealm(t)};m.getApplicationType=function(e){return m.serviceCall({url:(0,c.default)("/applicationtypes/"+e,{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getDecisionCombiners=function(){return m.serviceCall({url:(0,c.default)("/decisioncombiners/?_queryId=&_fields=title",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getEnvironmentConditions=function(){return m.serviceCall({url:(0,c.default)("/conditiontypes?_queryId=&_fields=title,logical,config",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getSubjectConditions=function(){return m.serviceCall({url:(0,c.default)("/subjecttypes?_queryId=&_fields=title,logical,config",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getAllUserAttributes=function(){return m.serviceCall({url:(0,c.default)("/subjectattributes?_queryFilter=true",{realm:v()}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.queryIdentities=function(e,t){return m.serviceCall({url:(0,c.default)("/"+e+"?_queryId="+t+"*",{realm:v()}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getUniversalId=function(e,t){return m.serviceCall({url:(0,c.default)("/"+t+"/"+e+"?_fields=universalid",{realm:v()}),headers:{"Cache-Control":"no-cache","Accept-API-Version":"protocol=1.0,resource=2.0"}})};m.getDataByType=function(e){return m.serviceCall({url:(0,c.default)("/"+e+"?_queryFilter=true",{realm:v()}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getScriptById=function(e){return m.serviceCall({url:(0,c.default)("/scripts/"+e,{realm:v()}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.getAllRealms=function(){return m.serviceCall({url:(0,c.default)("/realms?_queryFilter=true",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};m.importPolicies=function(e){return m.serviceCall({serviceUrl:""+s.default.host+s.default.context,url:(0,c.default)("/xacml"+v()+"/policies",{realm:false}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:e})};m.listResourceTypes=function(){return m.serviceCall({url:(0,c.default)("/resourcetypes?_queryFilter=name+eq+"+encodeURIComponent('"^(?!Delegation Service$).*"'),{realm:v()}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};t.default=m},1608:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var l=a(6);var r=d(l);var n=a(159);var o=d(n);var i=a(1570);var s=d(i);var u=a(1555);var c=d(u);function d(e){return e&&e.__esModule?e:{default:e}}t.default=o.default.Model.extend({idAttribute:"name",urlRoot:c.default.substitute("__api__/applications"),defaults:function e(){return{name:null,displayName:null,description:"",resourceTypeUuids:[],realm:""}},parse:function e(t){r.default.isEmpty(t.displayName)?this.displayName=t.name:this.displayName=t.displayName;return t},validate:function e(t){if(""===t.name.trim())return"errorNoId";if(0===t.name.indexOf("#"))return"errorCantStartWithHash";if(r.default.isEmpty(t.resourceTypeUuids))return"applicationErrorNoResourceTypes"},sync:function e(t,a,l){l=l||{};l.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=2.0")};l.error=s.default.errorHandler;if(null===a.id){t="create";l.url=this.urlRoot()+"/?_action=create"}return o.default.Model.prototype.sync.call(this,t,a,l)}})}}]);
//# sourceMappingURL=117.b48376526a.js.map