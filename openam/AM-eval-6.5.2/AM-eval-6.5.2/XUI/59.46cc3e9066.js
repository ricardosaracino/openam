(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[59],{1325:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}return function(t,r,a){r&&e(t.prototype,r);a&&e(t,a);return t}}();var n=r(3);var s=r(6);var o=r(0);var u=U(o);var i=r(1);var c=U(i);var l=r(1600);var p=r(188);var d=r(202);var f=r(274);var h=r(203);var v=r(1527);var y=U(v);var m=r(1543);var g=U(m);var C=r(560);var b=U(C);var T=r(1722);var S=U(T);var A=r(73);var P=U(A);var _=r(1721);var w=U(_);var O=r(1522);var I=U(O);var R=r(1521);var E=U(R);function U(e){return e&&e.__esModule?e:{default:e}}function k(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function a(n,s){try{var o=t[n](s);var u=o.value}catch(e){r(e);return}if(!o.done)return Promise.resolve(u).then(function(e){a("next",e)},function(e){a("throw",e)});e(u)}return a("next")})}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function V(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var M=function(e){V(t,e);function t(e){x(this,t);var r=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={id:"",isFetching:true};r.handleCreate=r.handleCreate.bind(r);r.handleIdChange=r.handleIdChange.bind(r);r.handleTypeChange=r.handleTypeChange.bind(r);return r}a(t,[{key:"componentDidMount",value:function(){var e=k(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:this.props.resetSelected();t=this.props.router.params[0];n.prev=2;n.next=5;return(0,l.getCreatableTypes)(t);case 5:r=n.sent;a=r.result;this.props.setTypes(a);n.next=13;break;case 10:n.prev=10;n.t0=n["catch"](2);b.default.addMessage({response:n.t0,type:b.default.TYPE_DANGER});case 13:n.prev=13;this.setState({isFetching:false});return n.finish(13);case 16:case"end":return n.stop()}},e,this,[[2,10,13,16]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCreate",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=this.props.router.params[0];a.prev=1;a.next=4;return(0,l.create)(r,this.props.selectedType,t,this.state.id);case 4:P.default.routeTo(P.default.configuration.routes.realmsSecretStoresEdit,{args:(0,s.map)([r,this.props.selectedType,this.state.id],encodeURIComponent),trigger:true});a.next=10;break;case 7:a.prev=7;a.t0=a["catch"](1);b.default.addMessage({response:a.t0,type:b.default.TYPE_DANGER});case 10:case"end":return a.stop()}},e,this,[[1,7]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleIdChange",value:function e(t){this.setState({id:t})}},{key:"handleTypeChange",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap(function e(u){while(1)switch(u.prev=u.next){case 0:this.props.setSelected(t);r=this.props.router.params[0];u.prev=2;u.next=5;return(0,l.getInitialState)(r,t);case 5:a=u.sent;n=a.schema;s=a.values;o=(0,w.default)(n,t);this.props.addOrUpdateSchema(o,t);this.props.addOrUpdateTemplate(s,t);u.next=16;break;case 13:u.prev=13;u.t0=u["catch"](2);b.default.addMessage({response:u.t0,type:b.default.TYPE_DANGER});case 16:case"end":return u.stop()}},e,this,[[2,13]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"render",value:function e(){var t=(0,g.default)(this.state.id);var r=t&&!(0,s.isEmpty)(this.state.id)&&!(0,s.isEmpty)(this.props.selectedType);return c.default.createElement(S.default,{id:this.state.id,isCreateAllowed:r,isFetching:this.state.isFetching,isValidId:t,listRoute:P.default.configuration.routes.realmsSecretStores,onCreate:this.handleCreate,onIdChange:this.handleIdChange,onTypeChange:this.handleTypeChange,schema:this.props.schema,selectedType:this.props.selectedType,template:this.props.template,types:this.props.types})}}]);return t}(i.Component);M.propTypes={addOrUpdateSchema:u.default.func.isRequired,addOrUpdateTemplate:u.default.func.isRequired,resetSelected:u.default.func.isRequired,router:E.default,schema:u.default.objectOf(u.default.any),selectedType:u.default.string,setSelected:u.default.func.isRequired,setTypes:u.default.func.isRequired,template:u.default.objectOf(u.default.any),types:u.default.arrayOf(u.default.object).isRequired};M=(0,y.default)(M,function(e){var t=e.local.config.realm.secretStores.types.selected;return{schema:(0,s.get)(e.remote.config.realm.secretStores.types.schema,[t]),selectedType:t,template:(0,s.get)(e.remote.config.realm.secretStores.types.template,[t]),types:e.remote.config.realm.secretStores.types.list}},function(e){return{addOrUpdateSchema:(0,n.bindActionCreators)(p.addOrUpdate,e),addOrUpdateTemplate:(0,n.bindActionCreators)(d.addOrUpdate,e),resetSelected:(0,n.bindActionCreators)(f.reset,e),setSelected:(0,n.bindActionCreators)(f.set,e),setTypes:(0,n.bindActionCreators)(h.set,e)}});M=(0,I.default)(M);t.default=M},1600:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.create=f;t.get=h;t.getAllByType=v;t.getCreatableTypes=y;t.getCreatableTypesByType=m;t.getSchema=g;t.getInitialState=C;t.remove=b;t.update=T;var a=r(6);var n=r(169);var s=l(n);var o=r(27);var u=l(o);var i=r(168);var c=l(i);function l(e){return e&&e.__esModule?e:{default:e}}var p=new s.default(""+u.default.host+u.default.context+"/json");var d="/realm-config/secrets/stores";function f(e,t,r,a){return p.serviceCall({url:(0,c.default)(d+"/"+t+"/"+encodeURIComponent(a),{realm:e}),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0","If-None-Match":"*"},data:JSON.stringify(r)})}function h(e,t,r){return p.serviceCall({url:(0,c.default)(d+"/"+t+"/"+encodeURIComponent(r),{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true})}function v(e,t){return p.serviceCall({url:(0,c.default)(d+"/"+t+"?_queryFilter=true",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true})}function y(e){return p.serviceCall({url:(0,c.default)(d+"?_action=getCreatableTypes",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true,type:"POST"})}function m(e,t){return p.serviceCall({url:(0,c.default)(d+"/"+t+"?_action=getCreatableTypes",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true,type:"POST"})}function g(e,t){return p.serviceCall({url:(0,c.default)(d+"/"+t+"?_action=schema",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true,type:"POST"})}function C(e,t){function r(){return p.serviceCall({url:(0,c.default)(d+"/"+t+"?_action=template",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},suppressSpinner:true,type:"POST"})}return Promise.all([g(e,t),r()]).then(function(e){return{schema:e[0],values:e[1]}})}function b(e,t){var r=(0,a.map)(t,function(t){return p.serviceCall({url:(0,c.default)(d+"/"+t._type._id+"/"+encodeURIComponent(t._id),{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"DELETE"})});return Promise.all(r)}function T(e,t,r,n){return p.serviceCall({url:(0,c.default)(d+"/"+t+"/"+encodeURIComponent(r),{realm:e}),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},data:JSON.stringify((0,a.omit)(n,"_rev"))})}}}]);
//# sourceMappingURL=59.46cc3e9066.js.map