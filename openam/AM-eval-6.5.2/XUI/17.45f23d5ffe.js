(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17,220,221,351],{1164:function(e,t,a){var n=a(62);e.exports=(n["default"]||n).template({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){return'<a class="btn info-button visible-lg-inline-block visible-md-inline-block visible-sm-inline-block" tabindex="0" data-toggle="popoverclickaway">\n    <i class="fa fa-info-circle"></i>\n</a>\n'},useData:true})},1166:function(e,t,a){var n=a(62);e.exports=(n["default"]||n).template({1:function(e,t,a,n,i){return"checked"},3:function(e,t,a,n,i){return"block-header-inactive"},5:function(e,t,a,n,i){return'        <span class="text-muted">schema.raw.description</span>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var r,s=null!=t?t:e.nullContext||{};return'<div class="form-inline">\n    <label class="am-toggle-switch pull-right">\n        <input data-json-editor-toggle type="checkbox" '+(null!=(r=a["if"].call(s,null!=t?t.enablePropertyValue:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?r:"")+' />\n        <span />\n    </label>\n\n    <h3 class="block-header '+(null!=(r=a.unless.call(s,null!=t?t.enablePropertyValue:t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?r:"")+'">\n        '+e.escapeExpression(e.lambda(null!=(r=null!=(r=null!=t?t.schema:t)?r.raw:r)?r.title:r,t))+"\n    </h3>\n\n"+(null!=(r=a["if"].call(s,null!=(r=null!=(r=null!=t?t.schema:t)?r.raw:r)?r.description:r,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?r:"")+"</div>\n\n<div data-toggleable-json-editor/>\n"},useData:true})},1188:function(e,t,a){var n=a(62);e.exports=(n["default"]||n).template({1:function(e,t,a,n,i){return'    <div class="panel panel-default">\n        <div class="panel-body form-group">\n            <form data-json-form></form>\n        </div>\n    </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var r,s=null!=t?t:e.nullContext||{},o=a.helperMissing,l=e.escapeExpression;return(null!=(r=e.invokePartial(n["headers/_Title"],t,{name:"headers/_Title",hash:{title:null!=t?t.title:t},data:i,helpers:a,partials:n,decorators:e.decorators}))?r:"")+'\n<div class="panel multiple-panels panel-content">\n    <div class="panel panel-default">\n        <div class="panel-body">\n            <div class="form-group">\n                <label class="control-label" for="instanceId">'+l((a.t||t&&t.t||o).call(s,"common.form.name",{name:"t",hash:{},data:i}))+'</label>\n                <input data-instance-id type="text" id="instanceId" class="form-control" required name="instanceId"\n                    placeholder="'+l((a.t||t&&t.t||o).call(s,"common.form.validation.required",{name:"t",hash:{},data:i}))+'">\n            </div>\n        </div>\n    </div>\n\n'+(null!=(r=a["if"].call(s,null!=t?t.displayForm:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?r:"")+'\n    <div class="panel-footer clearfix">\n        <div class="pull-right">\n            <button data-cancel class="btn btn-default" type="button">'+l((a.t||t&&t.t||o).call(s,"common.form.cancel",{name:"t",hash:{},data:i}))+'</button>\n            <button data-save class="btn btn-primary" type="button" disabled>'+l((a.t||t&&t.t||o).call(s,"common.form.create",{name:"t",hash:{},data:i}))+"</button>\n        </div>\n    </div>\n</div>\n"},usePartial:true,useData:true})},1525:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});a(1539);var n=a(6);var i=E(n);var r=a(19);var s=E(r);var o=a(159);var l=E(o);var u=a(1538);var d=E(u);var c=a(1164);var h=E(c);var f=a(1541);var v=E(f);var p=a(866);var m=E(p);var w=a(865);var y=E(w);var g=a(1531);var b=E(g);function E(e){return e&&e.__esModule?e:{default:e}}function P(e){var t=(0,h.default)();(0,s.default)(e).find(".help-block:not(.errormsg)").addClass("hidden-lg hidden-md hidden-sm").each(function(e,a){var n=(0,s.default)(t);n.popoverclickaway({container:"#content",html:true,placement:"auto top",content:a.innerHTML}).click(function(e){e.preventDefault()});(0,s.default)(a).parent().append(n)})}function _(e){(0,s.default)(e).find("input:password").attr("placeholder",s.default.t("common.form.passwordPlaceholder"))}b.default.define("enum_plugin",function(e){var t=this,a=arguments;var n=e.schema;var r=i.default.indexOf(n.enum,"");var s=r>-1;var o=function e(){var n=function e(t){return!t||8!==t.keyCode};t.deleteSelection=function(){var e=t.deleteSelection;return function(i){if(n(i))return e.apply(t,a);return false}}()};var l=function e(){t.plugins.settings["dropdown_header"]={title:n.options.enum_titles[r]};t.require("dropdown_header");t.setup=function(){var e=t.setup;return function(){e.apply(t,a);t.$dropdown.on("mousedown",".selectize-dropdown-header",function(){t.setValue("");t.close();t.blur();return false})}}()};s?l():o()});function j(e,t){var a=t.schema,n=t.values,i=t.hideInheritance,r=void 0!==i&&i;var s=6;var o=4;d.default.plugins.selectize.enable=true;d.default.plugins.selectize.plugins=function(e){return[{name:"enum_plugin",options:{schema:e}}]};d.default.defaults.themes.openam=v.default.getTheme(s,o);var l=a.toFlatWithInheritanceMeta(n);var u=n.removeInheritance();l=l.raw;u=u.raw;var c=new d.default(e[0],{disable_collapse:true,disable_edit_json:true,disable_properties:true,hide_inheritance:r,iconlib:"fontawesome4",schema:l,theme:"openam"});P(e);_(e);c.setValue(u);return c}var S=l.default.View.extend({className:"jsoneditor-block",initialize:function e(t){if(!(t.schema instanceof m.default))throw new TypeError('[JSONEditorView] "schema" argument is not an instance of JSONSchema.');if(!(t.values instanceof y.default))throw new TypeError('[JSONEditorView] "values" argument is not an instance of JSONValues.');this.options=i.default.defaults(t,{displayTitle:true})},toggleInheritance:function e(t,a,n){this.options.values=this.options.values.extend(this.getData());this.options.values=this.options.values.addValueForPath([t,"inherited"],n);this.options.values=this.options.values.addValueForPath([t,"value"],a);this.render()},render:function e(){this.$el.empty();var t=i.default.get(this.jsonEditor,"watchlist");this.jsonEditor=j(this.$el,this.options);this.jsonEditor.watchlist=t;this.options.displayTitle||this.$el.find("[data-header]").parent().hide();return this},isValid:function e(){return 0===this.jsonEditor.validate().length},getData:function e(){var t=new y.default(this.jsonEditor.getValue());this.options.schema.hasDefaultProperties()&&(t=t.pick(this.options.schema.raw.defaultProperties));t=t.nullifyEmptyPasswords(this.options.schema.getPasswordKeys());t=t.addInheritance(this.options.values.raw);return t.raw},setData:function e(t){this.options.values=this.options.values.extend(t)},watch:function e(t,a){this.jsonEditor.watch(t,a)},destroy:function e(){var t=this;var a=i.default.keys(this.jsonEditor.watchlist);i.default.forEach(a,function(e){t.jsonEditor.unwatch(e)});this.jsonEditor.destroy();this.jsonEditor=null}});t.default=S},1528:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a(6);var i=f(n);var r=a(159);var s=f(r);var o=a(1525);var l=f(o);var u=a(866);var d=f(u);var c=a(865);var h=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function v(e){e&&setTimeout(e,0)}var p=s.default.View.extend({initialize:function e(t){if(!(t.schema instanceof d.default))throw new TypeError('[FlatJSONSchemaView] "schema" argument is not an instance of JSONSchema.');if(!(t.values instanceof h.default))throw new TypeError('[FlatJSONSchemaView] "values" argument is not an instance of JSONValues.');this.options=i.default.defaults(t,{showOnlyRequiredAndEmpty:false})},render:function e(){var t=this.options.schema;var a=true;if(this.options.showOnlyRequiredAndEmpty){var n=this.options.schema.getRequiredPropertyKeys();var r=this.options.values.getEmptyValueKeys(t);var s=i.default.intersection(n,r);t=t.removeUnrequiredNonDefaultProperties().addDefaultProperties(s);a=!i.default.isEmpty(s)}this.subview=new l.default({displayForm:a,hideInheritance:this.options.hideInheritance,displayTitle:false,el:this.$el,schema:t,values:this.options.values}).render();v(this.options.onRendered);return this},isValid:function e(){return!this.subview||this.subview.isValid()},getData:function e(){if(this.subview){var t;return(t=this.subview).getData.apply(t,arguments)}},setData:function e(t){if(this.subview){this.options.values=this.options.values.extend(t);return this.subview.setData(t)}},watch:function e(t,a){this.subview&&this.subview.watch(t,a)},destroy:function e(){if(this.subview){this.subview.destroy();this.subview=null}}});t.default=p},1557:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a(6);var i=E(n);var r=a(159);var s=E(r);var o=a(1568);var l=E(o);var u=a(1566);var d=E(u);var c=a(866);var h=E(c);var f=a(865);var v=E(f);var p=a(1565);var m=E(p);var w=a(1564);var y=E(w);var g=a(1563);var b=E(g);function E(e){return e&&e.__esModule?e:{default:e}}function P(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a;return e}function _(e){e&&setTimeout(e,0)}var j=s.default.View.extend({initialize:function e(t){if(!(t.schema instanceof h.default))throw new TypeError('[GroupedJSONSchemaView] "schema" argument is not an instance of JSONSchema.');if(!t.schema.isCollection())throw new Error("[GroupedJSONSchemaView] Only JSONSchema collections are supported by this view.");if(!(t.values instanceof v.default))throw new TypeError('[GroupedJSONSchemaView] "values" argument is not an instance of JSONValues.');this.options=i.default.defaults(t,{showOnlyRequired:false,showOnlyRequiredAndEmpty:false})},render:function e(){var t=this;var a=this.options.schema.getPropertiesAsSchemas();var n=this.options.values.raw;var r=this.options.schema.getKeys(true);var s=i.default.map(r,function(e){return{key:e,hideInheritance:t.options.hideInheritance,schema:a[e],values:new v.default(n[e])}});this.options.showOnlyRequiredAndEmpty?s=(0,i.default)(s).map(y.default).map(b.default).omitBy(d.default).value():this.options.showOnlyRequired&&(s=(0,i.default)(s).map(m.default).map(b.default).omitBy(d.default).value());this.displayForm=!i.default.isEmpty(s);this.subviews=(0,i.default)(s).map(l.default).invokeMap("render").each(function(e){e.$el.appendTo(t.$el)});_(this.options.onRendered);return this},getData:function e(){var t=i.default.map(this.subviews,function(e){var t=void 0;t=e.options.key?P({},e.options.key,e.getData()):e.getData();return t});return i.default.reduce(t,i.default.merge,{})}});t.default=j},1563:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){var t=(0,n.isEmpty)(e.schema.raw.defaultProperties);if(t&&e.schema.hasEnableProperty())return(0,n.extend)(e,{schema:e.schema.getEnableProperty().addDefaultProperties([e.schema.getEnableKey()])});return e};var n=a(6)},1564:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){var t=e.schema.getRequiredPropertyKeys();var a=e.values.getEmptyValueKeys(e.schema);var i=(0,n.intersection)(t,a);return(0,n.extend)(e,{schema:e.schema.addDefaultProperties(i)})};var n=a(6)},1565:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){var t=e.schema.getRequiredPropertyKeys();return(0,n.extend)(e,{schema:e.schema.addDefaultProperties(t)})};var n=a(6)},1566:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){return(0,n.isEmpty)(e.schema.raw.defaultProperties)};var n=a(6)},1567:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a(6);var i=p(n);var r=a(159);var s=p(r);var o=a(1525);var l=p(o);var u=a(866);var d=p(u);var c=a(865);var h=p(c);var f=a(1166);var v=p(f);function p(e){return e&&e.__esModule?e:{default:e}}var m=s.default.View.extend({className:"jsoneditor-block",initialize:function e(t){if(!(t.schema instanceof d.default))throw new TypeError('[TogglableJSONEditorView] "schema" argument is not an instance of JSONSchema.');if(!(t.values instanceof h.default))throw new TypeError('[TogglableJSONEditorView] "values" argument is not an instance of JSONValues.');this.options=t;this.options.enablePropertyKey=this.options.schema.getEnableKey();this.options.enablePropertyValue=this.options.values.raw[this.options.enablePropertyKey];this.options.schema=t.schema.omit(this.options.enablePropertyKey);this.options.values=t.values.omit(this.options.enablePropertyKey)},onEnabledChange:function e(t){var a=250;var n=t.currentTarget.checked;this.options.enablePropertyValue=n;this.$el.find(".block-header").toggleClass("block-header-inactive");this.options.schema.isEmpty()||(n?this.$el.find("[data-toggleable-json-editor]").slideDown(a):this.$el.find("[data-toggleable-json-editor]").slideUp(a))},render:function e(){var t=(0,v.default)(this.options);this.$el.html(t);this.$el.find("[data-json-editor-toggle]").change(i.default.bind(this.onEnabledChange,this));this.jsonEditor=new l.default({el:this.$el.find("[data-toggleable-json-editor]"),displayTitle:false,schema:this.options.schema,values:this.options.values});this.options.enablePropertyValue||this.$el.find("[data-toggleable-json-editor]").hide();this.jsonEditor.render();return this},getData:function e(){var t=i.default.clone(this.jsonEditor.getData());t[this.options.enablePropertyKey]=this.options.enablePropertyValue;return t}});t.default=m},1568:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){var t=e.schema.hasEnableProperty()?s.default:i.default;return new t(e)};var n=a(1525);var i=o(n);var r=a(1567);var s=o(r);function o(e){return e&&e.__esModule?e:{default:e}}},1723:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a(6);var i=w(n);var r=a(159);var s=w(r);var o=a(1528);var l=w(o);var u=a(1557);var d=w(u);var c=a(865);var h=w(c);var f=a(560);var v=w(f);var p=a(73);var m=w(p);function w(e){return e&&e.__esModule?e:{default:e}}t.default=s.default.View.extend({events:{"click [data-save]":"onSave","click [data-cancel]":"onCancel","keyup [data-instance-id]":"onIdChange","change [data-instance-id]":"onIdChange"},onIdChange:function e(t){var a=i.default.isEmpty(t.currentTarget.value);this.setCreateEnabled(!a)},setCreateEnabled:function e(t){this.$el.find("[data-save]").prop("disabled",!t)},initialize:function e(t){var a=t.data,n=t.listRoute,i=t.listRouteArgs,r=t.editRoute,s=t.editRouteArgs,o=t.template,l=t.getInitialState,u=t.createInstance;this.data=a;this.listRoute=n;this.listRouteArgs=i;this.editRoute=r;this.editRouteArgs=s;this.template=o;this.getInitialState=l;this.createInstance=u},render:function e(){var t=this;this.getInitialState().then(function(e){t.schema=e.schema;var a={schema:t.schema,values:e.values,showOnlyRequiredAndEmpty:true};if(t.schema.isCollection()){t.jsonSchemaView=new d.default(a);t.jsonSchemaView.render();t.data.displayForm=t.jsonSchemaView.displayForm}else{t.jsonSchemaView=new l.default(a);t.jsonSchemaView.render();t.data.displayForm=t.jsonSchemaView.subview.options.displayForm}var n=t.template(t.data);t.$el.html(n);t.$el.find("[data-json-form]").html(t.jsonSchemaView.$el)});return this},onSave:function e(){var t=this;var a=i.default.cloneDeep(this.jsonSchemaView.getData());var n=this.$el.find("[data-instance-id]").val();a["_id"]=n;var r=new h.default(a);var s=r.removeNullPasswords(this.schema);this.createInstance(s.raw).then(function(){m.default.routeTo(t.editRoute,{args:t.editRouteArgs(encodeURIComponent(n)),trigger:true})},function(e){v.default.addMessage({response:e,type:v.default.TYPE_DANGER})})},onCancel:function e(){m.default.routeTo(this.listRoute,{args:this.listRouteArgs,trigger:true})}})}}]);
//# sourceMappingURL=17.45f23d5ffe.js.map