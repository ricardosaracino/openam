(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31,220],{1164:function(e,t,r){var n=r(62);e.exports=(n["default"]||n).template({compiler:[7,">= 4.0.0"],main:function(e,t,r,n,a){return'<a class="btn info-button visible-lg-inline-block visible-md-inline-block visible-sm-inline-block" tabindex="0" data-toggle="popoverclickaway">\n    <i class="fa fa-info-circle"></i>\n</a>\n'},useData:true})},1521:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var a=s(n);var i=r(0);var o=s(i);function s(e){return e&&e.__esModule?e:{default:e}}var u=o.default.shape({params:o.default.array.isRequired});t.default=u},1525:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(1539);var n=r(6);var a=_(n);var i=r(19);var o=_(i);var s=r(159);var u=_(s);var l=r(1538);var c=_(l);var d=r(1164);var f=_(d);var p=r(1541);var v=_(p);var h=r(866);var m=_(h);var y=r(865);var w=_(y);var b=r(1531);var g=_(b);function _(e){return e&&e.__esModule?e:{default:e}}function S(e){var t=(0,f.default)();(0,o.default)(e).find(".help-block:not(.errormsg)").addClass("hidden-lg hidden-md hidden-sm").each(function(e,r){var n=(0,o.default)(t);n.popoverclickaway({container:"#content",html:true,placement:"auto top",content:r.innerHTML}).click(function(e){e.preventDefault()});(0,o.default)(r).parent().append(n)})}function O(e){(0,o.default)(e).find("input:password").attr("placeholder",o.default.t("common.form.passwordPlaceholder"))}g.default.define("enum_plugin",function(e){var t=this,r=arguments;var n=e.schema;var i=a.default.indexOf(n.enum,"");var o=i>-1;var s=function e(){var n=function e(t){return!t||8!==t.keyCode};t.deleteSelection=function(){var e=t.deleteSelection;return function(a){if(n(a))return e.apply(t,r);return false}}()};var u=function e(){t.plugins.settings["dropdown_header"]={title:n.options.enum_titles[i]};t.require("dropdown_header");t.setup=function(){var e=t.setup;return function(){e.apply(t,r);t.$dropdown.on("mousedown",".selectize-dropdown-header",function(){t.setValue("");t.close();t.blur();return false})}}()};o?u():s()});function P(e,t){var r=t.schema,n=t.values,a=t.hideInheritance,i=void 0!==a&&a;var o=6;var s=4;c.default.plugins.selectize.enable=true;c.default.plugins.selectize.plugins=function(e){return[{name:"enum_plugin",options:{schema:e}}]};c.default.defaults.themes.openam=v.default.getTheme(o,s);var u=r.toFlatWithInheritanceMeta(n);var l=n.removeInheritance();u=u.raw;l=l.raw;var d=new c.default(e[0],{disable_collapse:true,disable_edit_json:true,disable_properties:true,hide_inheritance:i,iconlib:"fontawesome4",schema:u,theme:"openam"});S(e);O(e);d.setValue(l);return d}var E=u.default.View.extend({className:"jsoneditor-block",initialize:function e(t){if(!(t.schema instanceof m.default))throw new TypeError('[JSONEditorView] "schema" argument is not an instance of JSONSchema.');if(!(t.values instanceof w.default))throw new TypeError('[JSONEditorView] "values" argument is not an instance of JSONValues.');this.options=a.default.defaults(t,{displayTitle:true})},toggleInheritance:function e(t,r,n){this.options.values=this.options.values.extend(this.getData());this.options.values=this.options.values.addValueForPath([t,"inherited"],n);this.options.values=this.options.values.addValueForPath([t,"value"],r);this.render()},render:function e(){this.$el.empty();var t=a.default.get(this.jsonEditor,"watchlist");this.jsonEditor=P(this.$el,this.options);this.jsonEditor.watchlist=t;this.options.displayTitle||this.$el.find("[data-header]").parent().hide();return this},isValid:function e(){return 0===this.jsonEditor.validate().length},getData:function e(){var t=new w.default(this.jsonEditor.getValue());this.options.schema.hasDefaultProperties()&&(t=t.pick(this.options.schema.raw.defaultProperties));t=t.nullifyEmptyPasswords(this.options.schema.getPasswordKeys());t=t.addInheritance(this.options.values.raw);return t.raw},setData:function e(t){this.options.values=this.options.values.extend(t)},watch:function e(t,r){this.jsonEditor.watch(t,r)},destroy:function e(){var t=this;var r=a.default.keys(this.jsonEditor.watchlist);a.default.forEach(r,function(e){t.jsonEditor.unwatch(e)});this.jsonEditor.destroy();this.jsonEditor=null}});t.default=E},1528:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=p(n);var i=r(159);var o=p(i);var s=r(1525);var u=p(s);var l=r(866);var c=p(l);var d=r(865);var f=p(d);function p(e){return e&&e.__esModule?e:{default:e}}function v(e){e&&setTimeout(e,0)}var h=o.default.View.extend({initialize:function e(t){if(!(t.schema instanceof c.default))throw new TypeError('[FlatJSONSchemaView] "schema" argument is not an instance of JSONSchema.');if(!(t.values instanceof f.default))throw new TypeError('[FlatJSONSchemaView] "values" argument is not an instance of JSONValues.');this.options=a.default.defaults(t,{showOnlyRequiredAndEmpty:false})},render:function e(){var t=this.options.schema;var r=true;if(this.options.showOnlyRequiredAndEmpty){var n=this.options.schema.getRequiredPropertyKeys();var i=this.options.values.getEmptyValueKeys(t);var o=a.default.intersection(n,i);t=t.removeUnrequiredNonDefaultProperties().addDefaultProperties(o);r=!a.default.isEmpty(o)}this.subview=new u.default({displayForm:r,hideInheritance:this.options.hideInheritance,displayTitle:false,el:this.$el,schema:t,values:this.options.values}).render();v(this.options.onRendered);return this},isValid:function e(){return!this.subview||this.subview.isValid()},getData:function e(){if(this.subview){var t;return(t=this.subview).getData.apply(t,arguments)}},setData:function e(t){if(this.subview){this.options.values=this.options.values.extend(t);return this.subview.setData(t)}},watch:function e(t,r){this.subview&&this.subview.watch(t,r)},destroy:function e(){if(this.subview){this.subview.destroy();this.subview=null}}});t.default=h},1559:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(570);var a=r(61);var i=r(0);var o=l(i);var s=r(1);var u=l(s);function l(e){return e&&e.__esModule?e:{default:e}}var c=function e(t){var r=t.disabled,i=t.onSaveClick;return u.default.createElement(n.Clearfix,null,u.default.createElement("div",{className:"pull-right"},u.default.createElement(n.Button,{bsStyle:"primary",disabled:r,onClick:i},(0,a.t)("common.form.saveChanges"))))};c.defaultProps={disabled:false};c.propTypes={disabled:o.default.bool,onSaveClick:o.default.func.isRequired};t.default=c},1586:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.get=d;t.getSingleton=f;t.create=p;t.getAll=v;t.getCreatableTypesByType=h;t.getSingletonTypes=m;t.getCreatableTypes=y;t.getSchema=w;t.getInitialState=b;t.remove=g;t.update=_;t.updateSingleton=S;var n=r(6);var a=r(169);var i=u(a);var o=r(27);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}var l=new i.default(""+s.default.host+s.default.context+"/json");var c="/global-config/secrets/stores";function d(e,t){return l.serviceCall({url:c+"/"+e+"/"+encodeURIComponent(t),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function f(e){return l.serviceCall({url:c+"/"+e,headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function p(e,t,r){return l.serviceCall({url:c+"/"+e+"/"+encodeURIComponent(r),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0","If-None-Match":"*"},data:JSON.stringify(t)})}function v(e){return l.serviceCall({url:c+"/"+e+"?_queryFilter=true",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function h(e){return l.serviceCall({url:c+"/"+e+"?_action=getCreatableTypes",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function m(){return l.serviceCall({url:c+"?_action=getAllTypes",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"}).then(function(e){var t=e.result;return(0,n.filter)(t,function(e){return false===e.collection})})}function y(){return l.serviceCall({url:c+"?_action=getCreatableTypes",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function w(e){return l.serviceCall({url:c+"/"+e+"?_action=schema",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function b(e){function t(){return l.serviceCall({url:c+"/"+e+"?_action=template",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}return Promise.all([w(e),t()]).then(function(e){return{schema:e[0],values:e[1]}})}function g(e){var t=(0,n.map)(e,function(e){return l.serviceCall({url:c+"/"+e._type._id+"/"+encodeURIComponent(e._id),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"DELETE"})});return Promise.all(t)}function _(e,t,r){return l.serviceCall({url:c+"/"+e+"/"+encodeURIComponent(t),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},data:JSON.stringify((0,n.omit)(r,"_rev"))})}function S(e,t){return l.serviceCall({url:c+"/"+e,type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},data:JSON.stringify((0,n.omit)(t,"_rev"))})}},1620:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(570);var i=r(6);var o=r(61);var s=r(0);var u=O(s);var l=r(1);var c=O(l);var d=r(1559);var f=O(d);var p=r(1528);var v=O(p);var h=r(866);var m=O(h);var y=r(865);var w=O(y);var b=r(1532);var g=O(b);var _=r(560);var S=O(_);function O(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var V=function(e){j(t,e);function t(e){P(this,t);var r=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setRef=r.setRef.bind(r);r.handleSave=r.handleSave.bind(r);return r}n(t,[{key:"componentWillReceiveProps",value:function e(t){if(this.jsonSchemaView&&!(0,i.isEqual)(this.props.schema,t.schema)){this.jsonSchemaView.destroy();this.jsonSchemaView=null}if(this.jsonSchemaView){this.jsonSchemaView.setData(t.values);this.jsonSchemaView.render()}}},{key:"componentDidUpdate",value:function e(){if(!this.jsonSchemaView&&this.form&&this.props.values&&this.props.schema){this.jsonSchemaView=new v.default({schema:new m.default(this.props.schema),values:new w.default(this.props.values)});this.form.appendChild(this.jsonSchemaView.render().el)}}},{key:"handleSave",value:function e(){if(!this.jsonSchemaView.subview.isValid()){S.default.addMessage({message:(0,o.t)("common.form.validation.errorsNotSaved"),type:S.default.TYPE_DANGER});return}var t=new w.default(this.jsonSchemaView.subview.getData());var r=t.removeNullPasswords(new m.default(this.props.schema));this.props.onSave(r.raw)}},{key:"setRef",value:function e(t){this.form=t}},{key:"render",value:function e(){var t=void 0;t=this.props.isFetching?c.default.createElement(g.default,null):c.default.createElement(l.Fragment,null,c.default.createElement(a.Panel.Body,null,c.default.createElement("div",{ref:this.setRef})),c.default.createElement(a.Panel.Footer,null,c.default.createElement(f.default,{onSaveClick:this.handleSave})));return t}}]);return t}(l.Component);V.propTypes={isFetching:u.default.bool.isRequired,onSave:u.default.func.isRequired,schema:u.default.objectOf(u.default.any),values:u.default.objectOf(u.default.any)};t.default=V},1680:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){var r=[];var n=true;var a=false;var i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){a=true;i=e}finally{try{!n&&o["return"]&&o["return"]()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(3);var o=r(6);var s=r(61);var u=r(0);var l=j(u);var c=r(1);var d=j(c);var f=r(1586);var p=r(182);var v=r(187);var h=r(186);var m=r(1527);var y=j(m);var w=r(560);var b=j(w);var g=r(1522);var _=j(g);var S=r(1521);var O=j(S);var P=r(1620);var E=j(P);function j(e){return e&&e.__esModule?e:{default:e}}function V(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,i){try{var o=t[a](i);var s=o.value}catch(e){r(e);return}if(!o.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){k(t,e);function t(e){T(this,t);var r=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isFetching:true};r.handleSave=r.handleSave.bind(r);return r}a(t,[{key:"componentDidMount",value:function(){var e=V(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:t=n(this.props.router.params,1),r=t[0];i.prev=1;i.next=4;return(0,f.getSchema)(r);case 4:a=i.sent;this.props.addOrUpdateSchema(a,r);i.next=11;break;case 8:i.prev=8;i.t0=i["catch"](1);b.default.addMessage({response:i.t0,type:b.default.TYPE_DANGER});case 11:i.prev=11;this.setState({isFetching:false});return i.finish(11);case 14:case"end":return i.stop()}},e,this,[[1,8,11,14]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSave",value:function(){var e=V(regeneratorRuntime.mark(function e(t){var r,a,i,o,u,l;return regeneratorRuntime.wrap(function e(c){while(1)switch(c.prev=c.next){case 0:r=n(this.props.router.params,2),a=r[0],i=r[1];o=1===this.props.router.params.length;c.prev=2;if(!o){c.next=10;break}c.next=6;return(0,f.updateSingleton)(a,t);case 6:u=c.sent;this.props.addOrUpdateSingletonInstance(u);c.next=14;break;case 10:c.next=12;return(0,f.update)(a,i,t);case 12:l=c.sent;this.props.addOrUpdateInstance(l);case 14:b.default.addMessage({message:(0,s.t)("config.messages.AppMessages.changesSaved")});c.next=20;break;case 17:c.prev=17;c.t0=c["catch"](2);b.default.addMessage({response:c.t0,type:b.default.TYPE_DANGER});case 20:case"end":return c.stop()}},e,this,[[2,17]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"render",value:function e(){return d.default.createElement(E.default,{isFetching:this.state.isFetching,onSave:this.handleSave,schema:this.props.schema,values:this.props.instance})}}]);return t}(c.Component);C.propTypes={addOrUpdateInstance:l.default.func.isRequired,addOrUpdateSchema:l.default.func.isRequired,addOrUpdateSingletonInstance:l.default.func.isRequired,instance:l.default.objectOf(l.default.any),router:O.default,schema:l.default.objectOf(l.default.any)};C=(0,y.default)(C,function(e,t){var r=n(t.router.params,2),a=r[0],i=r[1];var s=1===t.router.params.length;var u=e.remote.config.global.secretStores.types.schema;var l=void 0;if(s){var c=e.remote.config.global.secretStores.singletons.instances.list;l=(0,o.find)(c,function(e){return e._type._id===a})}else{var d=e.remote.config.global.secretStores.instances.list;l=(0,o.find)(d,function(e){return e._id===i&&e._type._id===a})}return{schema:u[a],instance:l}},function(e){return{addOrUpdateInstance:(0,i.bindActionCreators)(p.addOrUpdate,e),addOrUpdateSchema:(0,i.bindActionCreators)(h.addOrUpdate,e),addOrUpdateSingletonInstance:(0,i.bindActionCreators)(v.addOrUpdate,e)}});t.default=(0,_.default)(C)},1688:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(570);var a=r(0);var i=u(a);var o=r(1);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){var r=t.link,a=t.title;return s.default.createElement("nav",null,s.default.createElement("div",{className:"subnav-container"},s.default.createElement(n.Grid,null,s.default.createElement("strong",null,s.default.createElement("i",{className:"fa fa-angle-left text-muted"})," ",s.default.createElement("a",{href:r},a)))))};l.propTypes={link:i.default.string.isRequired,title:i.default.string.isRequired};t.default=l}}]);
//# sourceMappingURL=31.df11a2e443.js.map